{"ast":null,"code":"import { DOM } from \"../dom\";\n/**\n * Represents styles that can be applied to a custom element.\n * @public\n */\n\nexport class ElementStyles {\n  constructor() {\n    this.targets = new WeakSet();\n    /** @internal */\n\n    this.behaviors = null;\n  }\n  /** @internal */\n\n\n  addStylesTo(target) {\n    this.targets.add(target);\n  }\n  /** @internal */\n\n\n  removeStylesFrom(target) {\n    this.targets.delete(target);\n  }\n  /** @internal */\n\n\n  isAttachedTo(target) {\n    return this.targets.has(target);\n  }\n  /**\n   * Associates behaviors with this set of styles.\n   * @param behaviors - The behaviors to associate.\n   */\n\n\n  withBehaviors(...behaviors) {\n    this.behaviors = this.behaviors === null ? behaviors : this.behaviors.concat(behaviors);\n    return this;\n  }\n\n}\n/**\n * Create ElementStyles from ComposableStyles.\n */\n\nElementStyles.create = (() => {\n  if (DOM.supportsAdoptedStyleSheets) {\n    const styleSheetCache = new Map();\n    return styles => // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    new AdoptedStyleSheetsStyles(styles, styleSheetCache);\n  } // eslint-disable-next-line @typescript-eslint/no-use-before-define\n\n\n  return styles => new StyleElementStyles(styles);\n})();\n\nfunction reduceStyles(styles) {\n  return styles.map(x => x instanceof ElementStyles ? reduceStyles(x.styles) : [x]).reduce((prev, curr) => prev.concat(curr), []);\n}\n\nfunction reduceBehaviors(styles) {\n  return styles.map(x => x instanceof ElementStyles ? x.behaviors : null).reduce((prev, curr) => {\n    if (curr === null) {\n      return prev;\n    }\n\n    if (prev === null) {\n      prev = [];\n    }\n\n    return prev.concat(curr);\n  }, null);\n}\n/**\n * https://wicg.github.io/construct-stylesheets/\n * https://developers.google.com/web/updates/2019/02/constructable-stylesheets\n *\n * @internal\n */\n\n\nexport class AdoptedStyleSheetsStyles extends ElementStyles {\n  constructor(styles, styleSheetCache) {\n    super();\n    this.styles = styles;\n    this.styleSheetCache = styleSheetCache;\n    this._styleSheets = void 0;\n    this.behaviors = reduceBehaviors(styles);\n  }\n\n  get styleSheets() {\n    if (this._styleSheets === void 0) {\n      const styles = this.styles;\n      const styleSheetCache = this.styleSheetCache;\n      this._styleSheets = reduceStyles(styles).map(x => {\n        if (x instanceof CSSStyleSheet) {\n          return x;\n        }\n\n        let sheet = styleSheetCache.get(x);\n\n        if (sheet === void 0) {\n          sheet = new CSSStyleSheet();\n          sheet.replaceSync(x);\n          styleSheetCache.set(x, sheet);\n        }\n\n        return sheet;\n      });\n    }\n\n    return this._styleSheets;\n  }\n\n  addStylesTo(target) {\n    target.adoptedStyleSheets = [...target.adoptedStyleSheets, ...this.styleSheets];\n    super.addStylesTo(target);\n  }\n\n  removeStylesFrom(target) {\n    const sourceSheets = this.styleSheets;\n    target.adoptedStyleSheets = target.adoptedStyleSheets.filter(x => sourceSheets.indexOf(x) === -1);\n    super.removeStylesFrom(target);\n  }\n\n}\nlet styleClassId = 0;\n\nfunction getNextStyleClass() {\n  return `fast-style-class-${++styleClassId}`;\n}\n/**\n * @internal\n */\n\n\nexport class StyleElementStyles extends ElementStyles {\n  constructor(styles) {\n    super();\n    this.styles = styles;\n    this.behaviors = null;\n    this.behaviors = reduceBehaviors(styles);\n    this.styleSheets = reduceStyles(styles);\n    this.styleClass = getNextStyleClass();\n  }\n\n  addStylesTo(target) {\n    const styleSheets = this.styleSheets;\n    const styleClass = this.styleClass;\n    target = this.normalizeTarget(target);\n\n    for (let i = 0; i < styleSheets.length; i++) {\n      const element = document.createElement(\"style\");\n      element.innerHTML = styleSheets[i];\n      element.className = styleClass;\n      target.append(element);\n    }\n\n    super.addStylesTo(target);\n  }\n\n  removeStylesFrom(target) {\n    target = this.normalizeTarget(target);\n    const styles = target.querySelectorAll(`.${this.styleClass}`);\n\n    for (let i = 0, ii = styles.length; i < ii; ++i) {\n      target.removeChild(styles[i]);\n    }\n\n    super.removeStylesFrom(target);\n  }\n\n  isAttachedTo(target) {\n    return super.isAttachedTo(this.normalizeTarget(target));\n  }\n\n  normalizeTarget(target) {\n    return target === document ? document.body : target;\n  }\n\n}","map":{"version":3,"sources":["D:/VUE_FDS/fluent-vue/node_modules/@microsoft/fast-element/dist/esm/styles/element-styles.js"],"names":["DOM","ElementStyles","constructor","targets","WeakSet","behaviors","addStylesTo","target","add","removeStylesFrom","delete","isAttachedTo","has","withBehaviors","concat","create","supportsAdoptedStyleSheets","styleSheetCache","Map","styles","AdoptedStyleSheetsStyles","StyleElementStyles","reduceStyles","map","x","reduce","prev","curr","reduceBehaviors","_styleSheets","styleSheets","CSSStyleSheet","sheet","get","replaceSync","set","adoptedStyleSheets","sourceSheets","filter","indexOf","styleClassId","getNextStyleClass","styleClass","normalizeTarget","i","length","element","document","createElement","innerHTML","className","append","querySelectorAll","ii","removeChild","body"],"mappings":"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","sourcesContent":["import { DOM } from \"../dom\";\n/**\n * Represents styles that can be applied to a custom element.\n * @public\n */\nexport class ElementStyles {\n    constructor() {\n        this.targets = new WeakSet();\n        /** @internal */\n        this.behaviors = null;\n    }\n    /** @internal */\n    addStylesTo(target) {\n        this.targets.add(target);\n    }\n    /** @internal */\n    removeStylesFrom(target) {\n        this.targets.delete(target);\n    }\n    /** @internal */\n    isAttachedTo(target) {\n        return this.targets.has(target);\n    }\n    /**\n     * Associates behaviors with this set of styles.\n     * @param behaviors - The behaviors to associate.\n     */\n    withBehaviors(...behaviors) {\n        this.behaviors =\n            this.behaviors === null ? behaviors : this.behaviors.concat(behaviors);\n        return this;\n    }\n}\n/**\n * Create ElementStyles from ComposableStyles.\n */\nElementStyles.create = (() => {\n    if (DOM.supportsAdoptedStyleSheets) {\n        const styleSheetCache = new Map();\n        return (styles) => \n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new AdoptedStyleSheetsStyles(styles, styleSheetCache);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return (styles) => new StyleElementStyles(styles);\n})();\nfunction reduceStyles(styles) {\n    return styles\n        .map((x) => x instanceof ElementStyles ? reduceStyles(x.styles) : [x])\n        .reduce((prev, curr) => prev.concat(curr), []);\n}\nfunction reduceBehaviors(styles) {\n    return styles\n        .map((x) => (x instanceof ElementStyles ? x.behaviors : null))\n        .reduce((prev, curr) => {\n        if (curr === null) {\n            return prev;\n        }\n        if (prev === null) {\n            prev = [];\n        }\n        return prev.concat(curr);\n    }, null);\n}\n/**\n * https://wicg.github.io/construct-stylesheets/\n * https://developers.google.com/web/updates/2019/02/constructable-stylesheets\n *\n * @internal\n */\nexport class AdoptedStyleSheetsStyles extends ElementStyles {\n    constructor(styles, styleSheetCache) {\n        super();\n        this.styles = styles;\n        this.styleSheetCache = styleSheetCache;\n        this._styleSheets = void 0;\n        this.behaviors = reduceBehaviors(styles);\n    }\n    get styleSheets() {\n        if (this._styleSheets === void 0) {\n            const styles = this.styles;\n            const styleSheetCache = this.styleSheetCache;\n            this._styleSheets = reduceStyles(styles).map((x) => {\n                if (x instanceof CSSStyleSheet) {\n                    return x;\n                }\n                let sheet = styleSheetCache.get(x);\n                if (sheet === void 0) {\n                    sheet = new CSSStyleSheet();\n                    sheet.replaceSync(x);\n                    styleSheetCache.set(x, sheet);\n                }\n                return sheet;\n            });\n        }\n        return this._styleSheets;\n    }\n    addStylesTo(target) {\n        target.adoptedStyleSheets = [...target.adoptedStyleSheets, ...this.styleSheets];\n        super.addStylesTo(target);\n    }\n    removeStylesFrom(target) {\n        const sourceSheets = this.styleSheets;\n        target.adoptedStyleSheets = target.adoptedStyleSheets.filter((x) => sourceSheets.indexOf(x) === -1);\n        super.removeStylesFrom(target);\n    }\n}\nlet styleClassId = 0;\nfunction getNextStyleClass() {\n    return `fast-style-class-${++styleClassId}`;\n}\n/**\n * @internal\n */\nexport class StyleElementStyles extends ElementStyles {\n    constructor(styles) {\n        super();\n        this.styles = styles;\n        this.behaviors = null;\n        this.behaviors = reduceBehaviors(styles);\n        this.styleSheets = reduceStyles(styles);\n        this.styleClass = getNextStyleClass();\n    }\n    addStylesTo(target) {\n        const styleSheets = this.styleSheets;\n        const styleClass = this.styleClass;\n        target = this.normalizeTarget(target);\n        for (let i = 0; i < styleSheets.length; i++) {\n            const element = document.createElement(\"style\");\n            element.innerHTML = styleSheets[i];\n            element.className = styleClass;\n            target.append(element);\n        }\n        super.addStylesTo(target);\n    }\n    removeStylesFrom(target) {\n        target = this.normalizeTarget(target);\n        const styles = target.querySelectorAll(`.${this.styleClass}`);\n        for (let i = 0, ii = styles.length; i < ii; ++i) {\n            target.removeChild(styles[i]);\n        }\n        super.removeStylesFrom(target);\n    }\n    isAttachedTo(target) {\n        return super.isAttachedTo(this.normalizeTarget(target));\n    }\n    normalizeTarget(target) {\n        return target === document ? document.body : target;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}