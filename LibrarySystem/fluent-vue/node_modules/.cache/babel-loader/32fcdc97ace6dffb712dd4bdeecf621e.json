{"ast":null,"code":"import { h, ref, computed, toRef, watch, nextTick, defineComponent, mergeProps, Transition, onMounted, onBeforeUnmount, watchEffect } from 'vue';\nimport { VLazyTeleport } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { getScrollParent, unwrapElement } from 'seemly';\nimport { useConfig, useTheme, useThemeClass } from '../../_mixins';\nimport { NBaseIcon } from '../../_internal';\nimport { formatLength, resolveSlot, warn, warnOnce } from '../../_utils';\nimport { backTopLight } from '../styles';\nimport BackTopIcon from './BackTopIcon';\nimport style from './styles/index.cssr';\nconst backTopProps = Object.assign(Object.assign({}, useTheme.props), {\n  show: {\n    type: Boolean,\n    default: undefined\n  },\n  right: {\n    type: [Number, String],\n    default: 40\n  },\n  bottom: {\n    type: [Number, String],\n    default: 40\n  },\n  to: {\n    type: [String, Object],\n    default: 'body'\n  },\n  visibilityHeight: {\n    type: Number,\n    default: 180\n  },\n  listenTo: [String, Object, Function],\n  'onUpdate:show': {\n    type: Function,\n    default: () => {}\n  },\n  // deprecated\n  target: Function,\n  onShow: Function,\n  onHide: Function\n});\nexport default defineComponent({\n  name: 'BackTop',\n  // make style applied to back-top button\n  inheritAttrs: false,\n  props: backTopProps,\n\n  setup(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(() => {\n        if (props.target !== undefined) {\n          warnOnce('back-top', '`target` is deprecated, please use `listen-to` instead.');\n        }\n\n        if (props.onShow !== undefined) {\n          warnOnce('back-top', '`on-show` is deprecated, please use `on-update:show` instead.');\n        }\n\n        if (props.onHide !== undefined) {\n          warnOnce('back-top', '`on-hide` is deprecated, please use `on-update:show` instead.');\n        }\n      });\n    }\n\n    const {\n      mergedClsPrefixRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const scrollTopRef = ref(null);\n    const uncontrolledShowRef = computed(() => {\n      if (scrollTopRef.value === null) return false;\n      return scrollTopRef.value >= props.visibilityHeight;\n    });\n    const DomInfoReadyRef = ref(false);\n    watch(uncontrolledShowRef, value => {\n      if (DomInfoReadyRef.value) {\n        props['onUpdate:show'](value);\n      }\n    });\n    const controlledShowRef = toRef(props, 'show');\n    const mergedShowRef = useMergedState(controlledShowRef, uncontrolledShowRef);\n    const transitionDisabledRef = ref(true);\n    const placeholderRef = ref(null);\n    const styleRef = computed(() => {\n      return {\n        right: formatLength(props.right),\n        bottom: formatLength(props.bottom)\n      };\n    });\n    let scrollElement;\n    let scrollListenerRegistered; // deprecated\n\n    watch(mergedShowRef, value => {\n      var _a, _b;\n\n      if (DomInfoReadyRef.value) {\n        if (value) {\n          (_a = props.onShow) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n\n        (_b = props.onHide) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    });\n    const themeRef = useTheme('BackTop', '-back-top', style, backTopLight, props, mergedClsPrefixRef);\n\n    function init() {\n      var _a;\n\n      if (scrollListenerRegistered) return;\n      scrollListenerRegistered = true;\n      const scrollEl = ((_a = props.target) === null || _a === void 0 ? void 0 : _a.call(props)) || unwrapElement(props.listenTo) || getScrollParent(placeholderRef.value);\n\n      if (!scrollEl) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('back-top', 'Container of back-top element is not found. This could be a bug of naive-ui.');\n        }\n\n        return;\n      }\n\n      scrollElement = scrollEl;\n      const {\n        to\n      } = props;\n      const target = typeof to === 'string' ? document.querySelector(to) : to;\n\n      if (process.env.NODE_ENV !== 'production' && !target) {\n        warn('back-top', 'Target is not found.');\n      }\n\n      if (scrollEl) {\n        scrollEl.addEventListener('scroll', handleScroll);\n        handleScroll();\n      }\n    }\n\n    function handleClick(e) {\n      if (scrollElement.nodeName === '#document') {\n        ;\n        scrollElement.documentElement.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      } else {\n        scrollElement.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      }\n    }\n\n    function handleScroll() {\n      if (scrollElement.nodeName === '#document') {\n        scrollTopRef.value = scrollElement.documentElement.scrollTop;\n      } else {\n        scrollTopRef.value = scrollElement.scrollTop;\n      }\n\n      if (!DomInfoReadyRef.value) {\n        void nextTick(() => {\n          DomInfoReadyRef.value = true;\n        });\n      }\n    }\n\n    function handleAfterEnter() {\n      transitionDisabledRef.value = false;\n    }\n\n    onMounted(() => {\n      init();\n      transitionDisabledRef.value = mergedShowRef.value;\n    });\n    onBeforeUnmount(() => {\n      if (scrollElement) {\n        scrollElement.removeEventListener('scroll', handleScroll);\n      }\n    });\n    const cssVarsRef = computed(() => {\n      const {\n        self: {\n          color,\n          boxShadow,\n          boxShadowHover,\n          boxShadowPressed,\n          iconColor,\n          iconColorHover,\n          iconColorPressed,\n          width,\n          height,\n          iconSize,\n          borderRadius,\n          textColor\n        },\n        common: {\n          cubicBezierEaseInOut\n        }\n      } = themeRef.value;\n      return {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-border-radius': borderRadius,\n        '--n-height': height,\n        '--n-width': width,\n        '--n-box-shadow': boxShadow,\n        '--n-box-shadow-hover': boxShadowHover,\n        '--n-box-shadow-pressed': boxShadowPressed,\n        '--n-color': color,\n        '--n-icon-size': iconSize,\n        '--n-icon-color': iconColor,\n        '--n-icon-color-hover': iconColorHover,\n        '--n-icon-color-pressed': iconColorPressed,\n        '--n-text-color': textColor\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('back-top', undefined, cssVarsRef, props) : undefined;\n    return {\n      placeholderRef,\n      style: styleRef,\n      mergedShow: mergedShowRef,\n      isMounted: useIsMounted(),\n      scrollElement: ref(null),\n      scrollTop: scrollTopRef,\n      DomInfoReady: DomInfoReadyRef,\n      transitionDisabled: transitionDisabledRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      handleAfterEnter,\n      handleScroll,\n      handleClick,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"div\", {\n      ref: \"placeholderRef\",\n      class: `${mergedClsPrefix}-back-top-placeholder`,\n      style: \"display: none\",\n      \"aria-hidden\": true\n    }, h(VLazyTeleport, {\n      to: this.to,\n      show: this.mergedShow\n    }, {\n      default: () => h(Transition, {\n        name: \"fade-in-scale-up-transition\",\n        appear: this.isMounted,\n        onAfterEnter: this.handleAfterEnter\n      }, {\n        default: () => {\n          var _a;\n\n          (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n          return this.mergedShow ? h('div', mergeProps(this.$attrs, {\n            class: [`${mergedClsPrefix}-back-top`, this.themeClass, this.transitionDisabled && `${mergedClsPrefix}-back-top--transition-disabled`],\n            style: [this.style, this.cssVars],\n            onClick: this.handleClick\n          }), resolveSlot(this.$slots.default, () => [h(NBaseIcon, {\n            clsPrefix: mergedClsPrefix\n          }, {\n            default: () => BackTopIcon\n          })])) : null;\n        }\n      })\n    }));\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/back-top/src/BackTop.js"],"names":["h","ref","computed","toRef","watch","nextTick","defineComponent","mergeProps","Transition","onMounted","onBeforeUnmount","watchEffect","VLazyTeleport","useIsMounted","useMergedState","getScrollParent","unwrapElement","useConfig","useTheme","useThemeClass","NBaseIcon","formatLength","resolveSlot","warn","warnOnce","backTopLight","BackTopIcon","style","backTopProps","Object","assign","props","show","type","Boolean","default","undefined","right","Number","String","bottom","to","visibilityHeight","listenTo","Function","target","onShow","onHide","name","inheritAttrs","setup","process","env","NODE_ENV","mergedClsPrefixRef","inlineThemeDisabled","scrollTopRef","uncontrolledShowRef","value","DomInfoReadyRef","controlledShowRef","mergedShowRef","transitionDisabledRef","placeholderRef","styleRef","scrollElement","scrollListenerRegistered","_a","_b","call","themeRef","init","scrollEl","document","querySelector","addEventListener","handleScroll","handleClick","e","nodeName","documentElement","scrollTo","top","behavior","scrollTop","handleAfterEnter","removeEventListener","cssVarsRef","self","color","boxShadow","boxShadowHover","boxShadowPressed","iconColor","iconColorHover","iconColorPressed","width","height","iconSize","borderRadius","textColor","common","cubicBezierEaseInOut","themeClassHandle","mergedShow","isMounted","DomInfoReady","transitionDisabled","mergedClsPrefix","cssVars","themeClass","onRender","render","class","appear","onAfterEnter","$attrs","onClick","$slots","clsPrefix"],"mappings":"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","sourcesContent":["import { h, ref, computed, toRef, watch, nextTick, defineComponent, mergeProps, Transition, onMounted, onBeforeUnmount, watchEffect } from 'vue';\nimport { VLazyTeleport } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { getScrollParent, unwrapElement } from 'seemly';\nimport { useConfig, useTheme, useThemeClass } from '../../_mixins';\nimport { NBaseIcon } from '../../_internal';\nimport { formatLength, resolveSlot, warn, warnOnce } from '../../_utils';\nimport { backTopLight } from '../styles';\nimport BackTopIcon from './BackTopIcon';\nimport style from './styles/index.cssr';\nconst backTopProps = Object.assign(Object.assign({}, useTheme.props), { show: {\n        type: Boolean,\n        default: undefined\n    }, right: {\n        type: [Number, String],\n        default: 40\n    }, bottom: {\n        type: [Number, String],\n        default: 40\n    }, to: {\n        type: [String, Object],\n        default: 'body'\n    }, visibilityHeight: {\n        type: Number,\n        default: 180\n    }, listenTo: [String, Object, Function], 'onUpdate:show': {\n        type: Function,\n        default: () => { }\n    }, \n    // deprecated\n    target: Function, onShow: Function, onHide: Function });\nexport default defineComponent({\n    name: 'BackTop',\n    // make style applied to back-top button\n    inheritAttrs: false,\n    props: backTopProps,\n    setup(props) {\n        if (process.env.NODE_ENV !== 'production') {\n            watchEffect(() => {\n                if (props.target !== undefined) {\n                    warnOnce('back-top', '`target` is deprecated, please use `listen-to` instead.');\n                }\n                if (props.onShow !== undefined) {\n                    warnOnce('back-top', '`on-show` is deprecated, please use `on-update:show` instead.');\n                }\n                if (props.onHide !== undefined) {\n                    warnOnce('back-top', '`on-hide` is deprecated, please use `on-update:show` instead.');\n                }\n            });\n        }\n        const { mergedClsPrefixRef, inlineThemeDisabled } = useConfig(props);\n        const scrollTopRef = ref(null);\n        const uncontrolledShowRef = computed(() => {\n            if (scrollTopRef.value === null)\n                return false;\n            return scrollTopRef.value >= props.visibilityHeight;\n        });\n        const DomInfoReadyRef = ref(false);\n        watch(uncontrolledShowRef, (value) => {\n            if (DomInfoReadyRef.value) {\n                props['onUpdate:show'](value);\n            }\n        });\n        const controlledShowRef = toRef(props, 'show');\n        const mergedShowRef = useMergedState(controlledShowRef, uncontrolledShowRef);\n        const transitionDisabledRef = ref(true);\n        const placeholderRef = ref(null);\n        const styleRef = computed(() => {\n            return {\n                right: formatLength(props.right),\n                bottom: formatLength(props.bottom)\n            };\n        });\n        let scrollElement;\n        let scrollListenerRegistered;\n        // deprecated\n        watch(mergedShowRef, (value) => {\n            var _a, _b;\n            if (DomInfoReadyRef.value) {\n                if (value) {\n                    (_a = props.onShow) === null || _a === void 0 ? void 0 : _a.call(props);\n                }\n                (_b = props.onHide) === null || _b === void 0 ? void 0 : _b.call(props);\n            }\n        });\n        const themeRef = useTheme('BackTop', '-back-top', style, backTopLight, props, mergedClsPrefixRef);\n        function init() {\n            var _a;\n            if (scrollListenerRegistered)\n                return;\n            scrollListenerRegistered = true;\n            const scrollEl = ((_a = props.target) === null || _a === void 0 ? void 0 : _a.call(props)) ||\n                unwrapElement(props.listenTo) ||\n                getScrollParent(placeholderRef.value);\n            if (!scrollEl) {\n                if (process.env.NODE_ENV !== 'production') {\n                    warn('back-top', 'Container of back-top element is not found. This could be a bug of naive-ui.');\n                }\n                return;\n            }\n            scrollElement = scrollEl;\n            const { to } = props;\n            const target = typeof to === 'string' ? document.querySelector(to) : to;\n            if (process.env.NODE_ENV !== 'production' && !target) {\n                warn('back-top', 'Target is not found.');\n            }\n            if (scrollEl) {\n                scrollEl.addEventListener('scroll', handleScroll);\n                handleScroll();\n            }\n        }\n        function handleClick(e) {\n            if (scrollElement.nodeName === '#document') {\n                ;\n                scrollElement.documentElement.scrollTo({\n                    top: 0,\n                    behavior: 'smooth'\n                });\n            }\n            else {\n                scrollElement.scrollTo({\n                    top: 0,\n                    behavior: 'smooth'\n                });\n            }\n        }\n        function handleScroll() {\n            if (scrollElement.nodeName === '#document') {\n                scrollTopRef.value = scrollElement.documentElement.scrollTop;\n            }\n            else {\n                scrollTopRef.value = scrollElement.scrollTop;\n            }\n            if (!DomInfoReadyRef.value) {\n                void nextTick(() => {\n                    DomInfoReadyRef.value = true;\n                });\n            }\n        }\n        function handleAfterEnter() {\n            transitionDisabledRef.value = false;\n        }\n        onMounted(() => {\n            init();\n            transitionDisabledRef.value = mergedShowRef.value;\n        });\n        onBeforeUnmount(() => {\n            if (scrollElement) {\n                scrollElement.removeEventListener('scroll', handleScroll);\n            }\n        });\n        const cssVarsRef = computed(() => {\n            const { self: { color, boxShadow, boxShadowHover, boxShadowPressed, iconColor, iconColorHover, iconColorPressed, width, height, iconSize, borderRadius, textColor }, common: { cubicBezierEaseInOut } } = themeRef.value;\n            return {\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-border-radius': borderRadius,\n                '--n-height': height,\n                '--n-width': width,\n                '--n-box-shadow': boxShadow,\n                '--n-box-shadow-hover': boxShadowHover,\n                '--n-box-shadow-pressed': boxShadowPressed,\n                '--n-color': color,\n                '--n-icon-size': iconSize,\n                '--n-icon-color': iconColor,\n                '--n-icon-color-hover': iconColorHover,\n                '--n-icon-color-pressed': iconColorPressed,\n                '--n-text-color': textColor\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('back-top', undefined, cssVarsRef, props)\n            : undefined;\n        return {\n            placeholderRef,\n            style: styleRef,\n            mergedShow: mergedShowRef,\n            isMounted: useIsMounted(),\n            scrollElement: ref(null),\n            scrollTop: scrollTopRef,\n            DomInfoReady: DomInfoReadyRef,\n            transitionDisabled: transitionDisabledRef,\n            mergedClsPrefix: mergedClsPrefixRef,\n            handleAfterEnter,\n            handleScroll,\n            handleClick,\n            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n        };\n    },\n    render() {\n        const { mergedClsPrefix } = this;\n        return (h(\"div\", { ref: \"placeholderRef\", class: `${mergedClsPrefix}-back-top-placeholder`, style: \"display: none\", \"aria-hidden\": true },\n            h(VLazyTeleport, { to: this.to, show: this.mergedShow }, {\n                default: () => (h(Transition, { name: \"fade-in-scale-up-transition\", appear: this.isMounted, onAfterEnter: this.handleAfterEnter }, {\n                    default: () => {\n                        var _a;\n                        (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n                        return this.mergedShow\n                            ? h('div', mergeProps(this.$attrs, {\n                                class: [\n                                    `${mergedClsPrefix}-back-top`,\n                                    this.themeClass,\n                                    this.transitionDisabled &&\n                                        `${mergedClsPrefix}-back-top--transition-disabled`\n                                ],\n                                style: [this.style, this.cssVars],\n                                onClick: this.handleClick\n                            }), resolveSlot(this.$slots.default, () => [\n                                h(NBaseIcon, { clsPrefix: mergedClsPrefix }, { default: () => BackTopIcon })\n                            ]))\n                            : null;\n                    }\n                }))\n            })));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}