{"ast":null,"code":"import { defineComponent, h, nextTick, ref, computed, watch, toRef } from 'vue';\nexport default defineComponent({\n  name: 'SlotMachineNumber',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    value: {\n      // could be '+', 1, 2, ...\n      type: [Number, String],\n      required: true\n    },\n    oldOriginalNumber: {\n      type: Number,\n      default: undefined\n    },\n    newOriginalNumber: {\n      type: Number,\n      default: undefined\n    }\n  },\n\n  setup(props) {\n    const numberRef = ref(null);\n    const oldNumberRef = ref(props.value);\n    const newNumberRef = ref(props.value);\n    const scrollAnimationDirectionRef = ref('up');\n    const activeRef = ref(false);\n    const newNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-current-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    });\n    const oldNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-old-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    }); // BUG: may be typescript bug\n\n    watch(toRef(props, 'value'), (value, oldValue) => {\n      oldNumberRef.value = oldValue;\n      newNumberRef.value = value;\n      void nextTick(scroll);\n    });\n\n    function scroll() {\n      const newOriginalNumber = props.newOriginalNumber;\n      const oldOriginalNumber = props.oldOriginalNumber;\n\n      if (oldOriginalNumber === undefined || newOriginalNumber === undefined) {\n        return;\n      }\n\n      if (newOriginalNumber > oldOriginalNumber) {\n        scrollByDir('up');\n      } else if (oldOriginalNumber > newOriginalNumber) {\n        scrollByDir('down');\n      }\n    }\n\n    function scrollByDir(dir) {\n      scrollAnimationDirectionRef.value = dir;\n      activeRef.value = false;\n      void nextTick(() => {\n        var _a;\n\n        void ((_a = numberRef.value) === null || _a === void 0 ? void 0 : _a.offsetWidth);\n        activeRef.value = true;\n      });\n    }\n\n    return () => {\n      const {\n        clsPrefix\n      } = props;\n      return h(\"span\", {\n        ref: numberRef,\n        class: `${clsPrefix}-base-slot-machine-number`\n      }, oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--top`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null, h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-current-number`, newNumberScrollAnimationClassRef.value]\n      }, h(\"span\", {\n        ref: \"numberWrapper\",\n        class: [`${clsPrefix}-base-slot-machine-current-number__inner`, typeof props.value !== 'number' && `${clsPrefix}-base-slot-machine-current-number__inner--not-number`]\n      }, newNumberRef.value)), oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--bottom`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null);\n    };\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/_internal/slot-machine/src/SlotMachineNumber.js"],"names":["defineComponent","h","nextTick","ref","computed","watch","toRef","name","props","clsPrefix","type","String","required","value","Number","oldOriginalNumber","default","undefined","newOriginalNumber","setup","numberRef","oldNumberRef","newNumberRef","scrollAnimationDirectionRef","activeRef","newNumberScrollAnimationClassRef","oldNumberScrollAnimationClassRef","oldValue","scroll","scrollByDir","dir","_a","offsetWidth","class"],"mappings":"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","sourcesContent":["import { defineComponent, h, nextTick, ref, computed, watch, toRef } from 'vue';\nexport default defineComponent({\n    name: 'SlotMachineNumber',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        value: {\n            // could be '+', 1, 2, ...\n            type: [Number, String],\n            required: true\n        },\n        oldOriginalNumber: {\n            type: Number,\n            default: undefined\n        },\n        newOriginalNumber: {\n            type: Number,\n            default: undefined\n        }\n    },\n    setup(props) {\n        const numberRef = ref(null);\n        const oldNumberRef = ref(props.value);\n        const newNumberRef = ref(props.value);\n        const scrollAnimationDirectionRef = ref('up');\n        const activeRef = ref(false);\n        const newNumberScrollAnimationClassRef = computed(() => {\n            return activeRef.value\n                ? `${props.clsPrefix}-base-slot-machine-current-number--${scrollAnimationDirectionRef.value}-scroll`\n                : null;\n        });\n        const oldNumberScrollAnimationClassRef = computed(() => {\n            return activeRef.value\n                ? `${props.clsPrefix}-base-slot-machine-old-number--${scrollAnimationDirectionRef.value}-scroll`\n                : null;\n        });\n        // BUG: may be typescript bug\n        watch(toRef(props, 'value'), (value, oldValue) => {\n            oldNumberRef.value = oldValue;\n            newNumberRef.value = value;\n            void nextTick(scroll);\n        });\n        function scroll() {\n            const newOriginalNumber = props.newOriginalNumber;\n            const oldOriginalNumber = props.oldOriginalNumber;\n            if (oldOriginalNumber === undefined || newOriginalNumber === undefined) {\n                return;\n            }\n            if (newOriginalNumber > oldOriginalNumber) {\n                scrollByDir('up');\n            }\n            else if (oldOriginalNumber > newOriginalNumber) {\n                scrollByDir('down');\n            }\n        }\n        function scrollByDir(dir) {\n            scrollAnimationDirectionRef.value = dir;\n            activeRef.value = false;\n            void nextTick(() => {\n                var _a;\n                void ((_a = numberRef.value) === null || _a === void 0 ? void 0 : _a.offsetWidth);\n                activeRef.value = true;\n            });\n        }\n        return () => {\n            const { clsPrefix } = props;\n            return (h(\"span\", { ref: numberRef, class: `${clsPrefix}-base-slot-machine-number` },\n                oldNumberRef.value !== null ? (h(\"span\", { class: [\n                        `${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--top`,\n                        oldNumberScrollAnimationClassRef.value\n                    ] }, oldNumberRef.value)) : null,\n                h(\"span\", { class: [\n                        `${clsPrefix}-base-slot-machine-current-number`,\n                        newNumberScrollAnimationClassRef.value\n                    ] },\n                    h(\"span\", { ref: \"numberWrapper\", class: [\n                            `${clsPrefix}-base-slot-machine-current-number__inner`,\n                            typeof props.value !== 'number' &&\n                                `${clsPrefix}-base-slot-machine-current-number__inner--not-number`\n                        ] }, newNumberRef.value)),\n                oldNumberRef.value !== null ? (h(\"span\", { class: [\n                        `${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--bottom`,\n                        oldNumberScrollAnimationClassRef.value\n                    ] }, oldNumberRef.value)) : null));\n        };\n    }\n});\n"]},"metadata":{},"sourceType":"module"}