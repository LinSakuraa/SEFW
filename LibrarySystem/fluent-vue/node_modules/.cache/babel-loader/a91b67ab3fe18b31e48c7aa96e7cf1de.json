{"ast":null,"code":"import { h, ref, toRef, computed, defineComponent, Transition, withDirectives, watchEffect } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VTarget, VFollower } from 'vueuc';\nimport { clickoutside } from 'vdirs';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { tmOptions } from '../../select/src/utils';\nimport { useFormItem, useTheme, useConfig, useThemeClass } from '../../_mixins';\nimport { call, useAdjustedTo, getFirstSlotVNode, warnOnce } from '../../_utils';\nimport { NInternalSelectMenu } from '../../_internal';\nimport { NInput } from '../../input';\nimport { autoCompleteLight } from '../styles';\nimport { mapAutoCompleteOptionsToSelectOptions } from './utils';\nimport style from './styles/index.cssr';\nconst autoCompleteProps = Object.assign(Object.assign({}, useTheme.props), {\n  to: useAdjustedTo.propTo,\n  bordered: {\n    type: Boolean,\n    default: undefined\n  },\n  clearable: {\n    type: Boolean,\n    default: undefined\n  },\n  defaultValue: {\n    type: String,\n    default: null\n  },\n  loading: {\n    type: Boolean,\n    default: undefined\n  },\n  disabled: {\n    type: Boolean,\n    default: undefined\n  },\n  placeholder: String,\n  placement: {\n    type: String,\n    default: 'bottom-start'\n  },\n  value: String,\n  blurAfterSelect: Boolean,\n  clearAfterSelect: Boolean,\n  getShow: Function,\n  inputProps: Object,\n  renderOption: Function,\n  renderLabel: Function,\n  size: String,\n  options: {\n    type: Array,\n    default: () => []\n  },\n  zIndex: Number,\n  status: String,\n  'onUpdate:value': [Function, Array],\n  onUpdateValue: [Function, Array],\n  onSelect: [Function, Array],\n  onBlur: [Function, Array],\n  onFocus: [Function, Array],\n  // deprecated\n  onInput: [Function, Array]\n});\nexport default defineComponent({\n  name: 'AutoComplete',\n  props: autoCompleteProps,\n\n  setup(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(() => {\n        if (props.onInput !== undefined) {\n          warnOnce('auto-complete', '`on-input` is deprecated, please use `on-update:value` instead.');\n        }\n      });\n    }\n\n    const {\n      mergedBorderedRef,\n      namespaceRef,\n      mergedClsPrefixRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const formItem = useFormItem(props);\n    const {\n      mergedSizeRef,\n      mergedDisabledRef,\n      mergedStatusRef\n    } = formItem;\n    const triggerElRef = ref(null);\n    const menuInstRef = ref(null);\n    const uncontrolledValueRef = ref(props.defaultValue);\n    const controlledValueRef = toRef(props, 'value');\n    const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n    const canBeActivatedRef = ref(false);\n    const isComposingRef = ref(false);\n    const themeRef = useTheme('AutoComplete', '-auto-complete', style, autoCompleteLight, props, mergedClsPrefixRef);\n    const selectOptionsRef = computed(() => {\n      return mapAutoCompleteOptionsToSelectOptions(props.options);\n    });\n    const mergedShowOptionsRef = computed(() => {\n      const {\n        getShow\n      } = props;\n\n      if (getShow) {\n        return getShow(mergedValueRef.value || '');\n      }\n\n      return !!mergedValueRef.value;\n    });\n    const activeRef = computed(() => {\n      return mergedShowOptionsRef.value && canBeActivatedRef.value && !!selectOptionsRef.value.length;\n    });\n    const treeMateRef = computed(() => createTreeMate(selectOptionsRef.value, tmOptions));\n\n    function doUpdateValue(value) {\n      const {\n        'onUpdate:value': _onUpdateValue,\n        onUpdateValue,\n        onInput\n      } = props;\n      const {\n        nTriggerFormInput,\n        nTriggerFormChange\n      } = formItem;\n      if (onUpdateValue) call(onUpdateValue, value);\n      if (_onUpdateValue) call(_onUpdateValue, value);\n      if (onInput) call(onInput, value);\n      uncontrolledValueRef.value = value;\n      nTriggerFormInput();\n      nTriggerFormChange();\n    }\n\n    function doSelect(value) {\n      const {\n        onSelect\n      } = props;\n      const {\n        nTriggerFormInput,\n        nTriggerFormChange\n      } = formItem;\n      if (onSelect) call(onSelect, value);\n      nTriggerFormInput();\n      nTriggerFormChange();\n    }\n\n    function doBlur(e) {\n      const {\n        onBlur\n      } = props;\n      const {\n        nTriggerFormBlur\n      } = formItem;\n      if (onBlur) call(onBlur, e);\n      nTriggerFormBlur();\n    }\n\n    function doFocus(e) {\n      const {\n        onFocus\n      } = props;\n      const {\n        nTriggerFormFocus\n      } = formItem;\n      if (onFocus) call(onFocus, e);\n      nTriggerFormFocus();\n    }\n\n    function handleCompositionStart() {\n      isComposingRef.value = true;\n    }\n\n    function handleCompositionEnd() {\n      window.setTimeout(() => {\n        isComposingRef.value = false;\n      }, 0);\n    }\n\n    function handleKeyDown(e) {\n      var _a, _b, _c;\n\n      switch (e.code) {\n        case 'Enter':\n        case 'NumpadEnter':\n          if (!isComposingRef.value) {\n            const pendingOptionTmNode = (_a = menuInstRef.value) === null || _a === void 0 ? void 0 : _a.getPendingTmNode();\n\n            if (pendingOptionTmNode) {\n              select(pendingOptionTmNode.rawNode);\n              e.preventDefault();\n            }\n          }\n\n          break;\n\n        case 'ArrowDown':\n          (_b = menuInstRef.value) === null || _b === void 0 ? void 0 : _b.next();\n          break;\n\n        case 'ArrowUp':\n          (_c = menuInstRef.value) === null || _c === void 0 ? void 0 : _c.prev();\n          break;\n      }\n    }\n\n    function select(option) {\n      if (option) {\n        doSelect(option.value);\n\n        if (props.clearAfterSelect) {\n          doUpdateValue(null);\n        } else {\n          doUpdateValue(option.label);\n        }\n\n        canBeActivatedRef.value = false;\n\n        if (props.blurAfterSelect) {\n          blur();\n        }\n      }\n    }\n\n    function handleClear() {\n      doUpdateValue(null);\n    }\n\n    function handleFocus(e) {\n      canBeActivatedRef.value = true;\n      doFocus(e);\n    }\n\n    function handleBlur(e) {\n      canBeActivatedRef.value = false;\n      doBlur(e);\n    }\n\n    function handleInput(value) {\n      canBeActivatedRef.value = true;\n      doUpdateValue(value);\n    }\n\n    function handleToggle(option) {\n      select(option.rawNode);\n    }\n\n    function handleClickOutsideMenu(e) {\n      var _a;\n\n      if (!((_a = triggerElRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.target))) {\n        canBeActivatedRef.value = false;\n      }\n    }\n\n    function blur() {\n      var _a, _b;\n\n      if ((_a = triggerElRef.value) === null || _a === void 0 ? void 0 : _a.contains(document.activeElement)) {\n        ;\n        (_b = document.activeElement) === null || _b === void 0 ? void 0 : _b.blur();\n      }\n    }\n\n    const cssVarsRef = computed(() => {\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          menuBoxShadow\n        }\n      } = themeRef.value;\n      return {\n        '--n-menu-box-shadow': menuBoxShadow,\n        '--n-bezier': cubicBezierEaseInOut\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('auto-complete', undefined, cssVarsRef, props) : undefined;\n    const inputInstRef = ref(null);\n    const exposedMethods = {\n      focus: () => {\n        var _a;\n\n        (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: () => {\n        var _a;\n\n        (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n      }\n    };\n    return {\n      focus: exposedMethods.focus,\n      blur: exposedMethods.blur,\n      inputInstRef,\n      uncontrolledValue: uncontrolledValueRef,\n      mergedValue: mergedValueRef,\n      isMounted: useIsMounted(),\n      adjustedTo: useAdjustedTo(props),\n      menuInstRef,\n      triggerElRef,\n      treeMate: treeMateRef,\n      mergedSize: mergedSizeRef,\n      mergedDisabled: mergedDisabledRef,\n      active: activeRef,\n      mergedStatus: mergedStatusRef,\n      handleClear,\n      handleFocus,\n      handleBlur,\n      handleInput,\n      handleToggle,\n      handleClickOutsideMenu,\n      handleCompositionStart,\n      handleCompositionEnd,\n      handleKeyDown,\n      mergedTheme: themeRef,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender,\n      mergedBordered: mergedBorderedRef,\n      namespace: namespaceRef,\n      mergedClsPrefix: mergedClsPrefixRef\n    };\n  },\n\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-auto-complete`,\n      ref: \"triggerElRef\",\n      onKeydown: this.handleKeyDown,\n      onCompositionstart: this.handleCompositionStart,\n      onCompositionend: this.handleCompositionEnd\n    }, h(VBinder, null, {\n      default: () => [h(VTarget, null, {\n        default: () => {\n          const defaultSlot = this.$slots.default;\n\n          if (defaultSlot) {\n            return getFirstSlotVNode(this.$slots, 'default', {\n              handleInput: this.handleInput,\n              handleFocus: this.handleFocus,\n              handleBlur: this.handleBlur,\n              value: this.mergedValue\n            });\n          }\n\n          const {\n            mergedTheme\n          } = this;\n          return h(NInput, {\n            ref: \"inputInstRef\",\n            status: this.mergedStatus,\n            theme: mergedTheme.peers.Input,\n            themeOverrides: mergedTheme.peerOverrides.Input,\n            bordered: this.mergedBordered,\n            value: this.mergedValue,\n            placeholder: this.placeholder,\n            size: this.mergedSize,\n            disabled: this.mergedDisabled,\n            clearable: this.clearable,\n            loading: this.loading,\n            inputProps: this.inputProps,\n            onClear: this.handleClear,\n            onFocus: this.handleFocus,\n            onUpdateValue: this.handleInput,\n            onBlur: this.handleBlur\n          }, {\n            suffix: () => {\n              var _a, _b;\n\n              return (_b = (_a = this.$slots).suffix) === null || _b === void 0 ? void 0 : _b.call(_a);\n            },\n            prefix: () => {\n              var _a, _b;\n\n              return (_b = (_a = this.$slots).prefix) === null || _b === void 0 ? void 0 : _b.call(_a);\n            }\n          });\n        }\n      }), h(VFollower, {\n        show: this.active,\n        to: this.adjustedTo,\n        containerClass: this.namespace,\n        zIndex: this.zIndex,\n        teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey,\n        placement: this.placement,\n        width: \"target\"\n      }, {\n        default: () => h(Transition, {\n          name: \"fade-in-scale-up-transition\",\n          appear: this.isMounted\n        }, {\n          default: () => {\n            var _a;\n\n            (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n            return this.active ? withDirectives(h(NInternalSelectMenu, {\n              clsPrefix: mergedClsPrefix,\n              ref: \"menuInstRef\",\n              theme: this.mergedTheme.peers.InternalSelectMenu,\n              themeOverrides: this.mergedTheme.peerOverrides.InternalSelectMenu,\n              \"auto-pending\": true,\n              class: [`${mergedClsPrefix}-auto-complete-menu`, this.themeClass],\n              style: this.cssVars,\n              treeMate: this.treeMate,\n              multiple: false,\n              renderLabel: this.renderLabel,\n              renderOption: this.renderOption,\n              size: \"medium\",\n              onToggle: this.handleToggle\n            }), [[clickoutside, this.handleClickOutsideMenu, undefined, {\n              capture: true\n            }]]) : null;\n          }\n        })\n      })]\n    }));\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/auto-complete/src/AutoComplete.js"],"names":["h","ref","toRef","computed","defineComponent","Transition","withDirectives","watchEffect","createTreeMate","VBinder","VTarget","VFollower","clickoutside","useIsMounted","useMergedState","tmOptions","useFormItem","useTheme","useConfig","useThemeClass","call","useAdjustedTo","getFirstSlotVNode","warnOnce","NInternalSelectMenu","NInput","autoCompleteLight","mapAutoCompleteOptionsToSelectOptions","style","autoCompleteProps","Object","assign","props","to","propTo","bordered","type","Boolean","default","undefined","clearable","defaultValue","String","loading","disabled","placeholder","placement","value","blurAfterSelect","clearAfterSelect","getShow","Function","inputProps","renderOption","renderLabel","size","options","Array","zIndex","Number","status","onUpdateValue","onSelect","onBlur","onFocus","onInput","name","setup","process","env","NODE_ENV","mergedBorderedRef","namespaceRef","mergedClsPrefixRef","inlineThemeDisabled","formItem","mergedSizeRef","mergedDisabledRef","mergedStatusRef","triggerElRef","menuInstRef","uncontrolledValueRef","controlledValueRef","mergedValueRef","canBeActivatedRef","isComposingRef","themeRef","selectOptionsRef","mergedShowOptionsRef","activeRef","length","treeMateRef","doUpdateValue","_onUpdateValue","nTriggerFormInput","nTriggerFormChange","doSelect","doBlur","e","nTriggerFormBlur","doFocus","nTriggerFormFocus","handleCompositionStart","handleCompositionEnd","window","setTimeout","handleKeyDown","_a","_b","_c","code","pendingOptionTmNode","getPendingTmNode","select","rawNode","preventDefault","next","prev","option","label","blur","handleClear","handleFocus","handleBlur","handleInput","handleToggle","handleClickOutsideMenu","contains","target","document","activeElement","cssVarsRef","common","cubicBezierEaseInOut","self","menuBoxShadow","themeClassHandle","inputInstRef","exposedMethods","focus","uncontrolledValue","mergedValue","isMounted","adjustedTo","treeMate","mergedSize","mergedDisabled","active","mergedStatus","mergedTheme","cssVars","themeClass","onRender","mergedBordered","namespace","mergedClsPrefix","render","class","onKeydown","onCompositionstart","onCompositionend","defaultSlot","$slots","theme","peers","Input","themeOverrides","peerOverrides","onClear","suffix","prefix","show","containerClass","teleportDisabled","tdkey","width","appear","clsPrefix","InternalSelectMenu","multiple","onToggle","capture"],"mappings":"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","sourcesContent":["import { h, ref, toRef, computed, defineComponent, Transition, withDirectives, watchEffect } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VTarget, VFollower } from 'vueuc';\nimport { clickoutside } from 'vdirs';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { tmOptions } from '../../select/src/utils';\nimport { useFormItem, useTheme, useConfig, useThemeClass } from '../../_mixins';\nimport { call, useAdjustedTo, getFirstSlotVNode, warnOnce } from '../../_utils';\nimport { NInternalSelectMenu } from '../../_internal';\nimport { NInput } from '../../input';\nimport { autoCompleteLight } from '../styles';\nimport { mapAutoCompleteOptionsToSelectOptions } from './utils';\nimport style from './styles/index.cssr';\nconst autoCompleteProps = Object.assign(Object.assign({}, useTheme.props), { to: useAdjustedTo.propTo, bordered: {\n        type: Boolean,\n        default: undefined\n    }, clearable: {\n        type: Boolean,\n        default: undefined\n    }, defaultValue: {\n        type: String,\n        default: null\n    }, loading: {\n        type: Boolean,\n        default: undefined\n    }, disabled: {\n        type: Boolean,\n        default: undefined\n    }, placeholder: String, placement: {\n        type: String,\n        default: 'bottom-start'\n    }, value: String, blurAfterSelect: Boolean, clearAfterSelect: Boolean, getShow: Function, inputProps: Object, renderOption: Function, renderLabel: Function, size: String, options: {\n        type: Array,\n        default: () => []\n    }, zIndex: Number, status: String, 'onUpdate:value': [Function, Array], onUpdateValue: [Function, Array], onSelect: [Function, Array], onBlur: [Function, Array], onFocus: [Function, Array], \n    // deprecated\n    onInput: [Function, Array] });\nexport default defineComponent({\n    name: 'AutoComplete',\n    props: autoCompleteProps,\n    setup(props) {\n        if (process.env.NODE_ENV !== 'production') {\n            watchEffect(() => {\n                if (props.onInput !== undefined) {\n                    warnOnce('auto-complete', '`on-input` is deprecated, please use `on-update:value` instead.');\n                }\n            });\n        }\n        const { mergedBorderedRef, namespaceRef, mergedClsPrefixRef, inlineThemeDisabled } = useConfig(props);\n        const formItem = useFormItem(props);\n        const { mergedSizeRef, mergedDisabledRef, mergedStatusRef } = formItem;\n        const triggerElRef = ref(null);\n        const menuInstRef = ref(null);\n        const uncontrolledValueRef = ref(props.defaultValue);\n        const controlledValueRef = toRef(props, 'value');\n        const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n        const canBeActivatedRef = ref(false);\n        const isComposingRef = ref(false);\n        const themeRef = useTheme('AutoComplete', '-auto-complete', style, autoCompleteLight, props, mergedClsPrefixRef);\n        const selectOptionsRef = computed(() => {\n            return mapAutoCompleteOptionsToSelectOptions(props.options);\n        });\n        const mergedShowOptionsRef = computed(() => {\n            const { getShow } = props;\n            if (getShow) {\n                return getShow(mergedValueRef.value || '');\n            }\n            return !!mergedValueRef.value;\n        });\n        const activeRef = computed(() => {\n            return (mergedShowOptionsRef.value &&\n                canBeActivatedRef.value &&\n                !!selectOptionsRef.value.length);\n        });\n        const treeMateRef = computed(() => createTreeMate(selectOptionsRef.value, tmOptions));\n        function doUpdateValue(value) {\n            const { 'onUpdate:value': _onUpdateValue, onUpdateValue, onInput } = props;\n            const { nTriggerFormInput, nTriggerFormChange } = formItem;\n            if (onUpdateValue)\n                call(onUpdateValue, value);\n            if (_onUpdateValue)\n                call(_onUpdateValue, value);\n            if (onInput)\n                call(onInput, value);\n            uncontrolledValueRef.value = value;\n            nTriggerFormInput();\n            nTriggerFormChange();\n        }\n        function doSelect(value) {\n            const { onSelect } = props;\n            const { nTriggerFormInput, nTriggerFormChange } = formItem;\n            if (onSelect)\n                call(onSelect, value);\n            nTriggerFormInput();\n            nTriggerFormChange();\n        }\n        function doBlur(e) {\n            const { onBlur } = props;\n            const { nTriggerFormBlur } = formItem;\n            if (onBlur)\n                call(onBlur, e);\n            nTriggerFormBlur();\n        }\n        function doFocus(e) {\n            const { onFocus } = props;\n            const { nTriggerFormFocus } = formItem;\n            if (onFocus)\n                call(onFocus, e);\n            nTriggerFormFocus();\n        }\n        function handleCompositionStart() {\n            isComposingRef.value = true;\n        }\n        function handleCompositionEnd() {\n            window.setTimeout(() => {\n                isComposingRef.value = false;\n            }, 0);\n        }\n        function handleKeyDown(e) {\n            var _a, _b, _c;\n            switch (e.code) {\n                case 'Enter':\n                case 'NumpadEnter':\n                    if (!isComposingRef.value) {\n                        const pendingOptionTmNode = (_a = menuInstRef.value) === null || _a === void 0 ? void 0 : _a.getPendingTmNode();\n                        if (pendingOptionTmNode) {\n                            select(pendingOptionTmNode.rawNode);\n                            e.preventDefault();\n                        }\n                    }\n                    break;\n                case 'ArrowDown':\n                    (_b = menuInstRef.value) === null || _b === void 0 ? void 0 : _b.next();\n                    break;\n                case 'ArrowUp':\n                    (_c = menuInstRef.value) === null || _c === void 0 ? void 0 : _c.prev();\n                    break;\n            }\n        }\n        function select(option) {\n            if (option) {\n                doSelect(option.value);\n                if (props.clearAfterSelect) {\n                    doUpdateValue(null);\n                }\n                else {\n                    doUpdateValue(option.label);\n                }\n                canBeActivatedRef.value = false;\n                if (props.blurAfterSelect) {\n                    blur();\n                }\n            }\n        }\n        function handleClear() {\n            doUpdateValue(null);\n        }\n        function handleFocus(e) {\n            canBeActivatedRef.value = true;\n            doFocus(e);\n        }\n        function handleBlur(e) {\n            canBeActivatedRef.value = false;\n            doBlur(e);\n        }\n        function handleInput(value) {\n            canBeActivatedRef.value = true;\n            doUpdateValue(value);\n        }\n        function handleToggle(option) {\n            select(option.rawNode);\n        }\n        function handleClickOutsideMenu(e) {\n            var _a;\n            if (!((_a = triggerElRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.target))) {\n                canBeActivatedRef.value = false;\n            }\n        }\n        function blur() {\n            var _a, _b;\n            if ((_a = triggerElRef.value) === null || _a === void 0 ? void 0 : _a.contains(document.activeElement)) {\n                ;\n                (_b = document.activeElement) === null || _b === void 0 ? void 0 : _b.blur();\n            }\n        }\n        const cssVarsRef = computed(() => {\n            const { common: { cubicBezierEaseInOut }, self: { menuBoxShadow } } = themeRef.value;\n            return {\n                '--n-menu-box-shadow': menuBoxShadow,\n                '--n-bezier': cubicBezierEaseInOut\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('auto-complete', undefined, cssVarsRef, props)\n            : undefined;\n        const inputInstRef = ref(null);\n        const exposedMethods = {\n            focus: () => {\n                var _a;\n                (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n            },\n            blur: () => {\n                var _a;\n                (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n            }\n        };\n        return {\n            focus: exposedMethods.focus,\n            blur: exposedMethods.blur,\n            inputInstRef,\n            uncontrolledValue: uncontrolledValueRef,\n            mergedValue: mergedValueRef,\n            isMounted: useIsMounted(),\n            adjustedTo: useAdjustedTo(props),\n            menuInstRef,\n            triggerElRef,\n            treeMate: treeMateRef,\n            mergedSize: mergedSizeRef,\n            mergedDisabled: mergedDisabledRef,\n            active: activeRef,\n            mergedStatus: mergedStatusRef,\n            handleClear,\n            handleFocus,\n            handleBlur,\n            handleInput,\n            handleToggle,\n            handleClickOutsideMenu,\n            handleCompositionStart,\n            handleCompositionEnd,\n            handleKeyDown,\n            mergedTheme: themeRef,\n            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender,\n            mergedBordered: mergedBorderedRef,\n            namespace: namespaceRef,\n            mergedClsPrefix: mergedClsPrefixRef\n        };\n    },\n    render() {\n        const { mergedClsPrefix } = this;\n        return (h(\"div\", { class: `${mergedClsPrefix}-auto-complete`, ref: \"triggerElRef\", onKeydown: this.handleKeyDown, onCompositionstart: this.handleCompositionStart, onCompositionend: this.handleCompositionEnd },\n            h(VBinder, null, {\n                default: () => [\n                    h(VTarget, null, {\n                        default: () => {\n                            const defaultSlot = this.$slots.default;\n                            if (defaultSlot) {\n                                return getFirstSlotVNode(this.$slots, 'default', {\n                                    handleInput: this.handleInput,\n                                    handleFocus: this.handleFocus,\n                                    handleBlur: this.handleBlur,\n                                    value: this.mergedValue\n                                });\n                            }\n                            const { mergedTheme } = this;\n                            return (h(NInput, { ref: \"inputInstRef\", status: this.mergedStatus, theme: mergedTheme.peers.Input, themeOverrides: mergedTheme.peerOverrides.Input, bordered: this.mergedBordered, value: this.mergedValue, placeholder: this.placeholder, size: this.mergedSize, disabled: this.mergedDisabled, clearable: this.clearable, loading: this.loading, inputProps: this.inputProps, onClear: this.handleClear, onFocus: this.handleFocus, onUpdateValue: this.handleInput, onBlur: this.handleBlur }, {\n                                suffix: () => { var _a, _b; return (_b = (_a = this.$slots).suffix) === null || _b === void 0 ? void 0 : _b.call(_a); },\n                                prefix: () => { var _a, _b; return (_b = (_a = this.$slots).prefix) === null || _b === void 0 ? void 0 : _b.call(_a); }\n                            }));\n                        }\n                    }),\n                    h(VFollower, { show: this.active, to: this.adjustedTo, containerClass: this.namespace, zIndex: this.zIndex, teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey, placement: this.placement, width: \"target\" }, {\n                        default: () => (h(Transition, { name: \"fade-in-scale-up-transition\", appear: this.isMounted }, {\n                            default: () => {\n                                var _a;\n                                (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n                                return this.active\n                                    ? withDirectives(h(NInternalSelectMenu, { clsPrefix: mergedClsPrefix, ref: \"menuInstRef\", theme: this.mergedTheme.peers.InternalSelectMenu, themeOverrides: this.mergedTheme.peerOverrides\n                                            .InternalSelectMenu, \"auto-pending\": true, class: [\n                                            `${mergedClsPrefix}-auto-complete-menu`,\n                                            this.themeClass\n                                        ], style: this.cssVars, treeMate: this.treeMate, multiple: false, renderLabel: this.renderLabel, renderOption: this.renderOption, size: \"medium\", onToggle: this.handleToggle }), [\n                                        [\n                                            clickoutside,\n                                            this.handleClickOutsideMenu,\n                                            undefined,\n                                            { capture: true }\n                                        ]\n                                    ])\n                                    : null;\n                            }\n                        }))\n                    })\n                ]\n            })));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}