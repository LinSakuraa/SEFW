{"ast":null,"code":"import { defineComponent, ref } from \"vue\";\nimport { useMessage } from 'naive-ui';\nexport default defineComponent({\n  methods: {\n    usernameOnBluer() {\n      if (this.username == '') {\n        this.wrong1 = true;\n        this.loginWrongText1 = '账号不能为空';\n      } else {\n        this.wrong1 = false;\n        this.loginWrongText1 = '';\n      }\n    },\n\n    passwordOnBluer() {\n      var reg = /^(?=.*[0-9])(?=.*[a-zA-Z]).{6,16}$/;\n\n      if (this.password == '') {\n        this.wrong2 = true;\n        this.loginWrongText2 = '密码不能为空';\n      } else if (!reg.test(this.password)) {\n        this.wrong2 = true;\n        this.loginWrongText2 = '密码必须包含字母、数字、且位于6-16位之间';\n      } else {\n        this.wrong2 = false;\n        this.loginWrongText2 = '';\n      }\n    },\n\n    //以下为涉及axios调用的方法\n\n    /****************************************************************/\n    //ajax请求 方法\n    postUser(userid, password) {\n      //axios发送AJAX请求\n      alert('CustomerLogin');\n      this.axios.get('customer/login', {\n        \"cusID\": userid,\n        \"cusPassword\": password\n      }).then(response => {\n        console.log(response);\n\n        if (response.data == 1) {\n          this.message.success('登陆成功！');\n        } else {\n          this.message.error('登录失败!');\n        }\n      }).catch(response => {\n        console.log(response);\n      });\n      this.$store.state.user.isAdmin = false;\n    },\n\n    postAdmin(username, password) {\n      //axios发送AJAX请求\n      alert('AdminLogin');\n      this.axios.post('admin/login', {\n        \"adminID\": username,\n        \"adminPassword\": password\n      }).then(response => {\n        console.log(response);\n      }).catch(response => {\n        console.log(response);\n      });\n      this.$store.state.user.isAdmin = true;\n    }\n\n  },\n\n  data() {\n    return {\n      adminActive: false,\n      username: '',\n      password: '',\n      wrong1: false,\n      wrong2: false,\n      loginWrongText1: '',\n      loginWrongText2: '',\n      message: useMessage()\n    };\n  },\n\n  setup() {\n    function funLogin() {\n      if (this.wrong1 === false && this.wrong2 === false) {\n        this.$store.state.username = this.username;\n        this.$store.state.password = this.password; //axios发送AJAX请求\n        //发送 this.username this.password\n\n        if (this.adminActive == false) this.postUser(this.username, this.password); //调用postUser方法发送请求\n        else {\n          this.postAdmin(this.username, this.password);\n        } // if(this.$store.state.isLogin==true)\n        // {console.log( this.$store.state.isLogin); \n        //   if(this.$store.state.user.isAdmin==true)\n        //   this.$router.replace(\"/Admin\");\n        //   else {\n        //     this.$router.replace(\"/Customer\")\n        //     }\n        // }\n        // else{\n        //   this.message.error('登录失败')\n        // }\n        // //登录失败\n      }\n    }\n\n    return {\n      funLogin,\n      bodyStyle: {\n        width: \"600px\"\n      },\n      segmented: {\n        content: \"soft\",\n        footer: \"soft\"\n      },\n      showModal: ref(false)\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["defineComponent","ref","useMessage","methods","usernameOnBluer","username","wrong1","loginWrongText1","passwordOnBluer","reg","password","wrong2","loginWrongText2","test","postUser","userid","alert","axios","get","then","response","console","log","data","message","success","error","catch","$store","state","user","isAdmin","postAdmin","post","adminActive","setup","funLogin","bodyStyle","width","segmented","content","footer","showModal"],"sourceRoot":"","sources":["G:\\VUE_FDS\\fluent-vue\\src\\components\\DialogContent\\ContentLogin.vue"],"sourcesContent":["<template>\r\n<div class=\"login-div\">\r\n<div class=\"button-login\" @click=\"showModal=true\">登录</div></div>\r\n  <n-modal\r\n    v-model:show=\"showModal\"\r\n    class=\"custom-card\"\r\n    preset=\"card\"\r\n    :style=\"bodyStyle\"\r\n    title=\"用户登录\"\r\n    :mask-closable=\"false\"\r\n    size=\"huge\"\r\n    :bordered=\"false\"\r\n    :segmented=\"segmented\"\r\n  >\r\n    <template #header-extra>\r\n    </template>\r\n    <div>\r\n      <div class=\"l-modal-div\">\r\n        <div class=\"login-input-headtext\">账号：</div>\r\n        <input class=\"login-input\" type=\"text\" v-model=\"username\"  placeholder=\"在此处输入账号\" @blur=\"usernameOnBluer\" />\r\n        <div v-show=\"this.wrong1==true\" class=\"wrong-text\">{{loginWrongText1}}</div>\r\n      </div>\r\n      <div class=\"l-modal-div\">\r\n        <div class=\"login-input-headtext\">密码：</div>\r\n        <input class=\"login-input\" type=\"password\" v-model=\"password\"  placeholder=\"在此处输入密码\" @blur=\"passwordOnBluer\" />\r\n        <div v-show=\"this.wrong2==true\" class=\"wrong-text\">{{loginWrongText2}}</div>\r\n      </div>\r\n    </div>\r\n    <div style=\"display:flex;\r\njustify-content:center;\r\nalign-items:center;\">\r\n      <div style=\"margin-left:-20px\"><n-switch v-model:value=\"adminActive\" />管理员登录</div>\r\n    </div>\r\n      <div class=\"login-footer-div\">\r\n      <button class=\"login-button\" @click=\"showModal=false\">取消</button>\r\n      <button class=\"login-button\" @click=\"funLogin()\">确认</button>\r\n      </div>\r\n\r\n  </n-modal>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from \"vue\";\r\nimport { useMessage } from 'naive-ui'\r\nexport default defineComponent({\r\n  methods:{\r\n    usernameOnBluer(){\r\n      if(this.username==''){this.wrong1=true;this.loginWrongText1='账号不能为空'}\r\n      else {this.wrong1=false;this.loginWrongText1='';}\r\n\r\n    },\r\n    passwordOnBluer(){\r\n      var reg= /^(?=.*[0-9])(?=.*[a-zA-Z]).{6,16}$/;\r\n      if(this.password==''){this.wrong2=true;this.loginWrongText2='密码不能为空'}\r\n      else if(!reg.test(this.password)){this.wrong2=true;this.loginWrongText2='密码必须包含字母、数字、且位于6-16位之间'}\r\n      else{this.wrong2=false;this.loginWrongText2='';}\r\n    },\r\n\r\n     //以下为涉及axios调用的方法\r\n    /****************************************************************/\r\n    //ajax请求 方法\r\n    postUser(userid,password){//axios发送AJAX请求\r\n     alert('CustomerLogin')\r\n      this.axios.get('customer/login',\r\n      {\"cusID\":userid,\r\n      \"cusPassword\":password\r\n      }).then((response)=>{\r\n        console.log(response)\r\n        if(response.data==1){this.message.success('登陆成功！');}\r\n        else{this.message.error('登录失败!');}\r\n        \r\n      }).catch((response)=>{\r\n        console.log(response)\r\n      })\r\n      this.$store.state.user.isAdmin=false;\r\n    },\r\n\r\n\r\n    postAdmin(username,password){//axios发送AJAX请求\r\n    alert('AdminLogin')\r\n      this.axios.post('admin/login',\r\n      {\"adminID\":username,\"adminPassword\":password\r\n      }).then((response)=>{\r\n        console.log( response)\r\n\r\n      }).catch((response)=>{\r\n        console.log( response)\r\n      })\r\n      this.$store.state.user.isAdmin=true;\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n     adminActive:false,\r\n    username:'',\r\n    password:'',\r\n    wrong1:false,\r\n    wrong2:false,\r\n    loginWrongText1:'',\r\n    loginWrongText2:'',\r\n    message:useMessage()\r\n    }\r\n  },\r\n  setup() {\r\n      function funLogin(){\r\n        if(this.wrong1===false&&this.wrong2===false){\r\n        this.$store.state.username=this.username;\r\n        this.$store.state.password=this.password;\r\n        //axios发送AJAX请求\r\n         //发送 this.username this.password\r\n        \r\n        if(this.adminActive==false)\r\n        this.postUser(this.username,this.password)//调用postUser方法发送请求\r\n        else{this.postAdmin(this.username,this.password)}\r\n\r\n\r\n        // if(this.$store.state.isLogin==true)\r\n        // {console.log( this.$store.state.isLogin); \r\n\r\n\r\n        //   if(this.$store.state.user.isAdmin==true)\r\n        //   this.$router.replace(\"/Admin\");\r\n        //   else {\r\n        //     this.$router.replace(\"/Customer\")\r\n        //     }\r\n        // }\r\n        // else{\r\n        //   this.message.error('登录失败')\r\n        // }\r\n        // //登录失败\r\n      }\r\n    }\r\n\r\n      \r\n    return {\r\n      funLogin,\r\n      bodyStyle: {\r\n        width: \"600px\"\r\n      },\r\n      segmented: {\r\n        content: \"soft\",\r\n        footer: \"soft\"\r\n      },\r\n      showModal: ref(false)\r\n    };\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<style>\r\n.button-login{\r\ntext-align:center;\r\nheight:30px;\r\nwidth:100%;\r\nlist-style: none;\r\ncursor:pointer;\r\n line-height:30px;\r\n}\r\n\r\n.login-div div:hover{\r\nbackground-color:#dcdfe6\r\n}\r\n\r\n.l-modal-div{\r\nheight:80px;\r\nwidth:100%;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n.login-input{\r\nheight:40px;\r\ndisplay:inline-block;\r\nwidth:190px;\r\nmargin-left:20px;\r\n}\r\n\r\n.wrong-text{\r\n  color:red;\r\n  width:150px;\r\n  height:40px;\r\n  margin-left:10px;\r\n  font-size:14px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n\r\n.login-input-headtext{\r\nwidth:100px;\r\nheight:40px;\r\nmargin-left:40px;\r\nfont-size:18px;\r\n}\r\n\r\n.login-button{\r\nwidth:60px;\r\nheight:30px;\r\nmargin-left:40px;\r\nmargin-right:40px;\r\n}\r\n\r\n.login-footer-div{\r\n  height:60px;\r\n  margin-top:20px;\r\n  display:flex;\r\n  justify-content:center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}