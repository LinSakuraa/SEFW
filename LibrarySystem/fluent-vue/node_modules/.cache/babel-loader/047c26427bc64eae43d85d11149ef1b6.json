{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, vShow as _vShow, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-div\"\n};\nconst _hoisted_2 = {\n  class: \"l-modal-div\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login-input-headtext\"\n}, \"账号：\", -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"l-modal-div\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login-input-headtext\"\n}, \"密码：\", -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_7 = {\n  style: {\n    \"margin-left\": \"-20px\"\n  }\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"管理员登录\");\n\nconst _hoisted_9 = {\n  class: \"login-footer-div\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_n_switch = _resolveComponent(\"n-switch\");\n\n  const _component_n_modal = _resolveComponent(\"n-modal\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"button-login\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.showModal = true)\n  }, \"登录\")]), _createVNode(_component_n_modal, {\n    show: _ctx.showModal,\n    \"onUpdate:show\": _cache[8] || (_cache[8] = $event => _ctx.showModal = $event),\n    class: \"custom-card\",\n    preset: \"card\",\n    style: _normalizeStyle(_ctx.bodyStyle),\n    title: \"用户登录\",\n    \"mask-closable\": false,\n    size: \"huge\",\n    bordered: false,\n    segmented: _ctx.segmented\n  }, {\n    \"header-extra\": _withCtx(() => []),\n    default: _withCtx(() => [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n      class: \"login-input\",\n      type: \"text\",\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.username = $event),\n      placeholder: \"在此处输入账号\",\n      onBlur: _cache[2] || (_cache[2] = (...args) => _ctx.usernameOnBluer && _ctx.usernameOnBluer(...args))\n    }, null, 544\n    /* HYDRATE_EVENTS, NEED_PATCH */\n    ), [[_vModelText, _ctx.username]]), _withDirectives(_createElementVNode(\"div\", {\n      class: \"wrong-text\"\n    }, _toDisplayString(_ctx.loginWrongText1), 513\n    /* TEXT, NEED_PATCH */\n    ), [[_vShow, this.wrong1 == true]])]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n      class: \"login-input\",\n      type: \"password\",\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.password = $event),\n      placeholder: \"在此处输入密码\",\n      onBlur: _cache[4] || (_cache[4] = (...args) => _ctx.passwordOnBluer && _ctx.passwordOnBluer(...args))\n    }, null, 544\n    /* HYDRATE_EVENTS, NEED_PATCH */\n    ), [[_vModelText, _ctx.password]]), _withDirectives(_createElementVNode(\"div\", {\n      class: \"wrong-text\"\n    }, _toDisplayString(_ctx.loginWrongText2), 513\n    /* TEXT, NEED_PATCH */\n    ), [[_vShow, this.wrong2 == true]])])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_n_switch, {\n      value: _ctx.adminActive,\n      \"onUpdate:value\": _cache[5] || (_cache[5] = $event => _ctx.adminActive = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"value\"]), _hoisted_8])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n      class: \"login-button\",\n      onClick: _cache[6] || (_cache[6] = $event => _ctx.showModal = false)\n    }, \"取消\"), _createElementVNode(\"button\", {\n      class: \"login-button\",\n      onClick: _cache[7] || (_cache[7] = $event => _ctx.funLogin())\n    }, \"确认\")])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"show\", \"style\", \"segmented\"])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;AACKA,OAAK,EAAC;;;AAgBAA,OAAK,EAAC;;;gCACTC,oBAA2C,KAA3C,EAA2C;AAAtCD,OAAK,EAAC;AAAgC,CAA3C,EAAkC,KAAlC,EAAqC;AAAA;AAArC;;;AAIGA,OAAK,EAAC;;;gCACTC,oBAA2C,KAA3C,EAA2C;AAAtCD,OAAK,EAAC;AAAgC,CAA3C,EAAkC,KAAlC,EAAqC;AAAA;AAArC;;;AAKCE,OAEW,EAFX;AAAA;AAAA;AAAA;AAAA;;;AAGEA,OAAyB,EAAzB;AAAA;AAAA;;;iDAAkE;;;AAElEF,OAAK,EAAC;;;;;;;6DAhCjBC,oBACgE,KADhE,cACgE,CAAhEA,oBAA0D,KAA1D,EAA0D;AAArDD,SAAK,EAAC,cAA+C;AAA/BG,WAAK,sCAAEC,iBAAS,IAAX;AAA0B,GAA1D,EAAkD,IAAlD,CAAgE,CADhE,GAEEC,aAmCUC,kBAnCV,EAmCU;AAlCAC,QAAI,EAAEH,cAkCN;yDAlCMA,iBAASI,OAkCf;AAjCRR,SAAK,EAAC,aAiCE;AAhCRS,UAAM,EAAC,MAgCC;AA/BPP,SAAK,kBAAEE,cAAF,CA+BE;AA9BRM,SAAK,EAAC,MA8BE;AA7BP,qBAAe,KA6BR;AA5BRC,QAAI,EAAC,MA4BG;AA3BPC,YAAQ,EAAE,KA2BH;AA1BPC,aAAS,EAAET;AA0BJ,GAnCV;AAWa,oBAAYU,SAAvB,MACW,EADY;sBAEvB,MAWM,CAXNb,oBAWM,KAXN,EAWM,IAXN,EAWM,CAVJA,oBAIM,KAJN,cAIM,CAHJc,UAGI,kBAFJd,oBAA2G,OAA3G,EAA2G;AAApGD,WAAK,EAAC,aAA8F;AAAhFgB,UAAI,EAAC,MAA2E;iEAA3DZ,gBAAQI,OAAmD;AAAhDS,iBAAW,EAAC,SAAoC;AAAzBC,YAAI,yCAAEd,qDAAF;AAAqB,KAA3G;;AAAA,sBAAgDA,gBAE5C,kBADJH,oBAA4E,KAA5E,EAA4E;AAA5CD,WAAK,EAAC;AAAsC,KAA5E,EAAkDmB,iBAAGf,oBAAH,CAAlD,EAAoE;AAAA;AAApE,OAAoE,eAAlDgB,UAAM,KAA4C,EAChE,CAJN,CAUI,EALJnB,oBAIM,KAJN,cAIM,CAHJoB,UAGI,kBAFJpB,oBAA+G,OAA/G,EAA+G;AAAxGD,WAAK,EAAC,aAAkG;AAApFgB,UAAI,EAAC,UAA+E;iEAA3DZ,gBAAQI,OAAmD;AAAhDS,iBAAW,EAAC,SAAoC;AAAzBC,YAAI,yCAAEd,qDAAF;AAAqB,KAA/G;;AAAA,sBAAoDA,gBAEhD,kBADJH,oBAA4E,KAA5E,EAA4E;AAA5CD,WAAK,EAAC;AAAsC,KAA5E,EAAkDmB,iBAAGf,oBAAH,CAAlD,EAAoE;AAAA;AAApE,OAAoE,eAAlDkB,UAAM,KAA4C,EAChE,CAJN,CAKI,CAXN,CAWM,EACNrB,oBAIM,KAJN,cAIM,CADJA,oBAAkF,KAAlF,cAAkF,CAAnDI,aAAwCkB,mBAAxC,EAAwC;AAAtBC,WAAK,EAAEpB,gBAAe;4DAAfA,mBAAWI;AAAI,KAAxC;;AAAA,gBAAmD,aAAlF,CACI,CAJN,CADM,EAMJP,oBAGM,KAHN,cAGM,CAFNA,oBAAiE,QAAjE,EAAiE;AAAzDD,WAAK,EAAC,cAAmD;AAAnCG,aAAK,sCAAEC,iBAAS,KAAX;AAA8B,KAAjE,EAAsD,IAAtD,CAEM,EADNH,oBAA4D,QAA5D,EAA4D;AAApDD,WAAK,EAAC,cAA8C;AAA9BG,aAAK,sCAAEC,eAAF;AAAyB,KAA5D,EAAiD,IAAjD,CACM,CAHN,CANI;;;;GAxBR;;AAAA","names":["class","_createElementVNode","style","onClick","_ctx","_createVNode","_component_n_modal","show","$event","preset","title","size","bordered","segmented","_withCtx","_hoisted_3","type","placeholder","onBlur","_toDisplayString","wrong1","_hoisted_5","wrong2","_component_n_switch","value"],"sourceRoot":"","sources":["G:\\VUE_FDS\\fluent-vue\\src\\components\\DialogContent\\ContentLogin.vue"],"sourcesContent":["<template>\r\n<div class=\"login-div\">\r\n<div class=\"button-login\" @click=\"showModal=true\">登录</div></div>\r\n  <n-modal\r\n    v-model:show=\"showModal\"\r\n    class=\"custom-card\"\r\n    preset=\"card\"\r\n    :style=\"bodyStyle\"\r\n    title=\"用户登录\"\r\n    :mask-closable=\"false\"\r\n    size=\"huge\"\r\n    :bordered=\"false\"\r\n    :segmented=\"segmented\"\r\n  >\r\n    <template #header-extra>\r\n    </template>\r\n    <div>\r\n      <div class=\"l-modal-div\">\r\n        <div class=\"login-input-headtext\">账号：</div>\r\n        <input class=\"login-input\" type=\"text\" v-model=\"username\"  placeholder=\"在此处输入账号\" @blur=\"usernameOnBluer\" />\r\n        <div v-show=\"this.wrong1==true\" class=\"wrong-text\">{{loginWrongText1}}</div>\r\n      </div>\r\n      <div class=\"l-modal-div\">\r\n        <div class=\"login-input-headtext\">密码：</div>\r\n        <input class=\"login-input\" type=\"password\" v-model=\"password\"  placeholder=\"在此处输入密码\" @blur=\"passwordOnBluer\" />\r\n        <div v-show=\"this.wrong2==true\" class=\"wrong-text\">{{loginWrongText2}}</div>\r\n      </div>\r\n    </div>\r\n    <div style=\"display:flex;\r\njustify-content:center;\r\nalign-items:center;\">\r\n      <div style=\"margin-left:-20px\"><n-switch v-model:value=\"adminActive\" />管理员登录</div>\r\n    </div>\r\n      <div class=\"login-footer-div\">\r\n      <button class=\"login-button\" @click=\"showModal=false\">取消</button>\r\n      <button class=\"login-button\" @click=\"funLogin()\">确认</button>\r\n      </div>\r\n\r\n  </n-modal>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from \"vue\";\r\nimport { useMessage } from 'naive-ui'\r\nexport default defineComponent({\r\n  methods:{\r\n    usernameOnBluer(){\r\n      console.log('usernameOnBluer');\r\n      if(this.username==''){this.wrong1=true;this.loginWrongText1='账号不能为空'}\r\n      else {this.wrong1=false;this.loginWrongText1='';}\r\n\r\n    },\r\n    passwordOnBluer(){\r\n      console.log('passwordOnBluer');\r\n      var reg= /^(?=.*[0-9])(?=.*[a-zA-Z]).{6,16}$/;\r\n      if(this.password==''){this.wrong2=true;this.loginWrongText2='密码不能为空'}\r\n      else if(!reg.test(this.password)){this.wrong2=true;this.loginWrongText2='密码必须包含字母、数字、且位于6-16位之间'}\r\n      else{this.wrong2=false;this.loginWrongText2='';}\r\n    },\r\n\r\n     //以下为涉及axios调用的方法\r\n    /****************************************************************/\r\n    //ajax请求 方法\r\n    postUser(username,password){//axios发送AJAX请求\r\n     alert('CustomerLogin')\r\n      this.axios.post('/api/login',\r\n      {\"username\":username,\"password\":password\r\n      }).then((response)=>{\r\n        console.log( response)\r\n\r\n      }).catch((response)=>{\r\n        console.log( response)\r\n      })\r\n      this.$store.state.user.isAdmin=false;\r\n    },\r\n\r\n    postAdmin(username,password){//axios发送AJAX请求\r\n    alert('AdminLogin')\r\n      this.axios.post('/api/login',\r\n      {\"username\":username,\"password\":password\r\n      }).then((response)=>{\r\n        console.log( response)\r\n\r\n      }).catch((response)=>{\r\n        console.log( response)\r\n      })\r\n      this.$store.state.user.isAdmin=true;\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n     adminActive:false,\r\n    username:'',\r\n    password:'',\r\n    wrong1:false,\r\n    wrong2:false,\r\n    loginWrongText1:'',\r\n    loginWrongText2:'',\r\n    message:useMessage()\r\n    }\r\n  },\r\n  setup() {\r\n      function funLogin(){\r\n        if(this.wrong1===false&&this.wrong2===false){\r\n        this.$store.state.username=this.username;\r\n        this.$store.state.password=this.password;\r\n        //axios发送AJAX请求\r\n         //发送 this.username this.password\r\n        \r\n        if(this.adminActive==false)\r\n        this.postUser(this.username,this.password)//调用postUser方法发送请求\r\n        else{this.postAdmin(this.username,this.password)}\r\n\r\n\r\n        this.$store.state.user.username =this.$store.state.username;\r\n        this.$store.state.user.password =this.$store.state.password;\r\n        this.$store.state.username=null;\r\n        this.$store.state.password=null;\r\n\r\n        //请求接收完毕 登录成功\r\n        this.$store.state.isLogin=true;\r\n        if(this.$store.state.isLogin==true)\r\n        {console.log( this.$store.state.isLogin); \r\n\r\n\r\n          if(this.$store.state.user.isAdmin==true)\r\n          this.$router.replace(\"/Admin\");\r\n          else {\r\n            this.$router.replace(\"/Customer\")\r\n            }\r\n        }\r\n        else{\r\n          this.message.error('登录失败')\r\n        }\r\n        //登录失败\r\n      }\r\n    }\r\n\r\n      \r\n    return {\r\n      funLogin,\r\n      bodyStyle: {\r\n        width: \"600px\"\r\n      },\r\n      segmented: {\r\n        content: \"soft\",\r\n        footer: \"soft\"\r\n      },\r\n      showModal: ref(false)\r\n    };\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<style>\r\n.button-login{\r\ntext-align:center;\r\nheight:30px;\r\nwidth:100%;\r\nlist-style: none;\r\ncursor:pointer;\r\n line-height:30px;\r\n}\r\n\r\n.login-div div:hover{\r\nbackground-color:#dcdfe6\r\n}\r\n\r\n.l-modal-div{\r\nheight:80px;\r\nwidth:100%;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n.login-input{\r\nheight:40px;\r\ndisplay:inline-block;\r\nwidth:190px;\r\nmargin-left:20px;\r\n}\r\n\r\n.wrong-text{\r\n  color:red;\r\n  width:150px;\r\n  height:40px;\r\n  margin-left:10px;\r\n  font-size:14px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n\r\n.login-input-headtext{\r\nwidth:100px;\r\nheight:40px;\r\nmargin-left:40px;\r\nfont-size:18px;\r\n}\r\n\r\n.login-button{\r\nwidth:60px;\r\nheight:30px;\r\nmargin-left:40px;\r\nmargin-right:40px;\r\n}\r\n\r\n.login-footer-div{\r\n  height:60px;\r\n  margin-top:20px;\r\n  display:flex;\r\n  justify-content:center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}