{"ast":null,"code":"import { defineComponent } from \"vue\";\nimport { useMessage } from 'naive-ui';\nexport default defineComponent({\n  props: ['showModal', 'user'],\n  methods: {\n    //方法提交用户信息\n    submitUserChange(thisuser) {\n      if (this.$store.state.isLogin == false || this.$store.state.user.isAdmin == false) {\n        this.message.error('没有权限');\n      } else {\n        this.axios.post('customer/update', //axios发送AJAX请求\n        {\n          \"cusID\": thisuser.userid,\n          \"cusName\": thisuser.username,\n          \"cusPassword\": thisuser.password\n        }).then(response => {\n          console.log(response);\n\n          if (response.data == 1) {\n            this.message.success('修改成功!');\n          } else {\n            this.message.error('修改失败!');\n          }\n        }).catch(response => {\n          console.log(response);\n          this.message.error('服务器未响应!');\n        });\n      }\n    }\n\n  },\n  watch: {\n    showModal(newName, oldName) {\n      this.showM1 = true;\n    },\n\n    user(newName, oldName) {\n      this.thisuser = newName;\n      console.log(this.thisuser);\n    }\n\n  },\n\n  data() {\n    return {\n      showM1: false,\n      thisuser: {},\n      message: useMessage()\n    };\n  },\n\n  setup() {\n    return {\n      bodyStyle: {\n        width: \"440px\"\n      },\n      segmented: {\n        content: \"soft\",\n        footer: \"soft\"\n      }\n    };\n  }\n\n});","map":{"version":3,"mappings":"AA0CA,SAASA,eAAT,QAA+B,KAA/B;AACA,SAASC,UAAT,QAA2B,UAA3B;AACA,eAAeD,eAAe,CAAC;AAC7BE,OAAK,EAAC,CAAC,WAAD,EAAa,MAAb,CADuB;AAE7BC,SAAO,EAAC;AAEJ;AACCC,oBAAgB,CAACC,QAAD,EAAU;AAC7B,UAAG,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,OAAlB,IAA2B,KAA3B,IAAkC,KAAKF,MAAL,CAAYC,KAAZ,CAAkBE,IAAlB,CAAuBC,OAAvB,IAAgC,KAArE,EAA2E;AACzE,aAAKC,OAAL,CAAaC,KAAb,CAAmB,MAAnB;AACD,OAFD,MAEK;AACL,aAAKC,KAAL,CAAWC,IAAX,CAAgB,iBAAhB,EAAkC;AAClC;AAAC,mBAAQT,QAAQ,CAACU,MAAlB;AACA,qBAAUV,QAAQ,CAACW,QADnB;AAEA,yBAAcX,QAAQ,CAACY;AAFvB,SADA,EAKEC,IALF,CAKQC,QAAD,IAAY;AACfC,iBAAO,CAACC,GAAR,CAAaF,QAAb;;AACA,cAAGA,QAAQ,CAACG,IAAT,IAAe,CAAlB,EAAoB;AAClB,iBAAKX,OAAL,CAAaY,OAAb,CAAqB,OAArB;AACF,WAFA,MAGI;AAAE,iBAAKZ,OAAL,CAAaC,KAAb,CAAmB,OAAnB;AAA4B;AAEnC,SAZH,EAYKY,KAZL,CAYYL,QAAD,IAAY;AACnBC,iBAAO,CAACC,GAAR,CAAaF,QAAb;AACA,eAAKR,OAAL,CAAaC,KAAb,CAAmB,SAAnB;AACD,SAfH;AAiBA;AACD;;AAzBO,GAFqB;AA8B7Ba,OAAK,EAAC;AACFC,aAAS,CAACC,OAAD,EAASC,OAAT,EAAiB;AACtB,WAAKC,MAAL,GAAY,IAAZ;AACP,KAHK;;AAIJpB,QAAI,CAACkB,OAAD,EAASC,OAAT,EAAiB;AACjB,WAAKvB,QAAL,GAAcsB,OAAd;AACAP,aAAO,CAACC,GAAR,CAAY,KAAKhB,QAAjB;AACJ;;AAPI,GA9BuB;;AAwC7BiB,MAAI,GAAE;AACJ,WAAM;AACFO,YAAM,EAAC,KADL;AAEFxB,cAAQ,EAAC,EAFP;AAGFM,aAAO,EAACV,UAAU;AAHhB,KAAN;AAKD,GA9C4B;;AA+C7B6B,OAAK,GAAG;AAEN,WAAO;AACLC,eAAS,EAAE;AACTC,aAAK,EAAE;AADE,OADN;AAILC,eAAS,EAAE;AACTC,eAAO,EAAE,MADA;AAETC,cAAM,EAAE;AAFC;AAJN,KAAP;AASF;;AA1D6B,CAAD,CAA9B","names":["defineComponent","useMessage","props","methods","submitUserChange","thisuser","$store","state","isLogin","user","isAdmin","message","error","axios","post","userid","username","password","then","response","console","log","data","success","catch","watch","showModal","newName","oldName","showM1","setup","bodyStyle","width","segmented","content","footer"],"sourceRoot":"","sources":["G:\\VUE_FDS\\fluent-vue\\src\\components\\User\\AdminChangeUser.vue"],"sourcesContent":["<template>\r\n  <n-modal\r\n    v-model:show=\"showM1\"\r\n    class=\"custom-card\"\r\n    preset=\"card\"\r\n    :style=\"bodyStyle\"\r\n    title=\"修改用户\"\r\n    :mask-closable=\"false\"\r\n    size=\"huge\"\r\n    :bordered=\"false\"\r\n    :segmented=\"segmented\"\r\n  >\r\n    <div class=\"change-user-div\">\r\n        <div class=\"change-user-container\">\r\n            <div class=\"change-user-show\">\r\n                <div class=\"change-user-showleft\">账号</div>\r\n                <div class=\"change-user-showright\">\r\n                  {{thisuser.userid}}\r\n                  </div>\r\n             </div>\r\n            <div class=\"change-user-show\">\r\n                <div class=\"change-user-showleft\">用户名</div>\r\n                <div class=\"change-user-showright\">\r\n                  <input type=\"text\" v-model=\"thisuser.username\"/></div>\r\n            </div>\r\n            \r\n            <div class=\"change-user-show\">\r\n                <div class=\"change-user-showleft\">密码</div>\r\n                <div class=\"change-user-showleft\">\r\n                   <input type=\"text\" v-model=\"thisuser.password\"/>\r\n                  </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"change-user-footer-div\">\r\n      <button class=\"change-user-button\" @click=\"showM1=false\">退出</button>\r\n      <button class=\"change-user-button\" @click=\"submitUserChange(thisuser)\">确认</button>\r\n      </div>\r\n  </n-modal>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent} from \"vue\";\r\nimport { useMessage } from 'naive-ui'\r\nexport default defineComponent({\r\n  props:['showModal','user'],\r\n  methods:{\r\n\r\n      //方法提交用户信息\r\n       submitUserChange(thisuser){\r\n    if(this.$store.state.isLogin==false||this.$store.state.user.isAdmin==false){\r\n      this.message.error('没有权限')\r\n    }else{\r\n    this.axios.post('customer/update',//axios发送AJAX请求\r\n    {\"cusID\":thisuser.userid,\r\n    \"cusName\":thisuser.username,\r\n    \"cusPassword\":thisuser.password,\r\n    }\r\n    ).then((response)=>{\r\n        console.log( response)\r\n        if(response.data==1){\r\n          this.message.success('修改成功!');\r\n        }\r\n        else{ this.message.error('修改失败!');}\r\n\r\n      }).catch((response)=>{\r\n        console.log( response)\r\n        this.message.error('服务器未响应!');\r\n      })\r\n\r\n    }\r\n  },\r\n  \r\n  },\r\n  watch:{\r\n      showModal(newName,oldName){\r\n          this.showM1=true;\r\n  },\r\n    user(newName,oldName){\r\n        this.thisuser=newName;\r\n        console.log(this.thisuser);\r\n    }\r\n  \r\n  },\r\n  data(){\r\n    return{\r\n        showM1:false,\r\n        thisuser:{},\r\n        message:useMessage(),\r\n    }\r\n  },\r\n  setup() {\r\n      \r\n    return {\r\n      bodyStyle: {\r\n        width: \"440px\"\r\n      },\r\n      segmented: {\r\n        content: \"soft\",\r\n        footer: \"soft\"\r\n      },\r\n    };\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<style>\r\n.change-user-div{\r\n    display:flex; \r\n    width:100%;\r\n    height:120px;\r\n    justify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n.change-user-container{\r\n      width:350px;\r\n    height:120px;\r\n    flex-direction:column;\r\n    display:flex;\r\n}\r\n\r\n.change-user-show{\r\nwidth:350px;\r\nheight:40px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n.change-user-showleft{\r\nwidth:100px;\r\nheight:40px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n.change-user-showright{\r\nwidth:250px;\r\nheight:40px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n.change-user-footer-div{\r\n  height:60px;\r\n  margin-top:20px;\r\n  display:flex;\r\n  justify-content:center;\r\n}\r\n\r\n.change-user-button{\r\nwidth:60px;\r\nheight:30px;\r\nmargin-left:40px;\r\nmargin-right:40px;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}