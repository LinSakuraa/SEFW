{"ast":null,"code":"import { h, computed, defineComponent, ref, Fragment, toRaw, watch, inject } from 'vue';\nimport { cloneDeep, merge } from 'lodash-es';\nimport { lightTheme } from '../../themes/light';\nimport { NConfigProvider } from '../../config-provider';\nimport { configProviderInjectionKey } from '../../config-provider/src/context';\nimport { NPopover } from '../../popover';\nimport { NScrollbar } from '../../_internal';\nimport { NCollapse, NCollapseItem } from '../../collapse';\nimport { NInput } from '../../input';\nimport { NSpace } from '../../space';\nimport { useLocale } from '../../_mixins';\nimport { NElement } from '../../element';\nimport { NDivider } from '../../divider';\nimport { NButton } from '../../button';\nimport { NColorPicker } from '../../color-picker';\nimport { NEmpty } from '../../empty';\nconst ColorWandIcon = h(\"svg\", {\n  viewBox: \"0 0 16 16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  style: {\n    width: '1em',\n    height: '1em',\n    color: 'currentColor'\n  }\n}, h(\"path\", {\n  d: \"M13.5 1C13.7761 1 14 1.22386 14 1.5V2H14.5C14.7761 2 15 2.22386 15 2.5C15 2.77614 14.7761 3 14.5 3H14V3.5C14 3.77614 13.7761 4 13.5 4C13.2239 4 13 3.77614 13 3.5V3H12.5C12.2239 3 12 2.77614 12 2.5C12 2.22386 12.2239 2 12.5 2H13V1.5C13 1.22386 13.2239 1 13.5 1Z\",\n  fill: \"currentColor\"\n}), h(\"path\", {\n  d: \"M3.5 3C3.77615 3 4 3.22386 4 3.5V4H4.5C4.77615 4 5 4.22386 5 4.5C5 4.77614 4.77615 5 4.5 5H4V5.5C4 5.77614 3.77615 6 3.5 6C3.22386 6 3 5.77614 3 5.5V5H2.5C2.22386 5 2 4.77614 2 4.5C2 4.22386 2.22386 4 2.5 4H3V3.5C3 3.22386 3.22386 3 3.5 3Z\",\n  fill: \"currentColor\"\n}), h(\"path\", {\n  d: \"M12.5 12C12.7761 12 13 11.7761 13 11.5C13 11.2239 12.7761 11 12.5 11H12V10.5C12 10.2239 11.7761 10 11.5 10C11.2239 10 11 10.2239 11 10.5V11H10.5C10.2239 11 10 11.2239 10 11.5C10 11.7761 10.2239 12 10.5 12H11V12.5C11 12.7761 11.2239 13 11.5 13C11.7761 13 12 12.7761 12 12.5V12H12.5Z\",\n  fill: \"currentColor\"\n}), h(\"path\", {\n  d: \"M8.72956 4.56346C9.4771 3.81592 10.6891 3.81592 11.4367 4.56347C12.1842 5.31102 12.1842 6.52303 11.4367 7.27058L4.26679 14.4404C3.51924 15.1879 2.30723 15.1879 1.55968 14.4404C0.812134 13.6928 0.812138 12.4808 1.55969 11.7333L8.72956 4.56346ZM8.25002 6.4572L2.26679 12.4404C1.90977 12.7974 1.90977 13.3763 2.26679 13.7333C2.62381 14.0903 3.20266 14.0903 3.55968 13.7333L9.54292 7.75009L8.25002 6.4572ZM10.25 7.04299L10.7295 6.56347C11.0866 6.20645 11.0866 5.6276 10.7296 5.27057C10.3725 4.91355 9.79368 4.91355 9.43666 5.27057L8.95713 5.7501L10.25 7.04299Z\",\n  fill: \"currentColor\"\n})); // button colorOpacitySecondary var is not color\n\nconst showColorPicker = key => {\n  if (key.includes('pacity')) return false;\n  if (key.includes('color') || key.includes('Color')) return true;\n  return false;\n};\n\nexport default defineComponent({\n  name: 'ThemeEditor',\n  inheritAttrs: false,\n\n  setup() {\n    const fileInputRef = ref(null);\n    const NConfigProvider = inject(configProviderInjectionKey, null);\n    const theme = computed(() => {\n      var _a, _b, _c, _d;\n\n      const mergedTheme = (NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedThemeRef.value) || lightTheme;\n      const mergedThemeOverrides = NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedThemeOverridesRef.value;\n      const common = merge({}, mergedTheme.common || lightTheme.common, mergedThemeOverrides === null || mergedThemeOverrides === void 0 ? void 0 : mergedThemeOverrides.common, overridesRef.value.common || {});\n      const overrides = {\n        common\n      };\n\n      for (const key of Object.keys(lightTheme)) {\n        if (key === 'common') continue;\n        overrides[key] = ((_b = (_a = mergedTheme[key]) === null || _a === void 0 ? void 0 : _a.self) === null || _b === void 0 ? void 0 : _b.call(_a, common)) || ((_d = (_c = lightTheme[key]).self) === null || _d === void 0 ? void 0 : _d.call(_c, common)); // There (last line) we must use as any, nor ts 2590 will be raised since the union\n        // is too complex\n\n        if (mergedThemeOverrides && overrides[key]) {\n          merge(overrides[key], mergedThemeOverrides[key]);\n        }\n      }\n\n      return overrides;\n    });\n    const themeCommonDefaultRef = computed(() => {\n      var _a;\n\n      return ((_a = NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedThemeRef.value) === null || _a === void 0 ? void 0 : _a.common) || lightTheme.common;\n    });\n    const showPanelRef = ref(false);\n    const overridesRef = ref(JSON.parse(localStorage['naive-ui-theme-overrides'] || '{}'));\n    const tempOverridesRef = ref(JSON.parse(localStorage['naive-ui-theme-overrides'] || '{}'));\n    const varNamePatternRef = ref('');\n    const compNamePatternRef = ref('');\n    const tempVarNamePatternRef = ref('');\n    const tempCompNamePatternRef = ref('');\n\n    function applyTempOverrides() {\n      overridesRef.value = cloneDeep(toRaw(tempOverridesRef.value));\n    }\n\n    function setTempOverrides(compName, varName, value) {\n      const {\n        value: tempOverrides\n      } = tempOverridesRef;\n      if (!(compName in tempOverrides)) tempOverrides[compName] = {};\n      const compOverrides = tempOverrides[compName];\n\n      if (value) {\n        compOverrides[varName] = value;\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete compOverrides[varName];\n      }\n    }\n\n    function handleClearAllClick() {\n      tempOverridesRef.value = {};\n      overridesRef.value = {};\n    }\n\n    function handleImportClick() {\n      const {\n        value: fileInput\n      } = fileInputRef;\n      if (!fileInput) return;\n      fileInput.click();\n    }\n\n    function handleInputFileChange() {\n      const {\n        value: fileInput\n      } = fileInputRef;\n      if (!fileInput) return;\n      const fileList = fileInput.files;\n      const file = fileList === null || fileList === void 0 ? void 0 : fileList[0];\n      if (!file) return;\n      file.text().then(value => {\n        overridesRef.value = JSON.parse(value);\n        tempOverridesRef.value = JSON.parse(value);\n      }).catch(e => {\n        alert('Imported File is Invalid');\n        console.error(e);\n      }).finally(() => {\n        fileInput.value = '';\n      });\n    }\n\n    function handleExportClick() {\n      const url = URL.createObjectURL(new Blob([JSON.stringify(overridesRef.value, undefined, 2)]));\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'naive-ui-theme-overrides.json';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    }\n\n    watch(overridesRef, value => {\n      localStorage['naive-ui-theme-overrides'] = JSON.stringify(value);\n    });\n    return {\n      locale: useLocale('ThemeEditor').localeRef,\n      themeCommonDefault: themeCommonDefaultRef,\n      theme,\n      showPanel: showPanelRef,\n      tempOverrides: tempOverridesRef,\n      overrides: overridesRef,\n      compNamePattern: compNamePatternRef,\n      tempCompNamePattern: tempCompNamePatternRef,\n      varNamePattern: varNamePatternRef,\n      tempVarNamePattern: tempVarNamePatternRef,\n      fileInputRef,\n      applyTempOverrides,\n      setTempOverrides,\n      handleClearAllClick,\n      handleExportClick,\n      handleImportClick,\n      handleInputFileChange\n    };\n  },\n\n  render() {\n    return h(NConfigProvider, {\n      themeOverrides: this.overrides\n    }, {\n      default: () => {\n        var _a, _b;\n\n        return [h(NPopover, {\n          arrowPointToCenter: true,\n          trigger: \"manual\",\n          show: this.showPanel,\n          displayDirective: \"show\",\n          placement: \"top-end\",\n          style: {\n            width: '288px',\n            height: 'calc(100vh - 200px)',\n            padding: 0\n          }\n        }, {\n          trigger: () => h(NElement, {\n            style: [{\n              position: 'fixed',\n              zIndex: 10,\n              bottom: '40px',\n              right: '40px',\n              width: '44px',\n              height: '44px',\n              fontSize: '26px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              borderRadius: '50%',\n              backgroundColor: 'var(--popover-color)',\n              color: 'var(--text-color-2)',\n              transition: 'all .3s var(--cubic-bezier-ease-in-out)',\n              boxShadow: '0 2px 8px 0px rgba(0, 0, 0, .12)',\n              cursor: 'pointer'\n            }, this.$attrs.style],\n            // @ts-expect-error\n            onClick: () => {\n              this.showPanel = !this.showPanel;\n            }\n          }, {\n            default: () => ColorWandIcon\n          }),\n          default: () => h(NScrollbar, {\n            contentStyle: {\n              padding: '8px 14px'\n            }\n          }, {\n            default: () => h(Fragment, null, h(NSpace, {\n              vertical: true\n            }, {\n              default: () => h(Fragment, null, h(\"input\", {\n                type: \"file\",\n                ref: \"fileInputRef\",\n                style: {\n                  display: 'block',\n                  width: 0,\n                  height: 0,\n                  visibility: 'hidden'\n                },\n                onChange: this.handleInputFileChange\n              }), h(\"div\", {\n                style: {\n                  marginBottom: '8px',\n                  fontSize: '18px',\n                  fontWeight: 500\n                }\n              }, this.locale.title), this.locale.filterCompName, h(NInput, {\n                onChange: () => {\n                  this.compNamePattern = this.tempCompNamePattern;\n                },\n                onInput: value => {\n                  this.tempCompNamePattern = value;\n                },\n                value: this.tempCompNamePattern,\n                placeholder: this.locale.filterCompName\n              }), this.locale.filterVarName, h(NInput, {\n                onChange: value => {\n                  this.varNamePattern = value;\n                },\n                onInput: value => {\n                  this.tempVarNamePattern = value;\n                },\n                value: this.tempVarNamePattern,\n                placeholder: this.locale.filterVarName\n              }), h(NButton, {\n                size: \"small\",\n                onClick: () => {\n                  this.compNamePattern = '';\n                  this.varNamePattern = '';\n                  this.tempCompNamePattern = '';\n                  this.tempVarNamePattern = '';\n                },\n                block: true\n              }, {\n                default: () => this.locale.clearSearch\n              }), h(NButton, {\n                size: \"small\",\n                onClick: this.handleClearAllClick,\n                block: true\n              }, {\n                default: () => this.locale.clearAllVars\n              }), h(NSpace, {\n                itemStyle: {\n                  flex: 1\n                }\n              }, {\n                default: () => h(Fragment, null, h(NButton, {\n                  block: true,\n                  size: \"small\",\n                  onClick: this.handleImportClick\n                }, {\n                  default: () => this.locale.import\n                }), h(NButton, {\n                  block: true,\n                  size: \"small\",\n                  onClick: this.handleExportClick\n                }, {\n                  default: () => this.locale.export\n                }))\n              }))\n            }), h(NDivider, null), h(NCollapse, null, {\n              default: () => {\n                const {\n                  theme,\n                  compNamePattern,\n                  varNamePattern\n                } = this;\n                const themeKeys = Object.keys(theme);\n                const compNamePatternLower = compNamePattern.toLowerCase();\n                const varNamePatternLower = varNamePattern.toLowerCase();\n                let filteredItemsCount = 0;\n                const collapsedItems = themeKeys.filter(themeKey => {\n                  return themeKey.toLowerCase().includes(compNamePatternLower);\n                }).map(themeKey => {\n                  const componentTheme = themeKey === 'common' ? this.themeCommonDefault : theme[themeKey];\n\n                  if (componentTheme === undefined) {\n                    return null;\n                  }\n\n                  const varKeys = Object.keys(componentTheme).filter(key => {\n                    return key !== 'name' && key.toLowerCase().includes(varNamePatternLower);\n                  });\n\n                  if (!varKeys.length) {\n                    return null;\n                  }\n\n                  filteredItemsCount += 1;\n                  return h(NCollapseItem, {\n                    title: themeKey,\n                    name: themeKey\n                  }, {\n                    default: () => {\n                      return h(NSpace, {\n                        vertical: true\n                      }, {\n                        default: () => varKeys.map(varKey => {\n                          var _a, _b, _c, _d;\n\n                          return [h(\"div\", {\n                            key: `${varKey}Label`\n                          }, varKey), showColorPicker(varKey) ? h(NColorPicker, {\n                            key: varKey,\n                            modes: ['rgb', 'hex'],\n                            value: ((_b = (_a = this.tempOverrides) === null || _a === void 0 ? void 0 : _a[themeKey]) === null || _b === void 0 ? void 0 : _b[varKey]) || componentTheme[varKey],\n                            onComplete: this.applyTempOverrides,\n                            onUpdateValue: value => {\n                              this.setTempOverrides(themeKey, varKey, value);\n                            }\n                          }, {\n                            action: () => {\n                              var _a, _b;\n\n                              return h(NButton, {\n                                size: \"small\",\n                                disabled: componentTheme[varKey] === ((_b = (_a = this.tempOverrides) === null || _a === void 0 ? void 0 : _a[themeKey]) === null || _b === void 0 ? void 0 : _b[varKey]),\n                                onClick: () => {\n                                  this.setTempOverrides(themeKey, varKey, componentTheme[varKey]);\n                                  this.applyTempOverrides();\n                                }\n                              }, {\n                                default: () => this.locale.restore\n                              });\n                            }\n                          }) : h(NInput, {\n                            key: varKey,\n                            onChange: this.applyTempOverrides,\n                            onUpdateValue: value => {\n                              this.setTempOverrides(themeKey, varKey, value);\n                            },\n                            value: ((_d = (_c = this.tempOverrides) === null || _c === void 0 ? void 0 : _c[themeKey]) === null || _d === void 0 ? void 0 : _d[varKey]) || '',\n                            placeholder: componentTheme[varKey]\n                          })];\n                        })\n                      });\n                    }\n                  });\n                });\n                if (!filteredItemsCount) return h(NEmpty, null);\n                return collapsedItems;\n              }\n            }))\n          })\n        }), (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)];\n      }\n    });\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/theme-editor/src/ThemeEditor.js"],"names":["h","computed","defineComponent","ref","Fragment","toRaw","watch","inject","cloneDeep","merge","lightTheme","NConfigProvider","configProviderInjectionKey","NPopover","NScrollbar","NCollapse","NCollapseItem","NInput","NSpace","useLocale","NElement","NDivider","NButton","NColorPicker","NEmpty","ColorWandIcon","viewBox","fill","xmlns","style","width","height","color","d","showColorPicker","key","includes","name","inheritAttrs","setup","fileInputRef","theme","_a","_b","_c","_d","mergedTheme","mergedThemeRef","value","mergedThemeOverrides","mergedThemeOverridesRef","common","overridesRef","overrides","Object","keys","self","call","themeCommonDefaultRef","showPanelRef","JSON","parse","localStorage","tempOverridesRef","varNamePatternRef","compNamePatternRef","tempVarNamePatternRef","tempCompNamePatternRef","applyTempOverrides","setTempOverrides","compName","varName","tempOverrides","compOverrides","handleClearAllClick","handleImportClick","fileInput","click","handleInputFileChange","fileList","files","file","text","then","catch","e","alert","console","error","finally","handleExportClick","url","URL","createObjectURL","Blob","stringify","undefined","a","document","createElement","href","download","body","appendChild","removeChild","revokeObjectURL","locale","localeRef","themeCommonDefault","showPanel","compNamePattern","tempCompNamePattern","varNamePattern","tempVarNamePattern","render","themeOverrides","default","arrowPointToCenter","trigger","show","displayDirective","placement","padding","position","zIndex","bottom","right","fontSize","display","alignItems","justifyContent","borderRadius","backgroundColor","transition","boxShadow","cursor","$attrs","onClick","contentStyle","vertical","type","visibility","onChange","marginBottom","fontWeight","title","filterCompName","onInput","placeholder","filterVarName","size","block","clearSearch","clearAllVars","itemStyle","flex","import","export","themeKeys","compNamePatternLower","toLowerCase","varNamePatternLower","filteredItemsCount","collapsedItems","filter","themeKey","map","componentTheme","varKeys","length","varKey","modes","onComplete","onUpdateValue","action","disabled","restore","$slots"],"mappings":"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","sourcesContent":["import { h, computed, defineComponent, ref, Fragment, toRaw, watch, inject } from 'vue';\nimport { cloneDeep, merge } from 'lodash-es';\nimport { lightTheme } from '../../themes/light';\nimport { NConfigProvider } from '../../config-provider';\nimport { configProviderInjectionKey } from '../../config-provider/src/context';\nimport { NPopover } from '../../popover';\nimport { NScrollbar } from '../../_internal';\nimport { NCollapse, NCollapseItem } from '../../collapse';\nimport { NInput } from '../../input';\nimport { NSpace } from '../../space';\nimport { useLocale } from '../../_mixins';\nimport { NElement } from '../../element';\nimport { NDivider } from '../../divider';\nimport { NButton } from '../../button';\nimport { NColorPicker } from '../../color-picker';\nimport { NEmpty } from '../../empty';\nconst ColorWandIcon = (h(\"svg\", { viewBox: \"0 0 16 16\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", style: { width: '1em', height: '1em', color: 'currentColor' } },\n    h(\"path\", { d: \"M13.5 1C13.7761 1 14 1.22386 14 1.5V2H14.5C14.7761 2 15 2.22386 15 2.5C15 2.77614 14.7761 3 14.5 3H14V3.5C14 3.77614 13.7761 4 13.5 4C13.2239 4 13 3.77614 13 3.5V3H12.5C12.2239 3 12 2.77614 12 2.5C12 2.22386 12.2239 2 12.5 2H13V1.5C13 1.22386 13.2239 1 13.5 1Z\", fill: \"currentColor\" }),\n    h(\"path\", { d: \"M3.5 3C3.77615 3 4 3.22386 4 3.5V4H4.5C4.77615 4 5 4.22386 5 4.5C5 4.77614 4.77615 5 4.5 5H4V5.5C4 5.77614 3.77615 6 3.5 6C3.22386 6 3 5.77614 3 5.5V5H2.5C2.22386 5 2 4.77614 2 4.5C2 4.22386 2.22386 4 2.5 4H3V3.5C3 3.22386 3.22386 3 3.5 3Z\", fill: \"currentColor\" }),\n    h(\"path\", { d: \"M12.5 12C12.7761 12 13 11.7761 13 11.5C13 11.2239 12.7761 11 12.5 11H12V10.5C12 10.2239 11.7761 10 11.5 10C11.2239 10 11 10.2239 11 10.5V11H10.5C10.2239 11 10 11.2239 10 11.5C10 11.7761 10.2239 12 10.5 12H11V12.5C11 12.7761 11.2239 13 11.5 13C11.7761 13 12 12.7761 12 12.5V12H12.5Z\", fill: \"currentColor\" }),\n    h(\"path\", { d: \"M8.72956 4.56346C9.4771 3.81592 10.6891 3.81592 11.4367 4.56347C12.1842 5.31102 12.1842 6.52303 11.4367 7.27058L4.26679 14.4404C3.51924 15.1879 2.30723 15.1879 1.55968 14.4404C0.812134 13.6928 0.812138 12.4808 1.55969 11.7333L8.72956 4.56346ZM8.25002 6.4572L2.26679 12.4404C1.90977 12.7974 1.90977 13.3763 2.26679 13.7333C2.62381 14.0903 3.20266 14.0903 3.55968 13.7333L9.54292 7.75009L8.25002 6.4572ZM10.25 7.04299L10.7295 6.56347C11.0866 6.20645 11.0866 5.6276 10.7296 5.27057C10.3725 4.91355 9.79368 4.91355 9.43666 5.27057L8.95713 5.7501L10.25 7.04299Z\", fill: \"currentColor\" })));\n// button colorOpacitySecondary var is not color\nconst showColorPicker = (key) => {\n    if (key.includes('pacity'))\n        return false;\n    if (key.includes('color') || key.includes('Color'))\n        return true;\n    return false;\n};\nexport default defineComponent({\n    name: 'ThemeEditor',\n    inheritAttrs: false,\n    setup() {\n        const fileInputRef = ref(null);\n        const NConfigProvider = inject(configProviderInjectionKey, null);\n        const theme = computed(() => {\n            var _a, _b, _c, _d;\n            const mergedTheme = (NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedThemeRef.value) || lightTheme;\n            const mergedThemeOverrides = NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedThemeOverridesRef.value;\n            const common = merge({}, mergedTheme.common || lightTheme.common, mergedThemeOverrides === null || mergedThemeOverrides === void 0 ? void 0 : mergedThemeOverrides.common, overridesRef.value.common || {});\n            const overrides = {\n                common\n            };\n            for (const key of Object.keys(lightTheme)) {\n                if (key === 'common')\n                    continue;\n                overrides[key] = (((_b = (_a = mergedTheme[key]) === null || _a === void 0 ? void 0 : _a.self) === null || _b === void 0 ? void 0 : _b.call(_a, common)) ||\n                    ((_d = (_c = lightTheme[key]).self) === null || _d === void 0 ? void 0 : _d.call(_c, common)));\n                // There (last line) we must use as any, nor ts 2590 will be raised since the union\n                // is too complex\n                if (mergedThemeOverrides && overrides[key]) {\n                    merge(overrides[key], mergedThemeOverrides[key]);\n                }\n            }\n            return overrides;\n        });\n        const themeCommonDefaultRef = computed(() => {\n            var _a;\n            return ((_a = NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedThemeRef.value) === null || _a === void 0 ? void 0 : _a.common) || lightTheme.common;\n        });\n        const showPanelRef = ref(false);\n        const overridesRef = ref(JSON.parse(localStorage['naive-ui-theme-overrides'] || '{}'));\n        const tempOverridesRef = ref(JSON.parse(localStorage['naive-ui-theme-overrides'] || '{}'));\n        const varNamePatternRef = ref('');\n        const compNamePatternRef = ref('');\n        const tempVarNamePatternRef = ref('');\n        const tempCompNamePatternRef = ref('');\n        function applyTempOverrides() {\n            overridesRef.value = cloneDeep(toRaw(tempOverridesRef.value));\n        }\n        function setTempOverrides(compName, varName, value) {\n            const { value: tempOverrides } = tempOverridesRef;\n            if (!(compName in tempOverrides))\n                tempOverrides[compName] = {};\n            const compOverrides = tempOverrides[compName];\n            if (value) {\n                compOverrides[varName] = value;\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n                delete compOverrides[varName];\n            }\n        }\n        function handleClearAllClick() {\n            tempOverridesRef.value = {};\n            overridesRef.value = {};\n        }\n        function handleImportClick() {\n            const { value: fileInput } = fileInputRef;\n            if (!fileInput)\n                return;\n            fileInput.click();\n        }\n        function handleInputFileChange() {\n            const { value: fileInput } = fileInputRef;\n            if (!fileInput)\n                return;\n            const fileList = fileInput.files;\n            const file = fileList === null || fileList === void 0 ? void 0 : fileList[0];\n            if (!file)\n                return;\n            file\n                .text()\n                .then((value) => {\n                overridesRef.value = JSON.parse(value);\n                tempOverridesRef.value = JSON.parse(value);\n            })\n                .catch((e) => {\n                alert('Imported File is Invalid');\n                console.error(e);\n            })\n                .finally(() => {\n                fileInput.value = '';\n            });\n        }\n        function handleExportClick() {\n            const url = URL.createObjectURL(new Blob([JSON.stringify(overridesRef.value, undefined, 2)]));\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = 'naive-ui-theme-overrides.json';\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n        }\n        watch(overridesRef, (value) => {\n            localStorage['naive-ui-theme-overrides'] = JSON.stringify(value);\n        });\n        return {\n            locale: useLocale('ThemeEditor').localeRef,\n            themeCommonDefault: themeCommonDefaultRef,\n            theme,\n            showPanel: showPanelRef,\n            tempOverrides: tempOverridesRef,\n            overrides: overridesRef,\n            compNamePattern: compNamePatternRef,\n            tempCompNamePattern: tempCompNamePatternRef,\n            varNamePattern: varNamePatternRef,\n            tempVarNamePattern: tempVarNamePatternRef,\n            fileInputRef,\n            applyTempOverrides,\n            setTempOverrides,\n            handleClearAllClick,\n            handleExportClick,\n            handleImportClick,\n            handleInputFileChange\n        };\n    },\n    render() {\n        return (h(NConfigProvider, { themeOverrides: this.overrides }, {\n            default: () => {\n                var _a, _b;\n                return [\n                    h(NPopover, { arrowPointToCenter: true, trigger: \"manual\", show: this.showPanel, displayDirective: \"show\", placement: \"top-end\", style: {\n                            width: '288px',\n                            height: 'calc(100vh - 200px)',\n                            padding: 0\n                        } }, {\n                        trigger: () => (h(NElement, { style: [\n                                {\n                                    position: 'fixed',\n                                    zIndex: 10,\n                                    bottom: '40px',\n                                    right: '40px',\n                                    width: '44px',\n                                    height: '44px',\n                                    fontSize: '26px',\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'center',\n                                    borderRadius: '50%',\n                                    backgroundColor: 'var(--popover-color)',\n                                    color: 'var(--text-color-2)',\n                                    transition: 'all .3s var(--cubic-bezier-ease-in-out)',\n                                    boxShadow: '0 2px 8px 0px rgba(0, 0, 0, .12)',\n                                    cursor: 'pointer'\n                                },\n                                this.$attrs.style\n                            ], \n                            // @ts-expect-error\n                            onClick: () => {\n                                this.showPanel = !this.showPanel;\n                            } }, { default: () => ColorWandIcon })),\n                        default: () => (h(NScrollbar, { contentStyle: { padding: '8px 14px' } }, {\n                            default: () => (h(Fragment, null,\n                                h(NSpace, { vertical: true }, {\n                                    default: () => (h(Fragment, null,\n                                        h(\"input\", { type: \"file\", ref: \"fileInputRef\", style: {\n                                                display: 'block',\n                                                width: 0,\n                                                height: 0,\n                                                visibility: 'hidden'\n                                            }, onChange: this.handleInputFileChange }),\n                                        h(\"div\", { style: {\n                                                marginBottom: '8px',\n                                                fontSize: '18px',\n                                                fontWeight: 500\n                                            } }, this.locale.title),\n                                        this.locale.filterCompName,\n                                        h(NInput, { onChange: () => {\n                                                this.compNamePattern =\n                                                    this.tempCompNamePattern;\n                                            }, onInput: (value) => {\n                                                this.tempCompNamePattern = value;\n                                            }, value: this.tempCompNamePattern, placeholder: this.locale.filterCompName }),\n                                        this.locale.filterVarName,\n                                        h(NInput, { onChange: (value) => {\n                                                this.varNamePattern = value;\n                                            }, onInput: (value) => {\n                                                this.tempVarNamePattern = value;\n                                            }, value: this.tempVarNamePattern, placeholder: this.locale.filterVarName }),\n                                        h(NButton, { size: \"small\", onClick: () => {\n                                                this.compNamePattern = '';\n                                                this.varNamePattern = '';\n                                                this.tempCompNamePattern = '';\n                                                this.tempVarNamePattern = '';\n                                            }, block: true }, { default: () => this.locale.clearSearch }),\n                                        h(NButton, { size: \"small\", onClick: this.handleClearAllClick, block: true }, {\n                                            default: () => this.locale.clearAllVars\n                                        }),\n                                        h(NSpace, { itemStyle: { flex: 1 } }, {\n                                            default: () => (h(Fragment, null,\n                                                h(NButton, { block: true, size: \"small\", onClick: this.handleImportClick }, {\n                                                    default: () => this.locale.import\n                                                }),\n                                                h(NButton, { block: true, size: \"small\", onClick: this.handleExportClick }, {\n                                                    default: () => this.locale.export\n                                                })))\n                                        })))\n                                }),\n                                h(NDivider, null),\n                                h(NCollapse, null, {\n                                    default: () => {\n                                        const { theme, compNamePattern, varNamePattern } = this;\n                                        const themeKeys = Object.keys(theme);\n                                        const compNamePatternLower = compNamePattern.toLowerCase();\n                                        const varNamePatternLower = varNamePattern.toLowerCase();\n                                        let filteredItemsCount = 0;\n                                        const collapsedItems = themeKeys\n                                            .filter((themeKey) => {\n                                            return themeKey\n                                                .toLowerCase()\n                                                .includes(compNamePatternLower);\n                                        })\n                                            .map((themeKey) => {\n                                            const componentTheme = themeKey === 'common'\n                                                ? this.themeCommonDefault\n                                                : theme[themeKey];\n                                            if (componentTheme === undefined) {\n                                                return null;\n                                            }\n                                            const varKeys = Object.keys(componentTheme).filter((key) => {\n                                                return (key !== 'name' &&\n                                                    key\n                                                        .toLowerCase()\n                                                        .includes(varNamePatternLower));\n                                            });\n                                            if (!varKeys.length) {\n                                                return null;\n                                            }\n                                            filteredItemsCount += 1;\n                                            return (h(NCollapseItem, { title: themeKey, name: themeKey }, {\n                                                default: () => {\n                                                    return (h(NSpace, { vertical: true }, {\n                                                        default: () => varKeys.map((varKey) => {\n                                                            var _a, _b, _c, _d;\n                                                            return [\n                                                                h(\"div\", { key: `${varKey}Label` }, varKey),\n                                                                showColorPicker(varKey) ? (h(NColorPicker, { key: varKey, modes: [\n                                                                        'rgb',\n                                                                        'hex'\n                                                                    ], value: ((_b = (_a = this\n                                                                        .tempOverrides) === null || _a === void 0 ? void 0 : _a[themeKey]) === null || _b === void 0 ? void 0 : _b[varKey]) ||\n                                                                        componentTheme[varKey], onComplete: this\n                                                                        .applyTempOverrides, onUpdateValue: (value) => {\n                                                                        this.setTempOverrides(themeKey, varKey, value);\n                                                                    } }, {\n                                                                    action: () => {\n                                                                        var _a, _b;\n                                                                        return (h(NButton, { size: \"small\", disabled: componentTheme[varKey] ===\n                                                                                ((_b = (_a = this\n                                                                                    .tempOverrides) === null || _a === void 0 ? void 0 : _a[themeKey]) === null || _b === void 0 ? void 0 : _b[varKey]), onClick: () => {\n                                                                                this.setTempOverrides(themeKey, varKey, componentTheme[varKey]);\n                                                                                this.applyTempOverrides();\n                                                                            } }, {\n                                                                            default: () => this\n                                                                                .locale\n                                                                                .restore\n                                                                        }));\n                                                                    }\n                                                                })) : (h(NInput, { key: varKey, onChange: this\n                                                                        .applyTempOverrides, onUpdateValue: (value) => {\n                                                                        this.setTempOverrides(themeKey, varKey, value);\n                                                                    }, value: ((_d = (_c = this\n                                                                        .tempOverrides) === null || _c === void 0 ? void 0 : _c[themeKey]) === null || _d === void 0 ? void 0 : _d[varKey]) || '', placeholder: componentTheme[varKey] }))\n                                                            ];\n                                                        })\n                                                    }));\n                                                }\n                                            }));\n                                        });\n                                        if (!filteredItemsCount)\n                                            return h(NEmpty, null);\n                                        return collapsedItems;\n                                    }\n                                })))\n                        }))\n                    }),\n                    (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)\n                ];\n            }\n        }));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}