{"ast":null,"code":"import { nextTick, Transition, h, defineComponent, ref, onMounted } from 'vue';\nimport { keep } from '../../_utils';\nimport { Notification, notificationProps, notificationPropKeys } from './Notification';\nexport const notificationEnvOptions = Object.assign(Object.assign({}, notificationProps), {\n  duration: Number,\n  onClose: Function,\n  onLeave: Function,\n  onAfterEnter: Function,\n  onAfterLeave: Function,\n\n  /** @deprecated */\n  onHide: Function,\n\n  /** @deprecated */\n  onAfterShow: Function,\n\n  /** @deprecated */\n  onAfterHide: Function\n});\nexport const NotificationEnvironment = defineComponent({\n  name: 'NotificationEnvironment',\n  props: Object.assign(Object.assign({}, notificationEnvOptions), {\n    // private\n    internalKey: {\n      type: String,\n      required: true\n    },\n    onInternalAfterLeave: {\n      type: Function,\n      required: true\n    }\n  }),\n\n  setup(props) {\n    const showRef = ref(true);\n    let timerId = null;\n\n    function hide() {\n      showRef.value = false;\n\n      if (timerId) {\n        window.clearTimeout(timerId);\n      }\n    }\n\n    function handleBeforeEnter(el) {\n      void nextTick(() => {\n        el.style.height = `${el.offsetHeight}px`;\n        el.style.maxHeight = '0';\n        el.style.transition = 'none';\n        void el.offsetHeight;\n        el.style.transition = '';\n        el.style.maxHeight = el.style.height;\n      });\n    }\n\n    function handleAfterEnter(el) {\n      el.style.height = '';\n      el.style.maxHeight = '';\n      const {\n        onAfterEnter,\n        onAfterShow\n      } = props;\n      if (onAfterEnter) onAfterEnter(); // deprecated\n\n      if (onAfterShow) onAfterShow();\n    }\n\n    function handleBeforeLeave(el) {\n      el.style.maxHeight = `${el.offsetHeight}px`;\n      el.style.height = `${el.offsetHeight}px`;\n      void el.offsetHeight;\n    }\n\n    function handleLeave(el) {\n      const {\n        onHide\n      } = props;\n      if (onHide) onHide();\n      el.style.maxHeight = '0';\n      void el.offsetHeight;\n    }\n\n    function handleAfterLeave() {\n      const {\n        onAfterLeave,\n        onInternalAfterLeave,\n        onAfterHide,\n        internalKey\n      } = props;\n      if (onAfterLeave) onAfterLeave();\n      onInternalAfterLeave(internalKey); // deprecated\n\n      if (onAfterHide) onAfterHide();\n    }\n\n    function handleClose() {\n      const {\n        onClose\n      } = props;\n\n      if (onClose) {\n        void Promise.resolve(onClose()).then(feedback => {\n          if (feedback === false) return;\n          hide();\n        });\n      } else {\n        hide();\n      }\n    }\n\n    onMounted(() => {\n      if (props.duration) {\n        timerId = window.setTimeout(hide, props.duration);\n      }\n    });\n    return {\n      show: showRef,\n      hide,\n      handleClose,\n      handleAfterLeave,\n      handleLeave,\n      handleBeforeLeave,\n      handleAfterEnter,\n      handleBeforeEnter\n    };\n  },\n\n  render() {\n    return h(Transition, {\n      name: \"notification-transition\",\n      appear: true,\n      // convert to any since Element is not compitable with HTMLElement\n      onBeforeEnter: this.handleBeforeEnter,\n      onAfterEnter: this.handleAfterEnter,\n      onBeforeLeave: this.handleBeforeLeave,\n      onLeave: this.handleLeave,\n      onAfterLeave: this.handleAfterLeave\n    }, {\n      default: () => {\n        return this.show ? h(Notification, Object.assign({}, keep(this.$props, notificationPropKeys), {\n          onClose: this.handleClose\n        })) : null;\n      }\n    });\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/notification/src/NotificationEnvironment.js"],"names":["nextTick","Transition","h","defineComponent","ref","onMounted","keep","Notification","notificationProps","notificationPropKeys","notificationEnvOptions","Object","assign","duration","Number","onClose","Function","onLeave","onAfterEnter","onAfterLeave","onHide","onAfterShow","onAfterHide","NotificationEnvironment","name","props","internalKey","type","String","required","onInternalAfterLeave","setup","showRef","timerId","hide","value","window","clearTimeout","handleBeforeEnter","el","style","height","offsetHeight","maxHeight","transition","handleAfterEnter","handleBeforeLeave","handleLeave","handleAfterLeave","handleClose","Promise","resolve","then","feedback","setTimeout","show","render","appear","onBeforeEnter","onBeforeLeave","default","$props"],"mappings":"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","sourcesContent":["import { nextTick, Transition, h, defineComponent, ref, onMounted } from 'vue';\nimport { keep } from '../../_utils';\nimport { Notification, notificationProps, notificationPropKeys } from './Notification';\nexport const notificationEnvOptions = Object.assign(Object.assign({}, notificationProps), { duration: Number, onClose: Function, onLeave: Function, onAfterEnter: Function, onAfterLeave: Function, \n    /** @deprecated */\n    onHide: Function, \n    /** @deprecated */\n    onAfterShow: Function, \n    /** @deprecated */\n    onAfterHide: Function });\nexport const NotificationEnvironment = defineComponent({\n    name: 'NotificationEnvironment',\n    props: Object.assign(Object.assign({}, notificationEnvOptions), { \n        // private\n        internalKey: {\n            type: String,\n            required: true\n        }, onInternalAfterLeave: {\n            type: Function,\n            required: true\n        } }),\n    setup(props) {\n        const showRef = ref(true);\n        let timerId = null;\n        function hide() {\n            showRef.value = false;\n            if (timerId) {\n                window.clearTimeout(timerId);\n            }\n        }\n        function handleBeforeEnter(el) {\n            void nextTick(() => {\n                el.style.height = `${el.offsetHeight}px`;\n                el.style.maxHeight = '0';\n                el.style.transition = 'none';\n                void el.offsetHeight;\n                el.style.transition = '';\n                el.style.maxHeight = el.style.height;\n            });\n        }\n        function handleAfterEnter(el) {\n            el.style.height = '';\n            el.style.maxHeight = '';\n            const { onAfterEnter, onAfterShow } = props;\n            if (onAfterEnter)\n                onAfterEnter();\n            // deprecated\n            if (onAfterShow)\n                onAfterShow();\n        }\n        function handleBeforeLeave(el) {\n            el.style.maxHeight = `${el.offsetHeight}px`;\n            el.style.height = `${el.offsetHeight}px`;\n            void el.offsetHeight;\n        }\n        function handleLeave(el) {\n            const { onHide } = props;\n            if (onHide)\n                onHide();\n            el.style.maxHeight = '0';\n            void el.offsetHeight;\n        }\n        function handleAfterLeave() {\n            const { onAfterLeave, onInternalAfterLeave, onAfterHide, internalKey } = props;\n            if (onAfterLeave)\n                onAfterLeave();\n            onInternalAfterLeave(internalKey);\n            // deprecated\n            if (onAfterHide)\n                onAfterHide();\n        }\n        function handleClose() {\n            const { onClose } = props;\n            if (onClose) {\n                void Promise.resolve(onClose()).then((feedback) => {\n                    if (feedback === false)\n                        return;\n                    hide();\n                });\n            }\n            else {\n                hide();\n            }\n        }\n        onMounted(() => {\n            if (props.duration) {\n                timerId = window.setTimeout(hide, props.duration);\n            }\n        });\n        return {\n            show: showRef,\n            hide,\n            handleClose,\n            handleAfterLeave,\n            handleLeave,\n            handleBeforeLeave,\n            handleAfterEnter,\n            handleBeforeEnter\n        };\n    },\n    render() {\n        return (h(Transition, { name: \"notification-transition\", appear: true, \n            // convert to any since Element is not compitable with HTMLElement\n            onBeforeEnter: this.handleBeforeEnter, onAfterEnter: this.handleAfterEnter, onBeforeLeave: this.handleBeforeLeave, onLeave: this.handleLeave, onAfterLeave: this.handleAfterLeave }, {\n            default: () => {\n                return this.show ? (h(Notification, Object.assign({}, keep(this.$props, notificationPropKeys), { onClose: this.handleClose }))) : null;\n            }\n        }));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}