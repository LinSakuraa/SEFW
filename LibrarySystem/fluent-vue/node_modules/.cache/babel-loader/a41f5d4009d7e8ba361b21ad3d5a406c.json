{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nexport const isImageFileType = type => type.includes('image/');\n\nconst getExtname = (url = '') => {\n  const temp = url.split('/');\n  const filename = temp[temp.length - 1];\n  const filenameWithoutSuffix = filename.split(/#|\\?/)[0];\n  return (/\\.[^./\\\\]*$/.exec(filenameWithoutSuffix) || [''])[0];\n};\n\nexport const isImageFile = file => {\n  if (file.type) {\n    return isImageFileType(file.type);\n  }\n\n  const url = file.thumbnailUrl || file.url || '';\n  const extension = getExtname(url);\n\n  if (/^data:image\\//.test(url) || /(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(extension)) {\n    return true;\n  }\n\n  if (/^data:/.test(url)) {\n    return false;\n  }\n\n  if (extension) {\n    return false;\n  }\n\n  return true;\n};\nexport function createImageDataUrl(file) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return yield new Promise(resolve => {\n      if (!file.type || !isImageFileType(file.type)) {\n        resolve('');\n        return;\n      }\n\n      const img = new Image();\n      img.src = window.URL.createObjectURL(file);\n\n      img.onload = () => {\n        const {\n          width,\n          height\n        } = img;\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        canvas.width = width;\n        canvas.height = height;\n        canvas.style.cssText = `position: fixed; left: 0; top: 0; width: ${width}px; height: ${height}px; z-index: 9999; display: none;`;\n        document.body.appendChild(canvas);\n        ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(img, 0, 0, width, height);\n        const dataURL = canvas.toDataURL();\n        document.body.removeChild(canvas);\n        resolve(dataURL);\n      };\n    });\n  });\n}\nexport const environmentSupportFile = typeof document !== 'undefined' && typeof window !== 'undefined' && window.FileReader && window.File;","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/upload/src/utils.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","isImageFileType","type","includes","getExtname","url","temp","split","filename","length","filenameWithoutSuffix","exec","isImageFile","file","thumbnailUrl","extension","test","createImageDataUrl","img","Image","src","window","URL","createObjectURL","onload","width","height","canvas","document","createElement","ctx","getContext","style","cssText","body","appendChild","drawImage","dataURL","toDataURL","removeChild","environmentSupportFile","FileReader","File"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const isImageFileType = (type) => type.includes('image/');\nconst getExtname = (url = '') => {\n    const temp = url.split('/');\n    const filename = temp[temp.length - 1];\n    const filenameWithoutSuffix = filename.split(/#|\\?/)[0];\n    return (/\\.[^./\\\\]*$/.exec(filenameWithoutSuffix) || [''])[0];\n};\nexport const isImageFile = (file) => {\n    if (file.type) {\n        return isImageFileType(file.type);\n    }\n    const url = file.thumbnailUrl || file.url || '';\n    const extension = getExtname(url);\n    if (/^data:image\\//.test(url) ||\n        /(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(extension)) {\n        return true;\n    }\n    if (/^data:/.test(url)) {\n        return false;\n    }\n    if (extension) {\n        return false;\n    }\n    return true;\n};\nexport function createImageDataUrl(file) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return yield new Promise((resolve) => {\n            if (!file.type || !isImageFileType(file.type)) {\n                resolve('');\n                return;\n            }\n            const img = new Image();\n            img.src = window.URL.createObjectURL(file);\n            img.onload = () => {\n                const { width, height } = img;\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                canvas.width = width;\n                canvas.height = height;\n                canvas.style.cssText = `position: fixed; left: 0; top: 0; width: ${width}px; height: ${height}px; z-index: 9999; display: none;`;\n                document.body.appendChild(canvas);\n                ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(img, 0, 0, width, height);\n                const dataURL = canvas.toDataURL();\n                document.body.removeChild(canvas);\n                resolve(dataURL);\n            };\n        });\n    });\n}\nexport const environmentSupportFile = typeof document !== 'undefined' &&\n    typeof window !== 'undefined' &&\n    window.FileReader &&\n    window.File;\n"]},"metadata":{},"sourceType":"module"}