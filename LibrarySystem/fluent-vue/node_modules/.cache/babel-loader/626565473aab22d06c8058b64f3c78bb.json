{"ast":null,"code":"import { onBeforeMount, onBeforeUnmount, reactive, readonly, watch } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance } from './utils';\nexport default function useKeyboard(options = {}, enabledRef) {\n  const state = reactive({\n    ctrl: false,\n    command: false,\n    win: false,\n    shift: false,\n    tab: false\n  });\n  const {\n    keydown,\n    keyup\n  } = options;\n\n  const keydownHandler = e => {\n    switch (e.key) {\n      case 'Control':\n        state.ctrl = true;\n        break;\n\n      case 'Meta':\n        state.command = true;\n        state.win = true;\n        break;\n\n      case 'Shift':\n        state.shift = true;\n        break;\n\n      case 'Tab':\n        state.tab = true;\n        break;\n    }\n\n    if (keydown !== undefined) {\n      Object.keys(keydown).forEach(key => {\n        if (key !== e.key) return;\n        const handler = keydown[key];\n\n        if (typeof handler === 'function') {\n          handler(e);\n        } else {\n          const {\n            stop = false,\n            prevent = false\n          } = handler;\n          if (stop) e.stopPropagation();\n          if (prevent) e.preventDefault();\n          handler.handler(e);\n        }\n      });\n    }\n  };\n\n  const keyupHandler = e => {\n    switch (e.key) {\n      case 'Control':\n        state.ctrl = false;\n        break;\n\n      case 'Meta':\n        state.command = false;\n        state.win = false;\n        break;\n\n      case 'Shift':\n        state.shift = false;\n        break;\n\n      case 'Tab':\n        state.tab = false;\n        break;\n    }\n\n    if (keyup !== undefined) {\n      Object.keys(keyup).forEach(key => {\n        if (key !== e.key) return;\n        const handler = keyup[key];\n\n        if (typeof handler === 'function') {\n          handler(e);\n        } else {\n          const {\n            stop = false,\n            prevent = false\n          } = handler;\n          if (stop) e.stopPropagation();\n          if (prevent) e.preventDefault();\n          handler.handler(e);\n        }\n      });\n    }\n  };\n\n  const setup = () => {\n    if (enabledRef === undefined || enabledRef.value) {\n      on('keydown', document, keydownHandler);\n      on('keyup', document, keyupHandler);\n    }\n\n    if (enabledRef !== undefined) {\n      watch(enabledRef, value => {\n        if (value) {\n          on('keydown', document, keydownHandler);\n          on('keyup', document, keyupHandler);\n        } else {\n          off('keydown', document, keydownHandler);\n          off('keyup', document, keyupHandler);\n        }\n      });\n    }\n  };\n\n  if (hasInstance()) {\n    onBeforeMount(setup);\n    onBeforeUnmount(() => {\n      if (enabledRef === undefined || enabledRef.value) {\n        off('keydown', document, keydownHandler);\n        off('keyup', document, keyupHandler);\n      }\n    });\n  } else {\n    setup();\n  }\n\n  return readonly(state);\n}","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/vooks/es/use-keyboard.js"],"names":["onBeforeMount","onBeforeUnmount","reactive","readonly","watch","on","off","hasInstance","useKeyboard","options","enabledRef","state","ctrl","command","win","shift","tab","keydown","keyup","keydownHandler","e","key","undefined","Object","keys","forEach","handler","stop","prevent","stopPropagation","preventDefault","keyupHandler","setup","value","document"],"mappings":"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","sourcesContent":["import { onBeforeMount, onBeforeUnmount, reactive, readonly, watch } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance } from './utils';\nexport default function useKeyboard(options = {}, enabledRef) {\n    const state = reactive({\n        ctrl: false,\n        command: false,\n        win: false,\n        shift: false,\n        tab: false\n    });\n    const { keydown, keyup } = options;\n    const keydownHandler = (e) => {\n        switch (e.key) {\n            case 'Control':\n                state.ctrl = true;\n                break;\n            case 'Meta':\n                state.command = true;\n                state.win = true;\n                break;\n            case 'Shift':\n                state.shift = true;\n                break;\n            case 'Tab':\n                state.tab = true;\n                break;\n        }\n        if (keydown !== undefined) {\n            Object.keys(keydown).forEach(key => {\n                if (key !== e.key)\n                    return;\n                const handler = keydown[key];\n                if (typeof handler === 'function') {\n                    handler(e);\n                }\n                else {\n                    const { stop = false, prevent = false } = handler;\n                    if (stop)\n                        e.stopPropagation();\n                    if (prevent)\n                        e.preventDefault();\n                    handler.handler(e);\n                }\n            });\n        }\n    };\n    const keyupHandler = (e) => {\n        switch (e.key) {\n            case 'Control':\n                state.ctrl = false;\n                break;\n            case 'Meta':\n                state.command = false;\n                state.win = false;\n                break;\n            case 'Shift':\n                state.shift = false;\n                break;\n            case 'Tab':\n                state.tab = false;\n                break;\n        }\n        if (keyup !== undefined) {\n            Object.keys(keyup).forEach(key => {\n                if (key !== e.key)\n                    return;\n                const handler = keyup[key];\n                if (typeof handler === 'function') {\n                    handler(e);\n                }\n                else {\n                    const { stop = false, prevent = false } = handler;\n                    if (stop)\n                        e.stopPropagation();\n                    if (prevent)\n                        e.preventDefault();\n                    handler.handler(e);\n                }\n            });\n        }\n    };\n    const setup = () => {\n        if (enabledRef === undefined || enabledRef.value) {\n            on('keydown', document, keydownHandler);\n            on('keyup', document, keyupHandler);\n        }\n        if (enabledRef !== undefined) {\n            watch(enabledRef, value => {\n                if (value) {\n                    on('keydown', document, keydownHandler);\n                    on('keyup', document, keyupHandler);\n                }\n                else {\n                    off('keydown', document, keydownHandler);\n                    off('keyup', document, keyupHandler);\n                }\n            });\n        }\n    };\n    if (hasInstance()) {\n        onBeforeMount(setup);\n        onBeforeUnmount(() => {\n            if (enabledRef === undefined || enabledRef.value) {\n                off('keydown', document, keydownHandler);\n                off('keyup', document, keyupHandler);\n            }\n        });\n    }\n    else {\n        setup();\n    }\n    return readonly(state);\n}\n"]},"metadata":{},"sourceType":"module"}