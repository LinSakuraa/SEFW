{"ast":null,"code":"import { defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { normalizeHue } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nconst RADIUS_NUM = 6;\nconst GRADIENT = 'linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)';\nexport default defineComponent({\n  name: 'HueSlider',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    hue: {\n      type: Number,\n      required: true\n    },\n    onUpdateHue: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n\n  setup(props) {\n    const railRef = ref(null);\n\n    function handleMouseDown(e) {\n      if (!railRef.value) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n\n    function handleMouseMove(e) {\n      const {\n        value: railEl\n      } = railRef;\n      if (!railEl) return;\n      const {\n        width,\n        left\n      } = railEl.getBoundingClientRect();\n      const newHue = normalizeHue((e.clientX - left - RADIUS_NUM) / (width - HANDLE_SIZE_NUM) * 360);\n      props.onUpdateHue(newHue);\n    }\n\n    function handleMouseUp() {\n      var _a;\n\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n\n    return {\n      railRef,\n      handleMouseDown\n    };\n  },\n\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider`,\n      style: {\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS\n      }\n    }, h(\"div\", {\n      ref: \"railRef\",\n      style: {\n        boxShadow: 'inset 0 0 2px 0 rgba(0, 0, 0, .24)',\n        boxSizing: 'border-box',\n        backgroundImage: GRADIENT,\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS,\n        position: 'relative'\n      },\n      onMousedown: this.handleMouseDown\n    }, h(\"div\", {\n      style: {\n        position: 'absolute',\n        left: RADIUS,\n        right: RADIUS,\n        top: 0,\n        bottom: 0\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        left: `calc((${this.hue}%) / 359 * 100 - ${RADIUS})`,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: `hsl(${this.hue}, 100%, 50%)`,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    })))));\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/color-picker/src/HueSlider.js"],"names":["defineComponent","h","ref","off","on","normalizeHue","HANDLE_SIZE","HANDLE_SIZE_NUM","RADIUS","RADIUS_NUM","GRADIENT","name","props","clsPrefix","type","String","required","hue","Number","onUpdateHue","Function","onComplete","setup","railRef","handleMouseDown","e","value","document","handleMouseMove","handleMouseUp","railEl","width","left","getBoundingClientRect","newHue","clientX","_a","call","render","class","style","height","borderRadius","boxShadow","boxSizing","backgroundImage","position","onMousedown","right","top","bottom","backgroundColor"],"mappings":"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","sourcesContent":["import { defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { normalizeHue } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nconst RADIUS_NUM = 6;\nconst GRADIENT = 'linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)';\nexport default defineComponent({\n    name: 'HueSlider',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        hue: {\n            type: Number,\n            required: true\n        },\n        onUpdateHue: {\n            type: Function,\n            required: true\n        },\n        onComplete: Function\n    },\n    setup(props) {\n        const railRef = ref(null);\n        function handleMouseDown(e) {\n            if (!railRef.value)\n                return;\n            on('mousemove', document, handleMouseMove);\n            on('mouseup', document, handleMouseUp);\n            handleMouseMove(e);\n        }\n        function handleMouseMove(e) {\n            const { value: railEl } = railRef;\n            if (!railEl)\n                return;\n            const { width, left } = railEl.getBoundingClientRect();\n            const newHue = normalizeHue(((e.clientX - left - RADIUS_NUM) / (width - HANDLE_SIZE_NUM)) * 360);\n            props.onUpdateHue(newHue);\n        }\n        function handleMouseUp() {\n            var _a;\n            off('mousemove', document, handleMouseMove);\n            off('mouseup', document, handleMouseUp);\n            (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        return {\n            railRef,\n            handleMouseDown\n        };\n    },\n    render() {\n        const { clsPrefix } = this;\n        return (h(\"div\", { class: `${clsPrefix}-color-picker-slider`, style: {\n                height: HANDLE_SIZE,\n                borderRadius: RADIUS\n            } },\n            h(\"div\", { ref: \"railRef\", style: {\n                    boxShadow: 'inset 0 0 2px 0 rgba(0, 0, 0, .24)',\n                    boxSizing: 'border-box',\n                    backgroundImage: GRADIENT,\n                    height: HANDLE_SIZE,\n                    borderRadius: RADIUS,\n                    position: 'relative'\n                }, onMousedown: this.handleMouseDown },\n                h(\"div\", { style: {\n                        position: 'absolute',\n                        left: RADIUS,\n                        right: RADIUS,\n                        top: 0,\n                        bottom: 0\n                    } },\n                    h(\"div\", { class: `${clsPrefix}-color-picker-handle`, style: {\n                            left: `calc((${this.hue}%) / 359 * 100 - ${RADIUS})`,\n                            borderRadius: RADIUS,\n                            width: HANDLE_SIZE,\n                            height: HANDLE_SIZE\n                        } },\n                        h(\"div\", { class: `${clsPrefix}-color-picker-handle__fill`, style: {\n                                backgroundColor: `hsl(${this.hue}, 100%, 50%)`,\n                                borderRadius: RADIUS,\n                                width: HANDLE_SIZE,\n                                height: HANDLE_SIZE\n                            } }))))));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}