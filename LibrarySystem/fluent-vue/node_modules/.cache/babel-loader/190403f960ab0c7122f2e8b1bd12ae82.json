{"ast":null,"code":"import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n  name: 'AlphaSlider',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    rgba: {\n      type: Array,\n      default: null\n    },\n    alpha: {\n      type: Number,\n      default: 0\n    },\n    onUpdateAlpha: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n\n  setup(props) {\n    const railRef = ref(null);\n\n    function handleMouseDown(e) {\n      if (!railRef.value || !props.rgba) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n\n    function handleMouseMove(e) {\n      const {\n        value: railEl\n      } = railRef;\n      if (!railEl) return;\n      const {\n        width,\n        left\n      } = railEl.getBoundingClientRect();\n      const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n      props.onUpdateAlpha(normalizeAlpha(newAlpha));\n    }\n\n    function handleMouseUp() {\n      var _a;\n\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n\n    return {\n      railRef,\n      railBackgroundImage: computed(() => {\n        const {\n          rgba\n        } = props;\n        if (!rgba) return '';\n        return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n      }),\n      handleMouseDown\n    };\n  },\n\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider`,\n      ref: \"railRef\",\n      style: {\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS\n      },\n      onMousedown: this.handleMouseDown\n    }, h(\"div\", {\n      style: {\n        borderRadius: RADIUS,\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        overflow: 'hidden'\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-checkboard`\n    }), h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider__image`,\n      style: {\n        backgroundImage: this.railBackgroundImage\n      }\n    })), this.rgba && h(\"div\", {\n      style: {\n        position: 'absolute',\n        left: RADIUS,\n        right: RADIUS,\n        top: 0,\n        bottom: 0\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: toRgbaString(this.rgba),\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }))));\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/color-picker/src/AlphaSlider.js"],"names":["computed","defineComponent","h","ref","off","on","toRgbaString","normalizeAlpha","HANDLE_SIZE","HANDLE_SIZE_NUM","RADIUS","name","props","clsPrefix","type","String","required","rgba","Array","default","alpha","Number","onUpdateAlpha","Function","onComplete","setup","railRef","handleMouseDown","e","value","document","handleMouseMove","handleMouseUp","railEl","width","left","getBoundingClientRect","newAlpha","clientX","_a","call","railBackgroundImage","render","class","style","height","borderRadius","onMousedown","position","right","top","bottom","overflow","backgroundImage","backgroundColor"],"mappings":"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","sourcesContent":["import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n    name: 'AlphaSlider',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        rgba: {\n            type: Array,\n            default: null\n        },\n        alpha: {\n            type: Number,\n            default: 0\n        },\n        onUpdateAlpha: {\n            type: Function,\n            required: true\n        },\n        onComplete: Function\n    },\n    setup(props) {\n        const railRef = ref(null);\n        function handleMouseDown(e) {\n            if (!railRef.value || !props.rgba)\n                return;\n            on('mousemove', document, handleMouseMove);\n            on('mouseup', document, handleMouseUp);\n            handleMouseMove(e);\n        }\n        function handleMouseMove(e) {\n            const { value: railEl } = railRef;\n            if (!railEl)\n                return;\n            const { width, left } = railEl.getBoundingClientRect();\n            const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n            props.onUpdateAlpha(normalizeAlpha(newAlpha));\n        }\n        function handleMouseUp() {\n            var _a;\n            off('mousemove', document, handleMouseMove);\n            off('mouseup', document, handleMouseUp);\n            (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        return {\n            railRef,\n            railBackgroundImage: computed(() => {\n                const { rgba } = props;\n                if (!rgba)\n                    return '';\n                return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n            }),\n            handleMouseDown\n        };\n    },\n    render() {\n        const { clsPrefix } = this;\n        return (h(\"div\", { class: `${clsPrefix}-color-picker-slider`, ref: \"railRef\", style: {\n                height: HANDLE_SIZE,\n                borderRadius: RADIUS\n            }, onMousedown: this.handleMouseDown },\n            h(\"div\", { style: {\n                    borderRadius: RADIUS,\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    overflow: 'hidden'\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-checkboard` }),\n                h(\"div\", { class: `${clsPrefix}-color-picker-slider__image`, style: {\n                        backgroundImage: this.railBackgroundImage\n                    } })),\n            this.rgba && (h(\"div\", { style: {\n                    position: 'absolute',\n                    left: RADIUS,\n                    right: RADIUS,\n                    top: 0,\n                    bottom: 0\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-handle`, style: {\n                        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n                        borderRadius: RADIUS,\n                        width: HANDLE_SIZE,\n                        height: HANDLE_SIZE\n                    } },\n                    h(\"div\", { class: `${clsPrefix}-color-picker-handle__fill`, style: {\n                            backgroundColor: toRgbaString(this.rgba),\n                            borderRadius: RADIUS,\n                            width: HANDLE_SIZE,\n                            height: HANDLE_SIZE\n                        } }))))));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}