{"ast":null,"code":"import { on, off } from 'evtd';\nimport { computed, defineComponent, h, ref } from 'vue';\nconst HANDLE_SIZE = '12px';\nconst RADIUS = '6px';\nexport default defineComponent({\n  name: 'Pallete',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    rgba: {\n      type: Array,\n      default: null\n    },\n    // 0 - 360\n    displayedHue: {\n      type: Number,\n      required: true\n    },\n    displayedSv: {\n      type: Array,\n      required: true\n    },\n    onUpdateSV: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n\n  setup(props) {\n    const palleteRef = ref(null);\n\n    function handleMouseDown(e) {\n      if (!palleteRef.value) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n\n    function handleMouseMove(e) {\n      const {\n        value: palleteEl\n      } = palleteRef;\n      if (!palleteEl) return;\n      const {\n        width,\n        height,\n        left,\n        bottom\n      } = palleteEl.getBoundingClientRect();\n      const newV = (bottom - e.clientY) / height;\n      const newS = (e.clientX - left) / width;\n      const normalizedNewS = 100 * (newS > 1 ? 1 : newS < 0 ? 0 : newS);\n      const normalizedNewV = 100 * (newV > 1 ? 1 : newV < 0 ? 0 : newV);\n      props.onUpdateSV(normalizedNewS, normalizedNewV);\n    }\n\n    function handleMouseUp() {\n      var _a;\n\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n\n    return {\n      palleteRef,\n      handleColor: computed(() => {\n        const {\n          rgba\n        } = props;\n        if (!rgba) return '';\n        return `rgb(${rgba[0]}, ${rgba[1]}, ${rgba[2]})`;\n      }),\n      handleMouseDown\n    };\n  },\n\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-pallete`,\n      onMousedown: this.handleMouseDown,\n      ref: \"palleteRef\"\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-pallete__layer`,\n      style: {\n        backgroundImage: `linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`\n      }\n    }), h(\"div\", {\n      class: `${clsPrefix}-color-picker-pallete__layer ${clsPrefix}-color-picker-pallete__layer--shadowed`,\n      style: {\n        backgroundImage: 'linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))'\n      }\n    }), this.rgba && h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS,\n        left: `calc(${this.displayedSv[0]}% - ${RADIUS})`,\n        bottom: `calc(${this.displayedSv[1]}% - ${RADIUS})`\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: this.handleColor,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    })));\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/color-picker/src/Pallete.js"],"names":["on","off","computed","defineComponent","h","ref","HANDLE_SIZE","RADIUS","name","props","clsPrefix","type","String","required","rgba","Array","default","displayedHue","Number","displayedSv","onUpdateSV","Function","onComplete","setup","palleteRef","handleMouseDown","e","value","document","handleMouseMove","handleMouseUp","palleteEl","width","height","left","bottom","getBoundingClientRect","newV","clientY","newS","clientX","normalizedNewS","normalizedNewV","_a","call","handleColor","render","class","onMousedown","style","backgroundImage","borderRadius","backgroundColor"],"mappings":"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","sourcesContent":["import { on, off } from 'evtd';\nimport { computed, defineComponent, h, ref } from 'vue';\nconst HANDLE_SIZE = '12px';\nconst RADIUS = '6px';\nexport default defineComponent({\n    name: 'Pallete',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        rgba: {\n            type: Array,\n            default: null\n        },\n        // 0 - 360\n        displayedHue: {\n            type: Number,\n            required: true\n        },\n        displayedSv: {\n            type: Array,\n            required: true\n        },\n        onUpdateSV: {\n            type: Function,\n            required: true\n        },\n        onComplete: Function\n    },\n    setup(props) {\n        const palleteRef = ref(null);\n        function handleMouseDown(e) {\n            if (!palleteRef.value)\n                return;\n            on('mousemove', document, handleMouseMove);\n            on('mouseup', document, handleMouseUp);\n            handleMouseMove(e);\n        }\n        function handleMouseMove(e) {\n            const { value: palleteEl } = palleteRef;\n            if (!palleteEl)\n                return;\n            const { width, height, left, bottom } = palleteEl.getBoundingClientRect();\n            const newV = (bottom - e.clientY) / height;\n            const newS = (e.clientX - left) / width;\n            const normalizedNewS = 100 * (newS > 1 ? 1 : newS < 0 ? 0 : newS);\n            const normalizedNewV = 100 * (newV > 1 ? 1 : newV < 0 ? 0 : newV);\n            props.onUpdateSV(normalizedNewS, normalizedNewV);\n        }\n        function handleMouseUp() {\n            var _a;\n            off('mousemove', document, handleMouseMove);\n            off('mouseup', document, handleMouseUp);\n            (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        return {\n            palleteRef,\n            handleColor: computed(() => {\n                const { rgba } = props;\n                if (!rgba)\n                    return '';\n                return `rgb(${rgba[0]}, ${rgba[1]}, ${rgba[2]})`;\n            }),\n            handleMouseDown\n        };\n    },\n    render() {\n        const { clsPrefix } = this;\n        return (h(\"div\", { class: `${clsPrefix}-color-picker-pallete`, onMousedown: this.handleMouseDown, ref: \"palleteRef\" },\n            h(\"div\", { class: `${clsPrefix}-color-picker-pallete__layer`, style: {\n                    backgroundImage: `linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`\n                } }),\n            h(\"div\", { class: `${clsPrefix}-color-picker-pallete__layer ${clsPrefix}-color-picker-pallete__layer--shadowed`, style: {\n                    backgroundImage: 'linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))'\n                } }),\n            this.rgba && (h(\"div\", { class: `${clsPrefix}-color-picker-handle`, style: {\n                    width: HANDLE_SIZE,\n                    height: HANDLE_SIZE,\n                    borderRadius: RADIUS,\n                    left: `calc(${this.displayedSv[0]}% - ${RADIUS})`,\n                    bottom: `calc(${this.displayedSv[1]}% - ${RADIUS})`\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-handle__fill`, style: {\n                        backgroundColor: this.handleColor,\n                        borderRadius: RADIUS,\n                        width: HANDLE_SIZE,\n                        height: HANDLE_SIZE\n                    } })))));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}