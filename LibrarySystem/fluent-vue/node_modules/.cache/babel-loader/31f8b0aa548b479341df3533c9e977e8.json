{"ast":null,"code":"import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, computed, Teleport, Transition, defineComponent } from \"vue\";\nimport { truthProp, numericProp, getZIndexStyle, makeStringProp, makeNumericProp, stopPropagation, createNamespace, HAPTICS_FEEDBACK } from \"../utils\";\nimport { useClickAway } from \"@vant/use\";\nimport NumberKeyboardKey from \"./NumberKeyboardKey\";\nconst [name, bem] = createNamespace(\"number-keyboard\");\nconst numberKeyboardProps = {\n  show: Boolean,\n  title: String,\n  theme: makeStringProp(\"default\"),\n  zIndex: numericProp,\n  teleport: [String, Object],\n  maxlength: makeNumericProp(Infinity),\n  modelValue: makeStringProp(\"\"),\n  transition: truthProp,\n  blurOnClose: truthProp,\n  showDeleteKey: truthProp,\n  randomKeyOrder: Boolean,\n  closeButtonText: String,\n  deleteButtonText: String,\n  closeButtonLoading: Boolean,\n  hideOnClickOutside: truthProp,\n  safeAreaInsetBottom: truthProp,\n  extraKey: {\n    type: [String, Array],\n    default: \"\"\n  }\n};\n\nfunction shuffle(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n\n  return array;\n}\n\nvar stdin_default = defineComponent({\n  name,\n  props: numberKeyboardProps,\n  emits: [\"show\", \"hide\", \"blur\", \"input\", \"close\", \"delete\", \"update:modelValue\"],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const root = ref();\n\n    const genBasicKeys = () => {\n      const keys2 = Array(9).fill(\"\").map((_, i) => ({\n        text: i + 1\n      }));\n\n      if (props.randomKeyOrder) {\n        shuffle(keys2);\n      }\n\n      return keys2;\n    };\n\n    const genDefaultKeys = () => [...genBasicKeys(), {\n      text: props.extraKey,\n      type: \"extra\"\n    }, {\n      text: 0\n    }, {\n      text: props.showDeleteKey ? props.deleteButtonText : \"\",\n      type: props.showDeleteKey ? \"delete\" : \"\"\n    }];\n\n    const genCustomKeys = () => {\n      const keys2 = genBasicKeys();\n      const {\n        extraKey\n      } = props;\n      const extraKeys = Array.isArray(extraKey) ? extraKey : [extraKey];\n\n      if (extraKeys.length === 1) {\n        keys2.push({\n          text: 0,\n          wider: true\n        }, {\n          text: extraKeys[0],\n          type: \"extra\"\n        });\n      } else if (extraKeys.length === 2) {\n        keys2.push({\n          text: extraKeys[0],\n          type: \"extra\"\n        }, {\n          text: 0\n        }, {\n          text: extraKeys[1],\n          type: \"extra\"\n        });\n      }\n\n      return keys2;\n    };\n\n    const keys = computed(() => props.theme === \"custom\" ? genCustomKeys() : genDefaultKeys());\n\n    const onBlur = () => {\n      if (props.show) {\n        emit(\"blur\");\n      }\n    };\n\n    const onClose = () => {\n      emit(\"close\");\n\n      if (props.blurOnClose) {\n        onBlur();\n      }\n    };\n\n    const onAnimationEnd = () => emit(props.show ? \"show\" : \"hide\");\n\n    const onPress = (text, type) => {\n      if (text === \"\") {\n        if (type === \"extra\") {\n          onBlur();\n        }\n\n        return;\n      }\n\n      const value = props.modelValue;\n\n      if (type === \"delete\") {\n        emit(\"delete\");\n        emit(\"update:modelValue\", value.slice(0, value.length - 1));\n      } else if (type === \"close\") {\n        onClose();\n      } else if (value.length < props.maxlength) {\n        emit(\"input\", text);\n        emit(\"update:modelValue\", value + text);\n      }\n    };\n\n    const renderTitle = () => {\n      const {\n        title,\n        theme,\n        closeButtonText\n      } = props;\n      const leftSlot = slots[\"title-left\"];\n      const showClose = closeButtonText && theme === \"default\";\n      const showTitle = title || showClose || leftSlot;\n\n      if (!showTitle) {\n        return;\n      }\n\n      return _createVNode(\"div\", {\n        \"class\": bem(\"header\")\n      }, [leftSlot && _createVNode(\"span\", {\n        \"class\": bem(\"title-left\")\n      }, [leftSlot()]), title && _createVNode(\"h2\", {\n        \"class\": bem(\"title\")\n      }, [title]), showClose && _createVNode(\"button\", {\n        \"type\": \"button\",\n        \"class\": [bem(\"close\"), HAPTICS_FEEDBACK],\n        \"onClick\": onClose\n      }, [closeButtonText])]);\n    };\n\n    const renderKeys = () => keys.value.map(key => {\n      const keySlots = {};\n\n      if (key.type === \"delete\") {\n        keySlots.default = slots.delete;\n      }\n\n      if (key.type === \"extra\") {\n        keySlots.default = slots[\"extra-key\"];\n      }\n\n      return _createVNode(NumberKeyboardKey, {\n        \"key\": key.text,\n        \"text\": key.text,\n        \"type\": key.type,\n        \"wider\": key.wider,\n        \"color\": key.color,\n        \"onPress\": onPress\n      }, keySlots);\n    });\n\n    const renderSidebar = () => {\n      if (props.theme === \"custom\") {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"sidebar\")\n        }, [props.showDeleteKey && _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.deleteButtonText,\n          \"type\": \"delete\",\n          \"onPress\": onPress\n        }, {\n          delete: slots.delete\n        }), _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.closeButtonText,\n          \"type\": \"close\",\n          \"color\": \"blue\",\n          \"loading\": props.closeButtonLoading,\n          \"onPress\": onPress\n        }, null)]);\n      }\n    };\n\n    watch(() => props.show, value => {\n      if (!props.transition) {\n        emit(value ? \"show\" : \"hide\");\n      }\n    });\n\n    if (props.hideOnClickOutside) {\n      useClickAway(root, onBlur, {\n        eventName: \"touchstart\"\n      });\n    }\n\n    return () => {\n      const Title = renderTitle();\n\n      const Content = _createVNode(Transition, {\n        \"name\": props.transition ? \"van-slide-up\" : \"\"\n      }, {\n        default: () => [_withDirectives(_createVNode(\"div\", {\n          \"ref\": root,\n          \"style\": getZIndexStyle(props.zIndex),\n          \"class\": bem({\n            unfit: !props.safeAreaInsetBottom,\n            \"with-title\": !!Title\n          }),\n          \"onTouchstart\": stopPropagation,\n          \"onAnimationend\": onAnimationEnd,\n          \"onWebkitAnimationEnd\": onAnimationEnd\n        }, [Title, _createVNode(\"div\", {\n          \"class\": bem(\"body\")\n        }, [_createVNode(\"div\", {\n          \"class\": bem(\"keys\")\n        }, [renderKeys()]), renderSidebar()])]), [[_vShow, props.show]])]\n      });\n\n      if (props.teleport) {\n        return _createVNode(Teleport, {\n          \"to\": props.teleport\n        }, {\n          default: () => [Content]\n        });\n      }\n\n      return Content;\n    };\n  }\n\n});\nexport { stdin_default as default };","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/vant/es/number-keyboard/NumberKeyboard.js"],"names":["withDirectives","_withDirectives","vShow","_vShow","createVNode","_createVNode","ref","watch","computed","Teleport","Transition","defineComponent","truthProp","numericProp","getZIndexStyle","makeStringProp","makeNumericProp","stopPropagation","createNamespace","HAPTICS_FEEDBACK","useClickAway","NumberKeyboardKey","name","bem","numberKeyboardProps","show","Boolean","title","String","theme","zIndex","teleport","Object","maxlength","Infinity","modelValue","transition","blurOnClose","showDeleteKey","randomKeyOrder","closeButtonText","deleteButtonText","closeButtonLoading","hideOnClickOutside","safeAreaInsetBottom","extraKey","type","Array","default","shuffle","array","i","length","j","Math","floor","random","temp","stdin_default","props","emits","setup","emit","slots","root","genBasicKeys","keys2","fill","map","_","text","genDefaultKeys","genCustomKeys","extraKeys","isArray","push","wider","keys","onBlur","onClose","onAnimationEnd","onPress","value","slice","renderTitle","leftSlot","showClose","showTitle","renderKeys","key","keySlots","delete","color","renderSidebar","eventName","Title","Content","unfit"],"mappings":"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","sourcesContent":["import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, computed, Teleport, Transition, defineComponent } from \"vue\";\nimport { truthProp, numericProp, getZIndexStyle, makeStringProp, makeNumericProp, stopPropagation, createNamespace, HAPTICS_FEEDBACK } from \"../utils\";\nimport { useClickAway } from \"@vant/use\";\nimport NumberKeyboardKey from \"./NumberKeyboardKey\";\nconst [name, bem] = createNamespace(\"number-keyboard\");\nconst numberKeyboardProps = {\n  show: Boolean,\n  title: String,\n  theme: makeStringProp(\"default\"),\n  zIndex: numericProp,\n  teleport: [String, Object],\n  maxlength: makeNumericProp(Infinity),\n  modelValue: makeStringProp(\"\"),\n  transition: truthProp,\n  blurOnClose: truthProp,\n  showDeleteKey: truthProp,\n  randomKeyOrder: Boolean,\n  closeButtonText: String,\n  deleteButtonText: String,\n  closeButtonLoading: Boolean,\n  hideOnClickOutside: truthProp,\n  safeAreaInsetBottom: truthProp,\n  extraKey: {\n    type: [String, Array],\n    default: \"\"\n  }\n};\nfunction shuffle(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n}\nvar stdin_default = defineComponent({\n  name,\n  props: numberKeyboardProps,\n  emits: [\"show\", \"hide\", \"blur\", \"input\", \"close\", \"delete\", \"update:modelValue\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const root = ref();\n    const genBasicKeys = () => {\n      const keys2 = Array(9).fill(\"\").map((_, i) => ({\n        text: i + 1\n      }));\n      if (props.randomKeyOrder) {\n        shuffle(keys2);\n      }\n      return keys2;\n    };\n    const genDefaultKeys = () => [...genBasicKeys(), {\n      text: props.extraKey,\n      type: \"extra\"\n    }, {\n      text: 0\n    }, {\n      text: props.showDeleteKey ? props.deleteButtonText : \"\",\n      type: props.showDeleteKey ? \"delete\" : \"\"\n    }];\n    const genCustomKeys = () => {\n      const keys2 = genBasicKeys();\n      const {\n        extraKey\n      } = props;\n      const extraKeys = Array.isArray(extraKey) ? extraKey : [extraKey];\n      if (extraKeys.length === 1) {\n        keys2.push({\n          text: 0,\n          wider: true\n        }, {\n          text: extraKeys[0],\n          type: \"extra\"\n        });\n      } else if (extraKeys.length === 2) {\n        keys2.push({\n          text: extraKeys[0],\n          type: \"extra\"\n        }, {\n          text: 0\n        }, {\n          text: extraKeys[1],\n          type: \"extra\"\n        });\n      }\n      return keys2;\n    };\n    const keys = computed(() => props.theme === \"custom\" ? genCustomKeys() : genDefaultKeys());\n    const onBlur = () => {\n      if (props.show) {\n        emit(\"blur\");\n      }\n    };\n    const onClose = () => {\n      emit(\"close\");\n      if (props.blurOnClose) {\n        onBlur();\n      }\n    };\n    const onAnimationEnd = () => emit(props.show ? \"show\" : \"hide\");\n    const onPress = (text, type) => {\n      if (text === \"\") {\n        if (type === \"extra\") {\n          onBlur();\n        }\n        return;\n      }\n      const value = props.modelValue;\n      if (type === \"delete\") {\n        emit(\"delete\");\n        emit(\"update:modelValue\", value.slice(0, value.length - 1));\n      } else if (type === \"close\") {\n        onClose();\n      } else if (value.length < props.maxlength) {\n        emit(\"input\", text);\n        emit(\"update:modelValue\", value + text);\n      }\n    };\n    const renderTitle = () => {\n      const {\n        title,\n        theme,\n        closeButtonText\n      } = props;\n      const leftSlot = slots[\"title-left\"];\n      const showClose = closeButtonText && theme === \"default\";\n      const showTitle = title || showClose || leftSlot;\n      if (!showTitle) {\n        return;\n      }\n      return _createVNode(\"div\", {\n        \"class\": bem(\"header\")\n      }, [leftSlot && _createVNode(\"span\", {\n        \"class\": bem(\"title-left\")\n      }, [leftSlot()]), title && _createVNode(\"h2\", {\n        \"class\": bem(\"title\")\n      }, [title]), showClose && _createVNode(\"button\", {\n        \"type\": \"button\",\n        \"class\": [bem(\"close\"), HAPTICS_FEEDBACK],\n        \"onClick\": onClose\n      }, [closeButtonText])]);\n    };\n    const renderKeys = () => keys.value.map((key) => {\n      const keySlots = {};\n      if (key.type === \"delete\") {\n        keySlots.default = slots.delete;\n      }\n      if (key.type === \"extra\") {\n        keySlots.default = slots[\"extra-key\"];\n      }\n      return _createVNode(NumberKeyboardKey, {\n        \"key\": key.text,\n        \"text\": key.text,\n        \"type\": key.type,\n        \"wider\": key.wider,\n        \"color\": key.color,\n        \"onPress\": onPress\n      }, keySlots);\n    });\n    const renderSidebar = () => {\n      if (props.theme === \"custom\") {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"sidebar\")\n        }, [props.showDeleteKey && _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.deleteButtonText,\n          \"type\": \"delete\",\n          \"onPress\": onPress\n        }, {\n          delete: slots.delete\n        }), _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.closeButtonText,\n          \"type\": \"close\",\n          \"color\": \"blue\",\n          \"loading\": props.closeButtonLoading,\n          \"onPress\": onPress\n        }, null)]);\n      }\n    };\n    watch(() => props.show, (value) => {\n      if (!props.transition) {\n        emit(value ? \"show\" : \"hide\");\n      }\n    });\n    if (props.hideOnClickOutside) {\n      useClickAway(root, onBlur, {\n        eventName: \"touchstart\"\n      });\n    }\n    return () => {\n      const Title = renderTitle();\n      const Content = _createVNode(Transition, {\n        \"name\": props.transition ? \"van-slide-up\" : \"\"\n      }, {\n        default: () => [_withDirectives(_createVNode(\"div\", {\n          \"ref\": root,\n          \"style\": getZIndexStyle(props.zIndex),\n          \"class\": bem({\n            unfit: !props.safeAreaInsetBottom,\n            \"with-title\": !!Title\n          }),\n          \"onTouchstart\": stopPropagation,\n          \"onAnimationend\": onAnimationEnd,\n          \"onWebkitAnimationEnd\": onAnimationEnd\n        }, [Title, _createVNode(\"div\", {\n          \"class\": bem(\"body\")\n        }, [_createVNode(\"div\", {\n          \"class\": bem(\"keys\")\n        }, [renderKeys()]), renderSidebar()])]), [[_vShow, props.show]])]\n      });\n      if (props.teleport) {\n        return _createVNode(Teleport, {\n          \"to\": props.teleport\n        }, {\n          default: () => [Content]\n        });\n      }\n      return Content;\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"]},"metadata":{},"sourceType":"module"}