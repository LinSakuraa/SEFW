{"ast":null,"code":"import { defineComponent } from \"vue\";\nimport { useMessage } from 'naive-ui';\nexport default defineComponent({\n  props: ['showModal', 'book'],\n  methods: {\n    borrowBook(bookid) {\n      if (this.$store.state.isLogin == false) {\n        this.message.error('请先登录再借书');\n      } else {\n        this.getBorrowBook(bookid);\n      }\n    },\n\n    //以下为涉及axios调用的方法\n\n    /****************************************************************/\n    //ajax请求 方法\n    getBorrowBook(bookid) {\n      //方法：get  发送userid,bookid,time,state 返回借书情况:boolean\n      console.log(bookid);\n      this.axios.post('borrow/add', {\n        \"cusID\": this.$store.state.user.userid,\n        \"bookID\": bookid,\n        \"borrowDate\": Date.now().toString,\n        \"state\": 0\n      }).then(response => {\n        console.log(response);\n\n        if (response.data == 1) {\n          this.message.success('借书成功!');\n        } else {\n          this.message.error('借书失败!');\n        }\n      }).catch(response => {\n        console.log(response);\n        this.message.error('服务器未响应!');\n      });\n    }\n\n  },\n  watch: {\n    showModal(newName, oldName) {\n      this.showM1 = true;\n    },\n\n    book(newName, oldName) {\n      this.thisbook = newName;\n    }\n\n  },\n\n  data() {\n    return {\n      showM1: false,\n      thisbook: {},\n      message: useMessage()\n    };\n  },\n\n  setup() {\n    function funBook() {//axios发送AJAX请求\n      //请求接收完毕 登录成功\n      //登录失败\n    }\n\n    return {\n      funBook,\n      bodyStyle: {\n        width: \"600px\"\n      },\n      segmented: {\n        content: \"soft\",\n        footer: \"soft\"\n      }\n    };\n  }\n\n});","map":{"version":3,"mappings":"AAiDA,SAASA,eAAT,QAA+B,KAA/B;AACA,SAASC,UAAT,QAA2B,UAA3B;AAEA,eAAeD,eAAe,CAAC;AAC7BE,OAAK,EAAC,CAAC,WAAD,EAAa,MAAb,CADuB;AAE7BC,SAAO,EAAC;AACHC,cAAU,CAACC,MAAD,EAAQ;AACrB,UAAG,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,OAAlB,IAA2B,KAA9B,EAAoC;AAClC,aAAKC,OAAL,CAAaC,KAAb,CAAmB,SAAnB;AACD,OAFD,MAEK;AAAC,aAAKC,aAAL,CAAmBN,MAAnB;AAA0B;AACjC,KALO;;AAON;;AACA;AACA;AACFM,iBAAa,CAACN,MAAD,EAAQ;AAAC;AACpBO,aAAO,CAACC,GAAR,CAAYR,MAAZ;AACA,WAAKS,KAAL,CAAWC,IAAX,CAAgB,YAAhB,EACA;AAAC,iBAAQ,KAAKT,MAAL,CAAYC,KAAZ,CAAkBS,IAAlB,CAAuBC,MAAhC;AACA,kBAASZ,MADT;AAEA,sBAAaa,IAAI,CAACC,GAAL,GAAWC,QAFxB;AAGA,iBAAQ;AAHR,OADA,EAKEC,IALF,CAKQC,QAAD,IAAY;AACfV,eAAO,CAACC,GAAR,CAAaS,QAAb;;AACA,YAAGA,QAAQ,CAACC,IAAT,IAAe,CAAlB,EAAoB;AAClB,eAAKd,OAAL,CAAae,OAAb,CAAqB,OAArB;AACF,SAFA,MAGI;AAAE,eAAKf,OAAL,CAAaC,KAAb,CAAmB,OAAnB;AAA4B;AAEnC,OAZH,EAYKe,KAZL,CAYYH,QAAD,IAAY;AACnBV,eAAO,CAACC,GAAR,CAAaS,QAAb;AACA,aAAKb,OAAL,CAAaC,KAAb,CAAmB,SAAnB;AACD,OAfH;AAgBF;;AA5BQ,GAFqB;AAgC7BgB,OAAK,EAAC;AACFC,aAAS,CAACC,OAAD,EAASC,OAAT,EAAiB;AACtB,WAAKC,MAAL,GAAY,IAAZ;AACP,KAHK;;AAIJC,QAAI,CAACH,OAAD,EAASC,OAAT,EAAiB;AACjB,WAAKG,QAAL,GAAcJ,OAAd;AACJ;;AANI,GAhCuB;;AAyC7BL,MAAI,GAAE;AACJ,WAAM;AACFO,YAAM,EAAC,KADL;AAEFE,cAAQ,EAAC,EAFP;AAGFvB,aAAO,EAACR,UAAU;AAHhB,KAAN;AAKD,GA/C4B;;AAgD7BgC,OAAK,GAAG;AACJ,aAASC,OAAT,GAAkB,CAEhB;AAIA;AACA;AACJ;;AAGA,WAAO;AACLA,aADK;AAELC,eAAS,EAAE;AACTC,aAAK,EAAE;AADE,OAFN;AAKLC,eAAS,EAAE;AACTC,eAAO,EAAE,MADA;AAETC,cAAM,EAAE;AAFC;AALN,KAAP;AAUF;;AAtE6B,CAAD,CAA9B","names":["defineComponent","useMessage","props","methods","borrowBook","bookid","$store","state","isLogin","message","error","getBorrowBook","console","log","axios","post","user","userid","Date","now","toString","then","response","data","success","catch","watch","showModal","newName","oldName","showM1","book","thisbook","setup","funBook","bodyStyle","width","segmented","content","footer"],"sourceRoot":"","sources":["G:\\VUE_FDS\\fluent-vue\\src\\components\\DialogContent\\ContentBook.vue"],"sourcesContent":["<template>\r\n  <n-modal\r\n    v-model:show=\"showM1\"\r\n    class=\"custom-card\"\r\n    preset=\"card\"\r\n    :style=\"bodyStyle\"\r\n    title=\"借阅图书\"\r\n    :mask-closable=\"false\"\r\n    size=\"huge\"\r\n    :bordered=\"false\"\r\n    :segmented=\"segmented\"\r\n  >\r\n    <template #header-extra>\r\n    </template>\r\n    <div class=\"div-book\">\r\n        <div class=\"book-container\">\r\n            <div class=\"book-show\">\r\n                <div class=\"showleft\">书籍名称</div>\r\n                <div class=\"showright\">{{thisbook.bookname}}</div>\r\n            </div>\r\n            <div class=\"book-show\">\r\n                <div class=\"showleft\">书籍编号</div>\r\n                <div class=\"showright\">{{thisbook.bookid}}</div>\r\n             </div>\r\n            <div class=\"book-show\">\r\n                <div class=\"showleft\">书籍作者</div>\r\n                <div class=\"showright\">{{thisbook.bookauthor}}</div>\r\n            </div>\r\n            <div class=\"book-show\">\r\n                <div class=\"showleft\">出版社</div>\r\n                <div class=\"showright\">{{thisbook.bookpublisher}}</div>\r\n            </div>\r\n            <div class=\"book-show\">\r\n                <div class=\"showleft\">类型</div>\r\n            <div class=\"showright\">{{thisbook.booktag}}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"bookimg\">\r\n            <img src=\"\" style=\"height:160px;width:160px\"/>\r\n        </div>\r\n     </div>\r\n    <div class=\"book-footer-div\">\r\n      <button class=\"book-button\" @click=\"showM1=false\">退出</button>\r\n      <button class=\"book-button\" @click=\"borrowBook(thisbook.bookid)\">借阅</button>\r\n      </div>\r\n  </n-modal>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent} from \"vue\";\r\nimport { useMessage } from 'naive-ui';\r\n\r\nexport default defineComponent({\r\n  props:['showModal','book'],\r\n  methods:{\r\n       borrowBook(bookid){\r\n    if(this.$store.state.isLogin==false){\r\n      this.message.error('请先登录再借书')\r\n    }else{this.getBorrowBook(bookid)}\r\n  },\r\n  \r\n    //以下为涉及axios调用的方法\r\n    /****************************************************************/\r\n    //ajax请求 方法\r\n  getBorrowBook(bookid){//方法：get  发送userid,bookid,time,state 返回借书情况:boolean\r\n    console.log(bookid);\r\n    this.axios.post('borrow/add',\r\n    {\"cusID\":this.$store.state.user.userid,\r\n    \"bookID\":bookid,\r\n    \"borrowDate\":Date.now().toString,\r\n    \"state\":0}\r\n    ).then((response)=>{\r\n        console.log( response)\r\n        if(response.data==1){\r\n          this.message.success('借书成功!');\r\n        }\r\n        else{ this.message.error('借书失败!');}\r\n\r\n      }).catch((response)=>{\r\n        console.log( response)\r\n        this.message.error('服务器未响应!');\r\n      })\r\n  }\r\n  },\r\n  watch:{\r\n      showModal(newName,oldName){\r\n          this.showM1=true;\r\n  },\r\n    book(newName,oldName){\r\n        this.thisbook=newName;\r\n    }\r\n  \r\n  },\r\n  data(){\r\n    return{\r\n        showM1:false,\r\n        thisbook:{},\r\n        message:useMessage()\r\n    }\r\n  },\r\n  setup() {\r\n      function funBook(){\r\n\r\n        //axios发送AJAX请求\r\n\r\n\r\n        \r\n        //请求接收完毕 登录成功\r\n        //登录失败\r\n    }\r\n      \r\n\r\n    return {\r\n      funBook,\r\n      bodyStyle: {\r\n        width: \"600px\"\r\n      },\r\n      segmented: {\r\n        content: \"soft\",\r\n        footer: \"soft\"\r\n      },\r\n    };\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<style>\r\n.div-book{\r\n    display:flex; \r\n    width:100%;\r\n    height:200px;\r\n    justify-content:left;\r\nalign-items:center;\r\n}\r\n.book-container{\r\n    flex-direction:column;\r\n    display:flex;\r\n    width:350px;\r\n    height:200px;\r\n}\r\n.bookimg{\r\n    width:160px;\r\n    height:160px;\r\n}\r\n.book-show{\r\nwidth:350px;\r\nheight:40px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n.showleft{\r\nwidth:100px;\r\nheight:40px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n.showright{\r\nwidth:250px;\r\nheight:40px;\r\ndisplay:flex;\r\njustify-content:left;\r\nalign-items:center;\r\n}\r\n\r\n.book-footer-div{\r\n  height:60px;\r\n  margin-top:20px;\r\n  display:flex;\r\n  justify-content:center;\r\n}\r\n\r\n.book-button{\r\nwidth:60px;\r\nheight:30px;\r\nmargin-left:40px;\r\nmargin-right:40px;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}