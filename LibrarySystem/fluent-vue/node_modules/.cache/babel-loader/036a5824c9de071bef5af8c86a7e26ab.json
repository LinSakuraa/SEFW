{"ast":null,"code":"import { h, defineComponent, ref, computed, inject } from 'vue';\nimport { NCheckbox, NCheckboxGroup } from '../../../checkbox';\nimport { NRadio, NRadioGroup } from '../../../radio';\nimport { NButton } from '../../../button';\nimport { NScrollbar } from '../../../_internal';\nimport { shouldUseArrayInSingleMode } from '../utils';\nimport { dataTableInjectionKey } from '../interface';\nexport default defineComponent({\n  name: 'DataTableFilterMenu',\n  props: {\n    column: {\n      type: Object,\n      required: true\n    },\n    radioGroupName: {\n      type: String,\n      required: true\n    },\n    multiple: {\n      type: Boolean,\n      required: true\n    },\n    value: {\n      type: [Array, String, Number],\n      default: null\n    },\n    options: {\n      type: Array,\n      required: true\n    },\n    onConfirm: {\n      type: Function,\n      required: true\n    },\n    onClear: {\n      type: Function,\n      required: true\n    },\n    onChange: {\n      type: Function,\n      required: true\n    }\n  },\n\n  setup(props) {\n    const {\n      mergedClsPrefixRef,\n      mergedThemeRef,\n      localeRef // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    } = inject(dataTableInjectionKey); // to be compared with changed value\n    // const initialValueRef = ref(props.value)\n\n    const temporalValueRef = ref(props.value);\n    const checkboxGroupValueRef = computed(() => {\n      const {\n        value: temporalValue\n      } = temporalValueRef;\n      if (!Array.isArray(temporalValue)) return null;\n      return temporalValue;\n    });\n    const radioGroupValueRef = computed(() => {\n      const {\n        value: temporalValue\n      } = temporalValueRef;\n\n      if (shouldUseArrayInSingleMode(props.column)) {\n        return Array.isArray(temporalValue) && temporalValue.length && temporalValue[0] || null;\n      }\n\n      if (!Array.isArray(temporalValue)) return temporalValue;\n      return null;\n    });\n\n    function doChange(value) {\n      // May need to check if equal\n      ;\n      props.onChange(value);\n    }\n\n    function handleChange(value) {\n      if (props.multiple && Array.isArray(value)) {\n        temporalValueRef.value = value;\n      } else if (shouldUseArrayInSingleMode(props.column) && !Array.isArray(value)) {\n        /** this branch is for compatibility */\n        temporalValueRef.value = [value];\n      } else {\n        temporalValueRef.value = value;\n      }\n    }\n\n    function handleConfirmClick() {\n      doChange(temporalValueRef.value);\n      props.onConfirm();\n    }\n\n    function handleClearClick() {\n      if (props.multiple || shouldUseArrayInSingleMode(props.column)) {\n        doChange([]);\n      } else {\n        doChange(null);\n      }\n\n      props.onClear();\n    }\n\n    return {\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedTheme: mergedThemeRef,\n      locale: localeRef,\n      checkboxGroupValue: checkboxGroupValueRef,\n      radioGroupValue: radioGroupValueRef,\n      handleChange,\n      handleConfirmClick,\n      handleClearClick\n    };\n  },\n\n  render() {\n    const {\n      mergedTheme,\n      locale,\n      mergedClsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-data-table-filter-menu`\n    }, h(NScrollbar, null, {\n      default: () => {\n        const {\n          checkboxGroupValue,\n          handleChange\n        } = this;\n        return this.multiple ? h(NCheckboxGroup, {\n          value: checkboxGroupValue,\n          class: `${mergedClsPrefix}-data-table-filter-menu__group`,\n          onUpdateValue: handleChange\n        }, {\n          default: () => this.options.map(option => {\n            return h(NCheckbox, {\n              key: option.value,\n              theme: mergedTheme.peers.Checkbox,\n              themeOverrides: mergedTheme.peerOverrides.Checkbox,\n              value: option.value\n            }, {\n              default: () => option.label\n            });\n          })\n        }) : h(NRadioGroup, {\n          name: this.radioGroupName,\n          class: `${mergedClsPrefix}-data-table-filter-menu__group`,\n          value: this.radioGroupValue,\n          onUpdateValue: this.handleChange\n        }, {\n          default: () => this.options.map(option => h(NRadio, {\n            key: option.value,\n            value: option.value,\n            theme: mergedTheme.peers.Radio,\n            themeOverrides: mergedTheme.peerOverrides.Radio\n          }, {\n            default: () => option.label\n          }))\n        });\n      }\n    }), h(\"div\", {\n      class: `${mergedClsPrefix}-data-table-filter-menu__action`\n    }, h(NButton, {\n      size: \"tiny\",\n      theme: mergedTheme.peers.Button,\n      themeOverrides: mergedTheme.peerOverrides.Button,\n      onClick: this.handleClearClick\n    }, {\n      default: () => locale.clear\n    }), h(NButton, {\n      theme: mergedTheme.peers.Button,\n      themeOverrides: mergedTheme.peerOverrides.Button,\n      type: \"primary\",\n      size: \"tiny\",\n      onClick: this.handleConfirmClick\n    }, {\n      default: () => locale.confirm\n    })));\n  }\n\n});","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/naive-ui/es/data-table/src/HeaderButton/FilterMenu.js"],"names":["h","defineComponent","ref","computed","inject","NCheckbox","NCheckboxGroup","NRadio","NRadioGroup","NButton","NScrollbar","shouldUseArrayInSingleMode","dataTableInjectionKey","name","props","column","type","Object","required","radioGroupName","String","multiple","Boolean","value","Array","Number","default","options","onConfirm","Function","onClear","onChange","setup","mergedClsPrefixRef","mergedThemeRef","localeRef","temporalValueRef","checkboxGroupValueRef","temporalValue","isArray","radioGroupValueRef","length","doChange","handleChange","handleConfirmClick","handleClearClick","mergedClsPrefix","mergedTheme","locale","checkboxGroupValue","radioGroupValue","render","class","onUpdateValue","map","option","key","theme","peers","Checkbox","themeOverrides","peerOverrides","label","Radio","size","Button","onClick","clear","confirm"],"mappings":"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","sourcesContent":["import { h, defineComponent, ref, computed, inject } from 'vue';\nimport { NCheckbox, NCheckboxGroup } from '../../../checkbox';\nimport { NRadio, NRadioGroup } from '../../../radio';\nimport { NButton } from '../../../button';\nimport { NScrollbar } from '../../../_internal';\nimport { shouldUseArrayInSingleMode } from '../utils';\nimport { dataTableInjectionKey } from '../interface';\nexport default defineComponent({\n    name: 'DataTableFilterMenu',\n    props: {\n        column: {\n            type: Object,\n            required: true\n        },\n        radioGroupName: {\n            type: String,\n            required: true\n        },\n        multiple: {\n            type: Boolean,\n            required: true\n        },\n        value: {\n            type: [Array, String, Number],\n            default: null\n        },\n        options: {\n            type: Array,\n            required: true\n        },\n        onConfirm: {\n            type: Function,\n            required: true\n        },\n        onClear: {\n            type: Function,\n            required: true\n        },\n        onChange: {\n            type: Function,\n            required: true\n        }\n    },\n    setup(props) {\n        const { mergedClsPrefixRef, mergedThemeRef, localeRef\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n         } = inject(dataTableInjectionKey);\n        // to be compared with changed value\n        // const initialValueRef = ref(props.value)\n        const temporalValueRef = ref(props.value);\n        const checkboxGroupValueRef = computed(() => {\n            const { value: temporalValue } = temporalValueRef;\n            if (!Array.isArray(temporalValue))\n                return null;\n            return temporalValue;\n        });\n        const radioGroupValueRef = computed(() => {\n            const { value: temporalValue } = temporalValueRef;\n            if (shouldUseArrayInSingleMode(props.column)) {\n                return ((Array.isArray(temporalValue) &&\n                    temporalValue.length &&\n                    temporalValue[0]) ||\n                    null);\n            }\n            if (!Array.isArray(temporalValue))\n                return temporalValue;\n            return null;\n        });\n        function doChange(value) {\n            // May need to check if equal\n            ;\n            props.onChange(value);\n        }\n        function handleChange(value) {\n            if (props.multiple && Array.isArray(value)) {\n                temporalValueRef.value = value;\n            }\n            else if (shouldUseArrayInSingleMode(props.column) &&\n                !Array.isArray(value)) {\n                /** this branch is for compatibility */\n                temporalValueRef.value = [value];\n            }\n            else {\n                temporalValueRef.value = value;\n            }\n        }\n        function handleConfirmClick() {\n            doChange(temporalValueRef.value);\n            props.onConfirm();\n        }\n        function handleClearClick() {\n            if (props.multiple || shouldUseArrayInSingleMode(props.column)) {\n                doChange([]);\n            }\n            else {\n                doChange(null);\n            }\n            props.onClear();\n        }\n        return {\n            mergedClsPrefix: mergedClsPrefixRef,\n            mergedTheme: mergedThemeRef,\n            locale: localeRef,\n            checkboxGroupValue: checkboxGroupValueRef,\n            radioGroupValue: radioGroupValueRef,\n            handleChange,\n            handleConfirmClick,\n            handleClearClick\n        };\n    },\n    render() {\n        const { mergedTheme, locale, mergedClsPrefix } = this;\n        return (h(\"div\", { class: `${mergedClsPrefix}-data-table-filter-menu` },\n            h(NScrollbar, null, {\n                default: () => {\n                    const { checkboxGroupValue, handleChange } = this;\n                    return this.multiple ? (h(NCheckboxGroup, { value: checkboxGroupValue, class: `${mergedClsPrefix}-data-table-filter-menu__group`, onUpdateValue: handleChange }, {\n                        default: () => this.options.map((option) => {\n                            return (h(NCheckbox, { key: option.value, theme: mergedTheme.peers.Checkbox, themeOverrides: mergedTheme.peerOverrides.Checkbox, value: option.value }, { default: () => option.label }));\n                        })\n                    })) : (h(NRadioGroup, { name: this.radioGroupName, class: `${mergedClsPrefix}-data-table-filter-menu__group`, value: this.radioGroupValue, onUpdateValue: this.handleChange }, {\n                        default: () => this.options.map((option) => (h(NRadio, { key: option.value, value: option.value, theme: mergedTheme.peers.Radio, themeOverrides: mergedTheme.peerOverrides.Radio }, { default: () => option.label })))\n                    }));\n                }\n            }),\n            h(\"div\", { class: `${mergedClsPrefix}-data-table-filter-menu__action` },\n                h(NButton, { size: \"tiny\", theme: mergedTheme.peers.Button, themeOverrides: mergedTheme.peerOverrides.Button, onClick: this.handleClearClick }, { default: () => locale.clear }),\n                h(NButton, { theme: mergedTheme.peers.Button, themeOverrides: mergedTheme.peerOverrides.Button, type: \"primary\", size: \"tiny\", onClick: this.handleConfirmClick }, { default: () => locale.confirm }))));\n    }\n});\n"]},"metadata":{},"sourceType":"module"}