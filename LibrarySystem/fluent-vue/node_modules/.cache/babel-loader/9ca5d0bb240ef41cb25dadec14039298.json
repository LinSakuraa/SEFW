{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { t, bem, isImageFile } from \"./utils\";\nimport { isDef, extend, numericProp, getSizeStyle, callInterceptor, makeRequiredProp } from \"../utils\";\nimport { Icon } from \"../icon\";\nimport { Image } from \"../image\";\nimport { Loading } from \"../loading\";\nvar stdin_default = defineComponent({\n  props: {\n    name: numericProp,\n    item: makeRequiredProp(Object),\n    index: Number,\n    imageFit: String,\n    lazyLoad: Boolean,\n    deletable: Boolean,\n    previewSize: [Number, String, Array],\n    beforeDelete: Function\n  },\n  emits: [\"delete\", \"preview\"],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const renderMask = () => {\n      const {\n        status,\n        message\n      } = props.item;\n\n      if (status === \"uploading\" || status === \"failed\") {\n        const MaskIcon = status === \"failed\" ? _createVNode(Icon, {\n          \"name\": \"close\",\n          \"class\": bem(\"mask-icon\")\n        }, null) : _createVNode(Loading, {\n          \"class\": bem(\"loading\")\n        }, null);\n        const showMessage = isDef(message) && message !== \"\";\n        return _createVNode(\"div\", {\n          \"class\": bem(\"mask\")\n        }, [MaskIcon, showMessage && _createVNode(\"div\", {\n          \"class\": bem(\"mask-message\")\n        }, [message])]);\n      }\n    };\n\n    const onDelete = event => {\n      const {\n        name,\n        item,\n        index,\n        beforeDelete\n      } = props;\n      event.stopPropagation();\n      callInterceptor(beforeDelete, {\n        args: [item, {\n          name,\n          index\n        }],\n        done: () => emit(\"delete\")\n      });\n    };\n\n    const onPreview = () => emit(\"preview\");\n\n    const renderDeleteIcon = () => {\n      if (props.deletable && props.item.status !== \"uploading\") {\n        return _createVNode(\"div\", {\n          \"role\": \"button\",\n          \"class\": bem(\"preview-delete\"),\n          \"tabindex\": 0,\n          \"aria-label\": t(\"delete\"),\n          \"onClick\": onDelete\n        }, [_createVNode(Icon, {\n          \"name\": \"cross\",\n          \"class\": bem(\"preview-delete-icon\")\n        }, null)]);\n      }\n    };\n\n    const renderCover = () => {\n      if (slots[\"preview-cover\"]) {\n        const {\n          index,\n          item\n        } = props;\n        return _createVNode(\"div\", {\n          \"class\": bem(\"preview-cover\")\n        }, [slots[\"preview-cover\"](extend({\n          index\n        }, item))]);\n      }\n    };\n\n    const renderPreview = () => {\n      const {\n        item,\n        lazyLoad,\n        imageFit,\n        previewSize\n      } = props;\n\n      if (isImageFile(item)) {\n        return _createVNode(Image, {\n          \"fit\": imageFit,\n          \"src\": item.content || item.url,\n          \"class\": bem(\"preview-image\"),\n          \"width\": Array.isArray(previewSize) ? previewSize[0] : previewSize,\n          \"height\": Array.isArray(previewSize) ? previewSize[1] : previewSize,\n          \"lazyLoad\": lazyLoad,\n          \"onClick\": onPreview\n        }, {\n          default: renderCover\n        });\n      }\n\n      return _createVNode(\"div\", {\n        \"class\": bem(\"file\"),\n        \"style\": getSizeStyle(props.previewSize)\n      }, [_createVNode(Icon, {\n        \"class\": bem(\"file-icon\"),\n        \"name\": \"description\"\n      }, null), _createVNode(\"div\", {\n        \"class\": [bem(\"file-name\"), \"van-ellipsis\"]\n      }, [item.file ? item.file.name : item.url]), renderCover()]);\n    };\n\n    return () => _createVNode(\"div\", {\n      \"class\": bem(\"preview\")\n    }, [renderPreview(), renderMask(), renderDeleteIcon()]);\n  }\n\n});\nexport { stdin_default as default };","map":{"version":3,"sources":["G:/VUE_FDS/fluent-vue/node_modules/vant/es/uploader/UploaderPreviewItem.js"],"names":["createVNode","_createVNode","defineComponent","t","bem","isImageFile","isDef","extend","numericProp","getSizeStyle","callInterceptor","makeRequiredProp","Icon","Image","Loading","stdin_default","props","name","item","Object","index","Number","imageFit","String","lazyLoad","Boolean","deletable","previewSize","Array","beforeDelete","Function","emits","setup","emit","slots","renderMask","status","message","MaskIcon","showMessage","onDelete","event","stopPropagation","args","done","onPreview","renderDeleteIcon","renderCover","renderPreview","content","url","isArray","default","file"],"mappings":"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","sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { t, bem, isImageFile } from \"./utils\";\nimport { isDef, extend, numericProp, getSizeStyle, callInterceptor, makeRequiredProp } from \"../utils\";\nimport { Icon } from \"../icon\";\nimport { Image } from \"../image\";\nimport { Loading } from \"../loading\";\nvar stdin_default = defineComponent({\n  props: {\n    name: numericProp,\n    item: makeRequiredProp(Object),\n    index: Number,\n    imageFit: String,\n    lazyLoad: Boolean,\n    deletable: Boolean,\n    previewSize: [Number, String, Array],\n    beforeDelete: Function\n  },\n  emits: [\"delete\", \"preview\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const renderMask = () => {\n      const {\n        status,\n        message\n      } = props.item;\n      if (status === \"uploading\" || status === \"failed\") {\n        const MaskIcon = status === \"failed\" ? _createVNode(Icon, {\n          \"name\": \"close\",\n          \"class\": bem(\"mask-icon\")\n        }, null) : _createVNode(Loading, {\n          \"class\": bem(\"loading\")\n        }, null);\n        const showMessage = isDef(message) && message !== \"\";\n        return _createVNode(\"div\", {\n          \"class\": bem(\"mask\")\n        }, [MaskIcon, showMessage && _createVNode(\"div\", {\n          \"class\": bem(\"mask-message\")\n        }, [message])]);\n      }\n    };\n    const onDelete = (event) => {\n      const {\n        name,\n        item,\n        index,\n        beforeDelete\n      } = props;\n      event.stopPropagation();\n      callInterceptor(beforeDelete, {\n        args: [item, {\n          name,\n          index\n        }],\n        done: () => emit(\"delete\")\n      });\n    };\n    const onPreview = () => emit(\"preview\");\n    const renderDeleteIcon = () => {\n      if (props.deletable && props.item.status !== \"uploading\") {\n        return _createVNode(\"div\", {\n          \"role\": \"button\",\n          \"class\": bem(\"preview-delete\"),\n          \"tabindex\": 0,\n          \"aria-label\": t(\"delete\"),\n          \"onClick\": onDelete\n        }, [_createVNode(Icon, {\n          \"name\": \"cross\",\n          \"class\": bem(\"preview-delete-icon\")\n        }, null)]);\n      }\n    };\n    const renderCover = () => {\n      if (slots[\"preview-cover\"]) {\n        const {\n          index,\n          item\n        } = props;\n        return _createVNode(\"div\", {\n          \"class\": bem(\"preview-cover\")\n        }, [slots[\"preview-cover\"](extend({\n          index\n        }, item))]);\n      }\n    };\n    const renderPreview = () => {\n      const {\n        item,\n        lazyLoad,\n        imageFit,\n        previewSize\n      } = props;\n      if (isImageFile(item)) {\n        return _createVNode(Image, {\n          \"fit\": imageFit,\n          \"src\": item.content || item.url,\n          \"class\": bem(\"preview-image\"),\n          \"width\": Array.isArray(previewSize) ? previewSize[0] : previewSize,\n          \"height\": Array.isArray(previewSize) ? previewSize[1] : previewSize,\n          \"lazyLoad\": lazyLoad,\n          \"onClick\": onPreview\n        }, {\n          default: renderCover\n        });\n      }\n      return _createVNode(\"div\", {\n        \"class\": bem(\"file\"),\n        \"style\": getSizeStyle(props.previewSize)\n      }, [_createVNode(Icon, {\n        \"class\": bem(\"file-icon\"),\n        \"name\": \"description\"\n      }, null), _createVNode(\"div\", {\n        \"class\": [bem(\"file-name\"), \"van-ellipsis\"]\n      }, [item.file ? item.file.name : item.url]), renderCover()]);\n    };\n    return () => _createVNode(\"div\", {\n      \"class\": bem(\"preview\")\n    }, [renderPreview(), renderMask(), renderDeleteIcon()]);\n  }\n});\nexport {\n  stdin_default as default\n};\n"]},"metadata":{},"sourceType":"module"}