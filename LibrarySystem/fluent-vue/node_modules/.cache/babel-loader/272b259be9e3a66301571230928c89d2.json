{"ast":null,"code":"import { direction as directionDesignToken } from '../design-tokens';\n/**\n * Behavior to conditionally apply LTR and RTL stylesheets. To determine which to apply,\n * the behavior will use the nearest DesignSystemProvider's 'direction' design system value.\n *\n * @public\n * @example\n * ```ts\n * import { css } from \"@microsoft/fast-element\";\n * import { DirectionalStyleSheetBehavior } from \"@microsoft/fast-foundation\";\n *\n * css`\n *  // ...\n * `.withBehaviors(new DirectionalStyleSheetBehavior(\n *   css`:host { content: \"ltr\"}`),\n *   css`:host { content: \"rtl\"}`),\n * )\n * ```\n */\n\nexport class DirectionalStyleSheetBehavior {\n  constructor(ltr, rtl) {\n    this.cache = new WeakMap();\n    this.ltr = ltr;\n    this.rtl = rtl;\n  }\n  /**\n   * @internal\n   */\n\n\n  bind(source) {\n    this.attach(source);\n  }\n  /**\n   * @internal\n   */\n\n\n  unbind(source) {\n    const cache = this.cache.get(source);\n\n    if (cache) {\n      directionDesignToken.unsubscribe(cache);\n    }\n  }\n\n  attach(source) {\n    const subscriber = this.cache.get(source) || new DirectionalStyleSheetBehaviorSubscription(this.ltr, this.rtl, source);\n    const value = directionDesignToken.getValueFor(source);\n    directionDesignToken.subscribe(subscriber);\n    subscriber.attach(value);\n    this.cache.set(source, subscriber);\n  }\n\n}\n/**\n * Subscription for {@link DirectionalStyleSheetBehavior}\n */\n\nclass DirectionalStyleSheetBehaviorSubscription {\n  constructor(ltr, rtl, source) {\n    this.ltr = ltr;\n    this.rtl = rtl;\n    this.source = source;\n    this.attached = null;\n  }\n\n  handleChange({\n    target,\n    token\n  }) {\n    this.attach(token.getValueFor(this.source));\n  }\n\n  attach(direction) {\n    if (this.attached !== this[direction]) {\n      if (this.attached !== null) {\n        this.source.$fastController.removeStyles(this.attached);\n      }\n\n      this.attached = this[direction];\n\n      if (this.attached !== null) {\n        this.source.$fastController.addStyles(this.attached);\n      }\n    }\n  }\n\n}","map":{"version":3,"sources":["D:/VUE_FDS/fluent-vue/node_modules/@fluentui/web-components/dist/esm/styles/direction.js"],"names":["direction","directionDesignToken","DirectionalStyleSheetBehavior","constructor","ltr","rtl","cache","WeakMap","bind","source","attach","unbind","get","unsubscribe","subscriber","DirectionalStyleSheetBehaviorSubscription","value","getValueFor","subscribe","set","attached","handleChange","target","token","$fastController","removeStyles","addStyles"],"mappings":"AAAA,SAASA,SAAS,IAAIC,oBAAtB,QAAkD,kBAAlD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,6BAAN,CAAoC;AACvCC,EAAAA,WAAW,CAACC,GAAD,EAAMC,GAAN,EAAW;AAClB,SAAKC,KAAL,GAAa,IAAIC,OAAJ,EAAb;AACA,SAAKH,GAAL,GAAWA,GAAX;AACA,SAAKC,GAAL,GAAWA,GAAX;AACH;AACD;AACJ;AACA;;;AACIG,EAAAA,IAAI,CAACC,MAAD,EAAS;AACT,SAAKC,MAAL,CAAYD,MAAZ;AACH;AACD;AACJ;AACA;;;AACIE,EAAAA,MAAM,CAACF,MAAD,EAAS;AACX,UAAMH,KAAK,GAAG,KAAKA,KAAL,CAAWM,GAAX,CAAeH,MAAf,CAAd;;AACA,QAAIH,KAAJ,EAAW;AACPL,MAAAA,oBAAoB,CAACY,WAArB,CAAiCP,KAAjC;AACH;AACJ;;AACDI,EAAAA,MAAM,CAACD,MAAD,EAAS;AACX,UAAMK,UAAU,GAAG,KAAKR,KAAL,CAAWM,GAAX,CAAeH,MAAf,KAA0B,IAAIM,yCAAJ,CAA8C,KAAKX,GAAnD,EAAwD,KAAKC,GAA7D,EAAkEI,MAAlE,CAA7C;AACA,UAAMO,KAAK,GAAGf,oBAAoB,CAACgB,WAArB,CAAiCR,MAAjC,CAAd;AACAR,IAAAA,oBAAoB,CAACiB,SAArB,CAA+BJ,UAA/B;AACAA,IAAAA,UAAU,CAACJ,MAAX,CAAkBM,KAAlB;AACA,SAAKV,KAAL,CAAWa,GAAX,CAAeV,MAAf,EAAuBK,UAAvB;AACH;;AA3BsC;AA6B3C;AACA;AACA;;AACA,MAAMC,yCAAN,CAAgD;AAC5CZ,EAAAA,WAAW,CAACC,GAAD,EAAMC,GAAN,EAAWI,MAAX,EAAmB;AAC1B,SAAKL,GAAL,GAAWA,GAAX;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKI,MAAL,GAAcA,MAAd;AACA,SAAKW,QAAL,GAAgB,IAAhB;AACH;;AACDC,EAAAA,YAAY,CAAC;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAAD,EAAoB;AAC5B,SAAKb,MAAL,CAAYa,KAAK,CAACN,WAAN,CAAkB,KAAKR,MAAvB,CAAZ;AACH;;AACDC,EAAAA,MAAM,CAACV,SAAD,EAAY;AACd,QAAI,KAAKoB,QAAL,KAAkB,KAAKpB,SAAL,CAAtB,EAAuC;AACnC,UAAI,KAAKoB,QAAL,KAAkB,IAAtB,EAA4B;AACxB,aAAKX,MAAL,CAAYe,eAAZ,CAA4BC,YAA5B,CAAyC,KAAKL,QAA9C;AACH;;AACD,WAAKA,QAAL,GAAgB,KAAKpB,SAAL,CAAhB;;AACA,UAAI,KAAKoB,QAAL,KAAkB,IAAtB,EAA4B;AACxB,aAAKX,MAAL,CAAYe,eAAZ,CAA4BE,SAA5B,CAAsC,KAAKN,QAA3C;AACH;AACJ;AACJ;;AApB2C","sourcesContent":["import { direction as directionDesignToken } from '../design-tokens';\n/**\n * Behavior to conditionally apply LTR and RTL stylesheets. To determine which to apply,\n * the behavior will use the nearest DesignSystemProvider's 'direction' design system value.\n *\n * @public\n * @example\n * ```ts\n * import { css } from \"@microsoft/fast-element\";\n * import { DirectionalStyleSheetBehavior } from \"@microsoft/fast-foundation\";\n *\n * css`\n *  // ...\n * `.withBehaviors(new DirectionalStyleSheetBehavior(\n *   css`:host { content: \"ltr\"}`),\n *   css`:host { content: \"rtl\"}`),\n * )\n * ```\n */\nexport class DirectionalStyleSheetBehavior {\n    constructor(ltr, rtl) {\n        this.cache = new WeakMap();\n        this.ltr = ltr;\n        this.rtl = rtl;\n    }\n    /**\n     * @internal\n     */\n    bind(source) {\n        this.attach(source);\n    }\n    /**\n     * @internal\n     */\n    unbind(source) {\n        const cache = this.cache.get(source);\n        if (cache) {\n            directionDesignToken.unsubscribe(cache);\n        }\n    }\n    attach(source) {\n        const subscriber = this.cache.get(source) || new DirectionalStyleSheetBehaviorSubscription(this.ltr, this.rtl, source);\n        const value = directionDesignToken.getValueFor(source);\n        directionDesignToken.subscribe(subscriber);\n        subscriber.attach(value);\n        this.cache.set(source, subscriber);\n    }\n}\n/**\n * Subscription for {@link DirectionalStyleSheetBehavior}\n */\nclass DirectionalStyleSheetBehaviorSubscription {\n    constructor(ltr, rtl, source) {\n        this.ltr = ltr;\n        this.rtl = rtl;\n        this.source = source;\n        this.attached = null;\n    }\n    handleChange({ target, token }) {\n        this.attach(token.getValueFor(this.source));\n    }\n    attach(direction) {\n        if (this.attached !== this[direction]) {\n            if (this.attached !== null) {\n                this.source.$fastController.removeStyles(this.attached);\n            }\n            this.attached = this[direction];\n            if (this.attached !== null) {\n                this.source.$fastController.addStyles(this.attached);\n            }\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}